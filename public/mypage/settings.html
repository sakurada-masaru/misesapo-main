<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <base href="/" />
    <title></title>
    <link rel="icon" type="image/png" href="/images/logo_144x144.png" />
<link rel="shortcut icon" href="/images/logo_144x144.png" />
<link rel="apple-touch-icon" href="/images/logo_144x144.png" />
<link rel="stylesheet" href="/styles.css" />
<link rel="stylesheet" href="/css/header.css" />
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<!-- 
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet" />
-->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
<style>
  body { font-family: 'Noto Sans JP', 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Hiragino Kaku Gothic ProN', Meiryo, sans-serif; }
  /* Brand theme variables (default + variants) */
  body { --primary: #FF679C; --primary-600: #E35687; }
  body.theme-pink { --primary: #FF679C; --primary-600: #E35687; }
  body.theme-blue { --primary: #2563eb; --primary-600: #1d4ed8; }
  body.theme-emerald { --primary: #10b981; --primary-600: #059669; }
  /* Note: :root also defines the same brand color; inline vars ensure early paint */
  </style>

    <style>
      /* Staff signin page: hide all headers */
      body.page-staff-signin #default-header-wrapper,
      body.page-staff-signin #normal-header-wrapper {
        display: none !important;
      }
      
      /* Staff pages: hide global header and footer */
      body[class*="page-staff-"] #default-header-wrapper,
      body[class*="page-staff-"] #normal-header-wrapper,
      body[class*="page-staff-"] footer {
        display: none !important;
      }
      
      /* Staff pages: ensure full height layout */
      body[class*="page-staff-"] {
        margin: 0;
        padding: 0;
      }
      
      body[class*="page-staff-"] #main {
        margin: 0;
        padding: 0;
      }
      
      /* Admin pages: hide global header while keeping auth buttons */
      body[class*="page-admin-"] #default-header-wrapper {
        height: 0;
        overflow: visible;
      }
      body[class*="page-admin-"] #default-header-wrapper .site-header {
        background: transparent;
        box-shadow: none;
        padding: 0;
        min-height: 0;
      }
      body[class*="page-admin-"] #default-header-wrapper .inner {
        justify-content: flex-end;
        padding: 0;
      }
      body[class*="page-admin-"] #default-header-wrapper .nav-left,
      body[class*="page-admin-"] #default-header-wrapper .hamburger-btn,
      body[class*="page-admin-"] #default-header-wrapper .mobile-nav,
      body[class*="page-admin-"] #default-header-wrapper .spacer,
      body[class*="page-admin-"] #default-header-wrapper .role-badge {
        display: none !important;
      }
      body[class*="page-admin-"] #default-header-wrapper .nav-right {
        position: fixed;
        top: 16px;
        right: 24px;
        display: inline-flex;
        align-items: center;
        gap: 12px;
        background: #fff;
        border-radius: 999px;
        padding: 6px 18px;
        box-shadow: 0 12px 30px rgba(15,23,42,0.18);
        z-index: 300;
      }
      body[class*="page-admin-"] #default-header-wrapper .nav-right .nav-link {
        font-weight: 600;
      }
      body[class*="page-admin-"] #default-header-wrapper .nav-right .icon-btn {
        width: 36px;
        height: 36px;
        border-radius: 999px;
        border: 1px solid #e5e7eb;
      }
    </style>
  </head>
  <body class="theme-pink ">
    <div id="default-header-wrapper">
    <a class="skip-link" href="#main">メインコンテンツへスキップ</a>
<header id="header-guest" class="site-header" data-role="guest">
  <div class="inner wide">
    <div class="nav-left">
      <a class="brand brand-logo" href="/index.html" aria-label="ミセサポ ホーム">
        <img src="/images/logo_144x144.png" alt="ミセサポ" />
      </a>
      <nav id="nav-guest" class="nav-left hide-sm" aria-label="Primary">
        <!-- ナビゲーション項目はJavaScriptで動的に生成されます -->
      </nav>
    </div>
    <div class="spacer"></div>
    <nav class="nav-right hide-sm" aria-label="User">
      <span class="role-badge" style="padding: 4px 12px; background: #e5e7eb; color: #6b7280; border-radius: 4px; font-size: 0.875rem; font-weight: 500;">ゲスト</span>
      <a class="nav-link" href="/signin.html">ログイン</a>
      <a class="nav-link primary" href="/signup.html">新規登録</a>
      <button class="icon-btn" aria-label="通知">
        <i class="fas fa-bell"></i>
      </button>
      <button class="icon-btn" aria-label="ログアウト" onclick="window.Auth && window.Auth.logout()" style="display: none;">
        <i class="fas fa-sign-out-alt"></i>
      </button>
    </nav>
    <button class="hamburger-btn show-sm" aria-label="メニュー" aria-expanded="false" id="hamburger-btn">
      <span></span>
      <span></span>
      <span></span>
    </button>
  </div>
  <!-- スマホ版ナビゲーションメニュー -->
  <nav class="mobile-nav show-sm" id="mobile-nav" aria-label="モバイルナビゲーション">
    <div class="mobile-nav-content">
      <nav class="mobile-nav-primary" id="mobile-nav-primary" aria-label="Primary">
        <!-- ナビゲーション項目はJavaScriptで動的に生成されます -->
      </nav>
      <nav class="mobile-nav-user" aria-label="User">
        <span class="role-badge" style="padding: 4px 12px; background: #e5e7eb; color: #6b7280; border-radius: 4px; font-size: 0.875rem; font-weight: 500;">ゲスト</span>
        <a class="mobile-nav-link" href="/signin.html">ログイン</a>
        <a class="mobile-nav-link primary" href="/signup.html">新規登録</a>
      </nav>
    </div>
  </nav>
</header>

    </div>
    <!-- 通常ヘッダー（ログイン画面用） -->
    <div id="normal-header-wrapper" style="display: none;">
    <!-- 通常ヘッダー -->
<header class="normal-header">
    <div class="normal-header-inner">
        <div class="normal-header-logo">
            <a href="/">
                <img id="normal-header-logo-img" src="/images-material/logo_144x144.png" alt="ロゴ" onerror="this.style.display='none'">
            </a>
                </div>
        <nav class="normal-header-nav">
            <a href="/">TOP</a>
            <a href="/service.html">対応可能サービス</a>
            <a href="/lp.html#voice">お客様の声</a>
            <a href="/customers-support-desk.html">カスタマーズサポート</a>
            <a href="/announcements.html">お知らせ</a>
            <a href="/privacy-policy.html">規約＆ポリシー</a>
        </nav>
        <div class="normal-header-actions">
            <a href="/signin.html" class="normal-header-login">ログイン</a>
        </div>
            </div>
</header>


    </div>
    <main id="main">
      
<script src="/js/client_auth.js"></script>



<main id="main" class="container mypage">
  <!-- Breadcrumbs -->
  <nav class="breadcrumb" aria-label="breadcrumb">
    <a href="/mypage.html">マイページ</a>
    <span class="sep">›</span>
    <span aria-current="page">アカウント設定</span>
  </nav>

  <h1 class="page-title">アカウント設定</h1>

  <!-- プロフィール設定 -->
  <section class="section">
    <h2 class="section-title">プロフィール設定</h2>
    <div class="card">
      <div class="profile-settings">
        <div class="profile-photo-section">
          <div class="profile-photo-preview">
            <img src="/images/logo_144x144.png" alt="プロフィール写真" id="profile-photo-preview" />
          </div>
          <button class="btn btn-outline btn-sm" onclick="document.getElementById('profile-photo-input').click()">
            <i class="fa-solid fa-camera" aria-hidden="true"></i>
            写真を変更
          </button>
          <input type="file" id="profile-photo-input" accept="image/*" style="display: none;" />
        </div>
        <div class="profile-form">
          <div class="form-group">
            <label for="display-name" class="form-label">表示名</label>
            <input type="text" id="display-name" class="form-control" value="山田 太郎" />
            <p class="form-help">サイト上で表示される名前を設定できます</p>
          </div>
          <div class="form-group">
            <label for="email" class="form-label">メールアドレス</label>
            <input type="email" id="email" class="form-control" value="yamada@dart-ace.com" />
            <p class="form-help">ログインに使用するメールアドレスです</p>
          </div>
        </div>
      </div>
      <div class="form-actions">
        <button class="btn btn-primary btn-round" onclick="saveProfileSettings()">
          <i class="fa-solid fa-save" aria-hidden="true"></i>
          保存する
        </button>
      </div>
    </div>
  </section>

  <!-- パスワード変更 -->
  <section class="section">
    <h2 class="section-title">パスワード変更</h2>
    <div class="card">
      <div class="password-form">
        <div class="form-group">
          <label for="current-password" class="form-label">現在のパスワード</label>
          <input type="password" id="current-password" class="form-control" />
        </div>
        <div class="form-group">
          <label for="new-password" class="form-label">新しいパスワード</label>
          <input type="password" id="new-password" class="form-control" />
          <p class="form-help">8文字以上、英数字と記号を組み合わせてください</p>
        </div>
        <div class="form-group">
          <label for="confirm-password" class="form-label">新しいパスワード（確認）</label>
          <input type="password" id="confirm-password" class="form-control" />
        </div>
      </div>
      <div class="form-actions">
        <button class="btn btn-primary btn-round" onclick="changePassword()">
          <i class="fa-solid fa-key" aria-hidden="true"></i>
          パスワードを変更
        </button>
      </div>
    </div>
  </section>

  <!-- 通知設定 -->
  <section class="section">
    <h2 class="section-title">通知設定</h2>
    <div class="card">
      <div class="notification-settings">
        <div class="notification-item">
          <div class="notification-info">
            <h3 class="notification-title">メール通知</h3>
            <p class="notification-description">清掃予定、レポート、お知らせなどのメール通知を受け取ります</p>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" id="email-notifications" checked />
            <span class="toggle-slider"></span>
          </label>
        </div>
        <div class="notification-item">
          <div class="notification-info">
            <h3 class="notification-title">清掃予定の通知</h3>
            <p class="notification-description">清掃予定日の前日にメールでお知らせします</p>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" id="schedule-notifications" checked />
            <span class="toggle-slider"></span>
          </label>
        </div>
        <div class="notification-item">
          <div class="notification-info">
            <h3 class="notification-title">レポート完了の通知</h3>
            <p class="notification-description">清掃レポートが作成されたらメールでお知らせします</p>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" id="report-notifications" checked />
            <span class="toggle-slider"></span>
          </label>
        </div>
        <div class="notification-item">
          <div class="notification-info">
            <h3 class="notification-title">お知らせの通知</h3>
            <p class="notification-description">お知らせやメンテナンス情報をメールでお知らせします</p>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" id="announcement-notifications" checked />
            <span class="toggle-slider"></span>
          </label>
        </div>
      </div>
      <div class="form-actions">
        <button class="btn btn-primary btn-round" onclick="saveNotificationSettings()">
          <i class="fa-solid fa-bell" aria-hidden="true"></i>
          通知設定を保存
        </button>
      </div>
    </div>
  </section>

  <!-- セキュリティ設定 -->
  <section class="section">
    <h2 class="section-title">セキュリティ設定</h2>
    <div class="card">
      <div class="security-settings">
        <div class="security-item">
          <div class="security-info">
            <h3 class="security-title">二要素認証（2FA）</h3>
            <p class="security-description">セキュリティを強化するために、ログイン時にコードを入力する必要があります</p>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" id="two-factor-auth" />
            <span class="toggle-slider"></span>
          </label>
        </div>
        <div class="security-item">
          <div class="security-info">
            <h3 class="security-title">ログイン履歴</h3>
            <p class="security-description">最近のログイン履歴を確認できます</p>
          </div>
          <a href="#" class="btn btn-outline btn-sm" onclick="viewLoginHistory()">
            履歴を確認
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- アカウント削除 -->
  <section class="section">
    <h2 class="section-title">アカウント管理</h2>
    <div class="card danger-zone">
      <div class="danger-zone-content">
        <h3 class="danger-zone-title">アカウントの削除</h3>
        <p class="danger-zone-description">アカウントを削除すると、すべてのデータが完全に削除され、復元できません。この操作は取り消せません。</p>
        <button class="btn btn-danger btn-round" onclick="confirmAccountDeletion()">
          <i class="fa-solid fa-trash" aria-hidden="true"></i>
          アカウントを削除
        </button>
      </div>
    </div>
  </section>

  <div class="page-actions">
    <a class="btn btn-outline-primary btn-round btn-lg" href="/mypage.html">
      <i class="fa-solid fa-arrow-left" aria-hidden="true"></i>
      マイページへ戻る
    </a>
  </div>
</main>

<style>
/* ユーザー設定ページのスタイル */
.page-user-settings .profile-settings {
  display: flex;
  gap: 24px;
  align-items: flex-start;
  margin-bottom: 24px;
}

.profile-photo-section {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
}

.profile-photo-preview {
  width: 120px;
  height: 120px;
  border-radius: 50%;
  overflow: hidden;
  border: 3px solid #e5e7eb;
  background: #f3f4f6;
}

.profile-photo-preview img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.profile-form {
  flex: 1;
}

.notification-item,
.security-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 0;
  border-bottom: 1px solid #e5e7eb;
}

.notification-item:last-child,
.security-item:last-child {
  border-bottom: none;
}

.notification-info,
.security-info {
  flex: 1;
  margin-right: 16px;
}

.notification-title,
.security-title {
  font-size: 1rem;
  font-weight: 600;
  color: #111827;
  margin-bottom: 4px;
}

.notification-description,
.security-description {
  font-size: 0.875rem;
  color: #6b7280;
  margin: 0;
}

.toggle-switch {
  position: relative;
  display: inline-block;
  width: 48px;
  height: 24px;
}

.toggle-switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.toggle-slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #ccc;
  transition: 0.3s;
  border-radius: 24px;
}

.toggle-slider:before {
  position: absolute;
  content: "";
  height: 18px;
  width: 18px;
  left: 3px;
  bottom: 3px;
  background-color: white;
  transition: 0.3s;
  border-radius: 50%;
}

.toggle-switch input:checked + .toggle-slider {
  background-color: #3b82f6;
}

.toggle-switch input:checked + .toggle-slider:before {
  transform: translateX(24px);
}

.danger-zone {
  border: 2px solid #ef4444;
  background: #fef2f2;
}

.danger-zone-content {
  padding: 16px;
}

.danger-zone-title {
  font-size: 1.125rem;
  font-weight: 600;
  color: #dc2626;
  margin-bottom: 8px;
}

.danger-zone-description {
  font-size: 0.875rem;
  color: #991b1b;
  margin-bottom: 16px;
}

.btn-danger {
  background: #dc2626;
  color: white;
  border-color: #dc2626;
}

.btn-danger:hover {
  background: #b91c1c;
  border-color: #b91c1c;
}

.form-actions {
  margin-top: 24px;
  padding-top: 24px;
  border-top: 1px solid #e5e7eb;
}

@media (max-width: 767.98px) {
  .profile-settings {
    flex-direction: column;
  }

  .notification-item,
  .security-item {
    flex-direction: column;
    align-items: flex-start;
    gap: 12px;
  }

  .notification-info,
  .security-info {
    margin-right: 0;
  }
}
</style>

<script>
// プロフィール写真のプレビュー
document.getElementById('profile-photo-input')?.addEventListener('change', function(e) {
  const file = e.target.files[0];
  if (file) {
    const reader = new FileReader();
    reader.onload = function(e) {
      document.getElementById('profile-photo-preview').src = e.target.result;
    };
    reader.readAsDataURL(file);
  }
});

// プロフィール設定の保存
function saveProfileSettings() {
  const displayName = document.getElementById('display-name').value;
  const email = document.getElementById('email').value;
  
  // バリデーション
  if (!displayName || !email) {
    alert('すべての項目を入力してください');
    return;
  }

  // モック保存処理
  alert('プロフィール設定を保存しました');
}

// パスワード変更
function changePassword() {
  const currentPassword = document.getElementById('current-password').value;
  const newPassword = document.getElementById('new-password').value;
  const confirmPassword = document.getElementById('confirm-password').value;

  // バリデーション
  if (!currentPassword || !newPassword || !confirmPassword) {
    alert('すべての項目を入力してください');
    return;
  }

  if (newPassword !== confirmPassword) {
    alert('新しいパスワードと確認用パスワードが一致しません');
    return;
  }

  if (newPassword.length < 8) {
    alert('パスワードは8文字以上にしてください');
    return;
  }

  // モック保存処理
  alert('パスワードを変更しました');
  
  // フォームをリセット
  document.getElementById('current-password').value = '';
  document.getElementById('new-password').value = '';
  document.getElementById('confirm-password').value = '';
}

// 通知設定の保存
function saveNotificationSettings() {
  const settings = {
    email: document.getElementById('email-notifications').checked,
    schedule: document.getElementById('schedule-notifications').checked,
    report: document.getElementById('report-notifications').checked,
    announcement: document.getElementById('announcement-notifications').checked
  };

  // モック保存処理
  localStorage.setItem('notificationSettings', JSON.stringify(settings));
  alert('通知設定を保存しました');
}

// ログイン履歴の確認
function viewLoginHistory() {
  alert('ログイン履歴機能は今後実装予定です');
}

// アカウント削除の確認
function confirmAccountDeletion() {
  if (confirm('本当にアカウントを削除しますか？\n\nこの操作は取り消せません。すべてのデータが完全に削除されます。')) {
    if (confirm('最終確認：アカウントを削除してもよろしいですか？')) {
      alert('アカウント削除機能は今後実装予定です');
      // 実際の実装では、ここで削除処理を実行
    }
  }
}

// ページ読み込み時に通知設定を復元
(function() {
  const savedSettings = localStorage.getItem('notificationSettings');
  if (savedSettings) {
    const settings = JSON.parse(savedSettings);
    document.getElementById('email-notifications').checked = settings.email ?? true;
    document.getElementById('schedule-notifications').checked = settings.schedule ?? true;
    document.getElementById('report-notifications').checked = settings.report ?? true;
    document.getElementById('announcement-notifications').checked = settings.announcement ?? true;
  }
})();
</script>



    </main>
    <footer class="site-footer">
  <div class="container text-center muted small" style="padding: 16px 0;">
    <p>&copy; 2025 ミセサポ</p>
  </div>
</footer>


    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="/js/firebase-config.js"></script>
    <script src="/js/role_config.js"></script>
    <script src="/js/users.js"></script>
    <script src="/js/auth.js"></script>
    <script src="/js/navigation.js"></script>
    <script src="/modal_manager.js"></script>
    <script src="/app.js"></script>
    <script>
      // ログイン画面では通常ヘッダーを表示
      (function() {
        const path = window.location.pathname || '';
        const isSigninPage = path.includes('/signin.html') || path.includes('/signin');
        
        // ログイン画面では通常ヘッダーを表示、デフォルトヘッダーを非表示
        if (isSigninPage) {
          const defaultHeaderWrapper = document.getElementById('default-header-wrapper');
          const normalHeaderWrapper = document.getElementById('normal-header-wrapper');
          if (defaultHeaderWrapper) {
            defaultHeaderWrapper.style.display = 'none';
          }
          if (normalHeaderWrapper) {
            normalHeaderWrapper.style.display = 'block';
            // ログイン画面では通常ヘッダーを常に表示
            const normalHeader = normalHeaderWrapper.querySelector('.normal-header');
            if (normalHeader) {
              normalHeader.classList.add('visible');
            }
          }
        }
      })();
    </script>
  </body>
  </html>


