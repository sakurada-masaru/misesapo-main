<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <base href="/" />
    <title>マイページ | ミセサポ</title>
    <link rel="icon" type="image/png" href="/images/logo_144x144.png" />
<link rel="shortcut icon" href="/images/logo_144x144.png" />
<link rel="apple-touch-icon" href="/images/logo_144x144.png" />
<link rel="stylesheet" href="/styles.css" />
<link rel="stylesheet" href="/css/header.css" />
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<!-- 
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet" />
-->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
<style>
  body { font-family: 'Noto Sans JP', 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Hiragino Kaku Gothic ProN', Meiryo, sans-serif; }
  /* Brand theme variables (default + variants) */
  body { --primary: #FF679C; --primary-600: #E35687; }
  body.theme-pink { --primary: #FF679C; --primary-600: #E35687; }
  body.theme-blue { --primary: #2563eb; --primary-600: #1d4ed8; }
  body.theme-emerald { --primary: #10b981; --primary-600: #059669; }
  /* Note: :root also defines the same brand color; inline vars ensure early paint */
  </style>

    <style>
      /* Staff signin page: hide all headers */
      body.page-staff-signin #default-header-wrapper,
      body.page-staff-signin #normal-header-wrapper {
        display: none !important;
      }
      
      /* Staff mypage: hide global header and footer */
      body[class*="page-staff-mypage"] #default-header-wrapper,
      body[class*="page-staff-mypage"] #normal-header-wrapper,
      body[class*="page-staff-mypage"] footer {
        display: none !important;
      }
      
      /* Staff mypage: ensure full height layout */
      body[class*="page-staff-mypage"] {
        margin: 0;
        padding: 0;
      }
      
      body[class*="page-staff-mypage"] #main {
        margin: 0;
        padding: 0;
      }
      
      /* Admin pages: hide global header while keeping auth buttons */
      body[class*="page-admin-"] #default-header-wrapper {
        height: 0;
        overflow: visible;
      }
      body[class*="page-admin-"] #default-header-wrapper .site-header {
        background: transparent;
        box-shadow: none;
        padding: 0;
        min-height: 0;
      }
      body[class*="page-admin-"] #default-header-wrapper .inner {
        justify-content: flex-end;
        padding: 0;
      }
      body[class*="page-admin-"] #default-header-wrapper .nav-left,
      body[class*="page-admin-"] #default-header-wrapper .hamburger-btn,
      body[class*="page-admin-"] #default-header-wrapper .mobile-nav,
      body[class*="page-admin-"] #default-header-wrapper .spacer,
      body[class*="page-admin-"] #default-header-wrapper .role-badge {
        display: none !important;
      }
      body[class*="page-admin-"] #default-header-wrapper .nav-right {
        position: fixed;
        top: 16px;
        right: 24px;
        display: inline-flex;
        align-items: center;
        gap: 12px;
        background: #fff;
        border-radius: 999px;
        padding: 6px 18px;
        box-shadow: 0 12px 30px rgba(15,23,42,0.18);
        z-index: 300;
      }
      body[class*="page-admin-"] #default-header-wrapper .nav-right .nav-link {
        font-weight: 600;
      }
      body[class*="page-admin-"] #default-header-wrapper .nav-right .icon-btn {
        width: 36px;
        height: 36px;
        border-radius: 999px;
        border: 1px solid #e5e7eb;
      }
    </style>
  </head>
  <body class="theme-pink page-mypage">
    <div id="default-header-wrapper">
    <a class="skip-link" href="#main">メインコンテンツへスキップ</a>
<header id="header-guest" class="site-header" data-role="guest">
  <div class="inner wide">
    <div class="nav-left">
      <a class="brand brand-logo" href="/index.html" aria-label="ミセサポ ホーム">
        <img src="/images/logo_144x144.png" alt="ミセサポ" />
      </a>
      <nav id="nav-guest" class="nav-left hide-sm" aria-label="Primary">
        <!-- ナビゲーション項目はJavaScriptで動的に生成されます -->
      </nav>
    </div>
    <div class="spacer"></div>
    <nav class="nav-right hide-sm" aria-label="User">
      <span class="role-badge" style="padding: 4px 12px; background: #e5e7eb; color: #6b7280; border-radius: 4px; font-size: 0.875rem; font-weight: 500;">ゲスト</span>
      <a class="nav-link" href="/signin.html">ログイン</a>
      <a class="nav-link primary" href="/signup.html">新規登録</a>
      <button class="icon-btn" aria-label="通知">
        <i class="fas fa-bell"></i>
      </button>
      <button class="icon-btn" aria-label="ログアウト" onclick="window.Auth && window.Auth.logout()" style="display: none;">
        <i class="fas fa-sign-out-alt"></i>
      </button>
    </nav>
    <button class="hamburger-btn show-sm" aria-label="メニュー" aria-expanded="false" id="hamburger-btn">
      <span></span>
      <span></span>
      <span></span>
    </button>
  </div>
  <!-- スマホ版ナビゲーションメニュー -->
  <nav class="mobile-nav show-sm" id="mobile-nav" aria-label="モバイルナビゲーション">
    <div class="mobile-nav-content">
      <nav class="mobile-nav-primary" id="mobile-nav-primary" aria-label="Primary">
        <!-- ナビゲーション項目はJavaScriptで動的に生成されます -->
      </nav>
      <nav class="mobile-nav-user" aria-label="User">
        <span class="role-badge" style="padding: 4px 12px; background: #e5e7eb; color: #6b7280; border-radius: 4px; font-size: 0.875rem; font-weight: 500;">ゲスト</span>
        <a class="mobile-nav-link" href="/signin.html">ログイン</a>
        <a class="mobile-nav-link primary" href="/signup.html">新規登録</a>
      </nav>
    </div>
  </nav>
</header>

    </div>
    <!-- 通常ヘッダー（ログイン画面用） -->
    <div id="normal-header-wrapper" style="display: none;">
    <!-- 通常ヘッダー -->
<header class="normal-header">
    <div class="normal-header-inner">
        <div class="normal-header-logo">
            <a href="/">
                <img id="normal-header-logo-img" src="/images-material/logo_144x144.png" alt="ロゴ" onerror="this.style.display='none'">
            </a>
                </div>
        <nav class="normal-header-nav">
            <a href="/">TOP</a>
            <a href="/service.html">対応可能サービス</a>
            <a href="/lp.html#voice">お客様の声</a>
            <a href="/customers-support-desk.html">カスタマーズサポート</a>
            <a href="/announcements.html">お知らせ</a>
            <a href="/privacy-policy.html">規約＆ポリシー</a>
        </nav>
        <div class="normal-header-actions">
            <a href="/signin.html" class="normal-header-login">ログイン</a>
        </div>
            </div>
</header>


    </div>
    <main id="main">
      


<link rel="stylesheet" href="/assets/css/admin-sidebar.css">
<script src="/assets/js/auth.js"></script>
<script src="/js/client_auth.js"></script>
<script src="/assets/js/admin-sidebar.js"></script>

<!-- サイドバー -->
<aside class="sidebar" id="admin-sidebar">
  <div class="sidebar-header">
    <a href="/mypage.html" class="logo-link">
      <img src="/images/logo_144x144.png" alt="ミセサポ" class="logo-img" />
      <span class="logo-text">ミセサポ</span>
    </a>
  </div>

  <!-- ロール表示 -->
  <div class="sidebar-role">
    <span class="role-badge" id="sidebar-role-badge">顧客</span>
  </div>

  <nav class="sidebar-nav">
    <a href="/mypage.html" class="nav-item" data-page="mypage">
      <i class="fas fa-user-circle"></i>
      <span class="nav-label">マイページ</span>
    </a>
    <a href="/index.html" class="nav-item" data-page="order">
      <i class="fas fa-shopping-cart"></i>
      <span class="nav-label">発注</span>
    </a>
    <a href="/service.html" class="nav-item" data-page="service">
      <i class="fas fa-list"></i>
      <span class="nav-label">サービス一覧</span>
    </a>
    <a href="/cart.html" class="nav-item" data-page="cart">
      <i class="fas fa-shopping-bag"></i>
      <span class="nav-label">カート</span>
    </a>
    <a href="/order/history.html" class="nav-item" data-page="order-history">
      <i class="fas fa-history"></i>
      <span class="nav-label">注文履歴</span>
    </a>
    <a href="/schedule.html" class="nav-item" data-page="schedule">
      <i class="fas fa-calendar-alt"></i>
      <span class="nav-label">スケジュール</span>
    </a>
    <a href="/report.html" class="nav-item" data-page="report">
      <i class="fas fa-file-alt"></i>
      <span class="nav-label">レポート一覧</span>
    </a>
    <div class="nav-divider"></div>
    <a href="/mypage/info.html" class="nav-item" data-page="info">
      <i class="fas fa-building"></i>
      <span class="nav-label">オーナー情報</span>
    </a>
    <a href="/mypage/info.html#stores" class="nav-item" data-page="stores">
      <i class="fas fa-store"></i>
      <span class="nav-label">登録店舗情報</span>
    </a>
    <a href="/mypage/settings.html" class="nav-item" data-page="settings">
      <i class="fas fa-sliders-h"></i>
      <span class="nav-label">アカウント設定</span>
    </a>
    <button class="nav-item nav-item-button" onclick="window.Auth && window.Auth.logout()">
      <i class="fas fa-sign-out-alt"></i>
      <span class="nav-label">ログアウト</span>
    </button>
  </nav>

  <!-- トグルボタン -->
  <button class="sidebar-toggle" id="sidebar-toggle" aria-label="サイドバーを開閉">
    <i class="fas fa-chevron-left"></i>
  </button>
</aside>

<main id="main" class="container mypage main-content">
  <div class="loading" id="loading" style="display: none; text-align: center; padding: 48px; color: #6b7280;">読み込み中...</div>
  <div id="error-message" class="error-message" style="display: none; background: #fee2e2; color: #991b1b; padding: 16px; border-radius: 8px; margin-bottom: 24px; text-align: center;"></div>
  
  <div id="mypage-content">
      <!-- Page Header -->
      <header class="mypage-header">
        <div class="mypage-header-content">
          <div class="mypage-header-left">
            <div class="client-name" id="client-name">-</div>
            <div class="client-name-divider">/</div>
            <div class="person-name" id="person-name">-</div>
          </div>
          <div class="mypage-header-right">
            <a class="btn btn-outline btn-sm" href="/mypage/info.html">オーナー情報</a>
            <a class="btn btn-outline btn-sm" href="/mypage/info.html#stores">登録店舗情報</a>
            <a class="btn btn-outline btn-sm" href="/mypage/settings.html">アカウント設定</a>
            <a class="btn btn-outline btn-sm" href="#">発注履歴</a>
            <a class="btn btn-outline btn-sm" href="/report.html">レポート</a>
          </div>
        </div>
        <hr class="mypage-header-divider" />
      </header>
      <!-- Grid -->
      <div class="mypage-grid stack-on-sm">
        <!-- Main column -->
        <div class="mypage-main">
          <!-- 1. Messages -->
          <section class="section section-order-1">
            <h2 class="section-title">ミセサポからのメッセージ</h2>
            <div class="message-wrapper">
              <div class="message-item">
                <span class="message-tag">お知らせ</span>
                <span class="message-date">2025.09.01</span>
                <span class="message-text">ご登録ありがとうございます。引き続きサービスをご利用ください。</span>
              </div>
            </div>
            <!-- SP版: 下矢印アニメーション -->
            <div class="message-arrow-hint">
              <i class="fas fa-chevron-down"></i>
            </div>
          </section>

          <!-- 2. Submission prompt -->
          <section class="section submission-card section-order-2">
            <div class="submission-head">
              <div class="submission-title">
                <i class="fa-solid fa-circle-info" aria-hidden="true"></i>
                資料提出
              </div>
              <a class="btn btn-primary btn-round btn-sm" href="#">
                資料提出へ <i class="fa-solid fa-chevron-right" aria-hidden="true"></i>
              </a>
            </div>
            <p class="submission-note-strong">提出されていない資料があります。</p>
            <p class="submission-note">資料をご提出いただくことで、より正確なお見積りや以下のようなサポートもスムーズにご案内できます。</p>
            <ul class="submission-list">
              <li>配線交換なども、比較的安価で対応可能に。</li>
              <li>履歴や今後の必要数量の目安がわかるサポート。</li>
              <li>消耗品交換などの対応についてもご相談いただけます。</li>
            </ul>
          </section>

          <!-- 5. Store info -->
          <section class="section section-order-5">
            <h2 class="section-title">店舗情報</h2>
            <div class="card">
              <div class="info-item">
                <span class="info-item-label">店舗情報確認/変更</span>
              </div>
              <div class="info-item">
                <span class="info-item-label">
                  <i class="fa-solid fa-circle-info" aria-hidden="true"></i>
                  提出資料
                </span>
                <span class="info-item-value">提出されていない資料があります。</span>
              </div>
            </div>
          </section>

          <!-- 4. Subscription / regular order -->
          <section class="section section-order-4">
            <h2 class="section-title">定期発注</h2>
            <div class="card">
              <div class="radio-group">
                <label class="radio-label"><input type="radio" name="order-cycle" /><span class="radio-custom"></span><span>毎月</span></label>
                <label class="radio-label"><input type="radio" name="order-cycle" /><span class="radio-custom"></span><span>2ヶ月</span></label>
                <label class="radio-label"><input type="radio" name="order-cycle" checked /><span class="radio-custom"></span><span>3ヶ月</span></label>
                <label class="radio-label"><input type="radio" name="order-cycle" /><span class="radio-custom"></span><span>6ヶ月</span></label>
                <label class="radio-label"><input type="radio" name="order-cycle" /><span class="radio-custom"></span><span>毎年</span></label>
              </div>
            </div>
          </section>
        </div>

        <!-- Sidebar column -->
        <aside class="mypage-side">
          <!-- Calendar (PC only) -->
          <section class="section calendar-section hide-sm">
            <div class="calendar-head">
              <a class="calendar-nav" href="#" aria-label="前へ"><i class="fa-solid fa-chevron-left"></i></a>
              <h2 class="calendar-title">2025 06</h2>
              <a class="calendar-nav" href="#" aria-label="次へ"><i class="fa-solid fa-chevron-right"></i></a>
            </div>
            <div class="card">
              <div class="calendar-grid">
                <div class="calendar-cell calendar-day-name">M</div>
                <div class="calendar-cell calendar-day-name">T</div>
                <div class="calendar-cell calendar-day-name">W</div>
                <div class="calendar-cell calendar-day-name">T</div>
                <div class="calendar-cell calendar-day-name">F</div>
                <div class="calendar-cell calendar-day-name">S</div>
                <div class="calendar-cell calendar-day-name">S</div>

                <!-- prev month -->
                <div class="calendar-cell calendar-date disabled">26</div>
                <div class="calendar-cell calendar-date disabled">27</div>
                <div class="calendar-cell calendar-date disabled">28</div>
                <div class="calendar-cell calendar-date disabled">29</div>
                <div class="calendar-cell calendar-date disabled">30</div>
                <div class="calendar-cell calendar-date disabled">31</div>

                <!-- current month -->
                <div class="calendar-cell calendar-date">1</div>
                <div class="calendar-cell calendar-date">2</div>
                <div class="calendar-cell calendar-date">3</div>
                <div class="calendar-cell calendar-date">4</div>
                <div class="calendar-cell calendar-date has-event event-visit">5</div>
                <div class="calendar-cell calendar-date has-event event-end">6</div>
                <div class="calendar-cell calendar-date">7</div>
                <div class="calendar-cell calendar-date">8</div>
                <div class="calendar-cell calendar-date">9</div>
                <div class="calendar-cell calendar-date">10</div>
                <div class="calendar-cell calendar-date">11</div>
                <div class="calendar-cell calendar-date">12</div>
                <div class="calendar-cell calendar-date">13</div>
                <div class="calendar-cell calendar-date">14</div>
                <div class="calendar-cell calendar-date">15</div>
                <div class="calendar-cell calendar-date">16</div>
                <div class="calendar-cell calendar-date">17</div>
                <div class="calendar-cell calendar-date">18</div>
                <div class="calendar-cell calendar-date">19</div>
                <div class="calendar-cell calendar-date">20</div>
                <div class="calendar-cell calendar-date">21</div>
                <div class="calendar-cell calendar-date">22</div>
                <div class="calendar-cell calendar-date">23</div>
                <div class="calendar-cell calendar-date">24</div>
                <div class="calendar-cell calendar-date">25</div>
                <div class="calendar-cell calendar-date">26</div>
                <div class="calendar-cell calendar-date">27</div>
                <div class="calendar-cell calendar-date">28</div>
                <div class="calendar-cell calendar-date">29</div>
                <div class="calendar-cell calendar-date">30</div>

                <!-- next month -->
                <div class="calendar-cell calendar-date disabled">1</div>
                <div class="calendar-cell calendar-date disabled">2</div>
                <div class="calendar-cell calendar-date disabled">3</div>
                <div class="calendar-cell calendar-date disabled">4</div>
                <div class="calendar-cell calendar-date disabled">5</div>
                <div class="calendar-cell calendar-date disabled">6</div>
              </div>
              <div class="calendar-legend">
                <div class="legend-item"><span class="legend-dot visit"></span>訪問予定日</div>
                <div class="legend-item"><span class="legend-dot end"></span>訪問終了日</div>
              </div>
            </div>
          </section>

          <!-- 3. Schedule overview (SP: order-3, PC: stays in sidebar) -->
          <section class="section section-order-3">
            <h2 class="section-title">清掃予定</h2>
            <div id="schedule-overview">
              <div class="empty-state">予定はありません</div>
            </div>
            <style>
/* schedule overview compact card */
.schedule-card { position:relative; display:flex; align-items:center; gap:8px; padding:10px 12px; border:1px solid #e5e7eb; border-radius:10px; box-shadow:0 2px 4px rgba(0,0,0,.04); background:#fff; width:100%; }
.schedule-lines { display:flex; flex-direction:column; gap:2px; min-width:0; flex:1; }
.schedule-primary { font-weight:800; color:#1f2937; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.schedule-secondary { color:#6b7280; font-size:12px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.schedule-link { color: var(--primary); font-weight:600; font-size:12px; white-space:nowrap; position:absolute; right:12px; bottom:10px; top:auto; transform:none; }
.schedule-see-all { text-align:right; margin-top: 8px; }
#schedule-overview { width:100%; }
@media (max-width: 767.98px) {
  .section-order-3 { width:100%; max-width:100%; padding-left:10px; padding-right:10px; }
  .section-order-3 .section-title { margin-left:0; margin-right:0; }
}
</style>
            
            <script>
(function(){
  const mount = document.getElementById('schedule-overview');
  if (!mount) return;
  const data = {"schedules": [{"id": 1, "date": "2025-06-17", "time_slot": "23:00-07:00", "order_type": "regular", "detail": {"status": "completed", "status_text": "この日の清掃は完了しています。", "date_text": "2025年6月17日(火)", "items": [{"name": "グリストラップ", "notes": ["マニフェスト発行なし", "床置き型"], "quantity": 2, "unit": null}, {"name": "ゴミ回収", "notes": ["不用品/粗大ゴミ"], "quantity": null, "unit": null}, {"name": "トイレ洗浄", "notes": ["分解洗浄あり"], "quantity": 2, "unit": null}, {"name": "床清掃", "notes": ["床ポリッシャー洗浄/キッチン"], "quantity": null, "unit": null}], "report_id": 1, "report_url": "/reports/1.html"}}, {"id": 2, "date": "2025-11-13", "time_slot": "13:00-16:00", "order_type": "spot", "detail": {}}, {"id": 3, "date": "2025-11-20", "time_slot": "17:00-19:00", "order_type": "regular", "detail": {}}]};
  const arr = (data && Array.isArray(data.schedules)) ? data.schedules : [];
  if (!arr.length) return;
  function el(tag, cls, text){ const e=document.createElement(tag); if(cls) e.className=cls; if(text!=null) e.textContent=text; return e; }
  const box = document.createElement('div');
  box.className = 'stack';
  arr.forEach((it)=>{
    const card = el('div','schedule-card');
    const lines = el('div','schedule-lines');
    const dateText = (it.detail && it.detail.date_text) ? it.detail.date_text : (it.date || '');
    const primary = el('div','schedule-primary', `${dateText} >> ${it.time_slot || ''}`);
    const typeMap = { regular: '定期発注', spot: 'スポット発注' };
    const secondary = el('div','schedule-secondary', typeMap[it.order_type] || '');
    lines.appendChild(primary);
    lines.appendChild(secondary);
    const a = el('a','schedule-link','詳細へ  >');
    a.href = (it.detail && it.detail.report_url) ? it.detail.report_url : '#';
    card.appendChild(lines);
    card.appendChild(a);
    box.appendChild(card);
  });
  if (arr.length >= 3) {
    const more = el('div','schedule-see-all');
    const a = el('a','btn btn-primary btn-round btn-sm','すべて見る');
    a.href = '/report.html';
    more.appendChild(a);
    box.appendChild(more);
  }
  mount.innerHTML='';
  mount.appendChild(box);
})();
</script>
          </section>

        </aside>
      </div>
  </div>
</main>

<script>
  const API_BASE = 'https://51bhoxkbxd.execute-api.ap-northeast-1.amazonaws.com/prod';
  let currentClient = null;

  // 現在のクライアント情報を取得
  async function loadCurrentClient() {
    const loadingEl = document.getElementById('loading');
    const contentEl = document.getElementById('mypage-content');
    const errorEl = document.getElementById('error-message');

    try {
      loadingEl.style.display = 'block';
      contentEl.style.display = 'none';
      errorEl.style.display = 'none';

      // 認証情報を確認
      const authData = window.Auth?.getAuthData?.();
      if (!authData || !authData.user) {
        // 未ログインの場合はログインページにリダイレクト
        // ベースパスを考慮
        const base = document.querySelector('base');
        const basePath = base ? (base.getAttribute('href') || '/') : '/';
        const signinPath = basePath === '/' ? '/signin.html' : basePath.replace(/\/$/, '') + '/signin.html';
        window.location.href = signinPath;
        return;
      }

      const userId = authData.user.id; // DynamoDBのID
      const firebaseUid = authData.user.firebase_uid;

      // APIからクライアント情報を取得
      try {
        // まずIDで取得を試みる
        if (userId) {
          try {
            const response = await fetch(`${API_BASE}/clients/${userId}`);
            if (response && response.ok) {
              currentClient = await response.json();
            }
          } catch (fetchError) {
            console.error('Error fetching client by ID:', fetchError);
          }
        }
        
        // IDで見つからない場合、Firebase UIDで検索
        if (!currentClient && firebaseUid) {
          try {
            const response = await fetch(`${API_BASE}/clients?firebase_uid=${encodeURIComponent(firebaseUid)}`);
            if (response && response.ok) {
              const clients = await response.json();
              const clientsArray = Array.isArray(clients) ? clients : (clients.items || clients.clients || []);
              if (clientsArray.length > 0) {
                currentClient = clientsArray[0];
              }
            }
          } catch (fetchError) {
            console.error('Error fetching client by Firebase UID:', fetchError);
          }
        }
      } catch (error) {
        console.error('Error fetching client info:', error);
        throw error; // エラーを再スローして、外側のcatchで処理
      }

      if (!currentClient || !currentClient.id) {
        throw new Error('クライアント情報を取得できませんでした。ログインしてください。');
      }

      // クライアント情報を表示
      renderClient(currentClient);

      loadingEl.style.display = 'none';
      contentEl.style.display = 'block';
    } catch (error) {
      console.error('Error loading client:', error);
      loadingEl.style.display = 'none';
      errorEl.style.display = 'block';
      errorEl.textContent = error.message || 'クライアント情報の読み込みに失敗しました。';
      
      // 認証エラーの場合はログインページにリダイレクト
      if (error.message.includes('ログイン') || error.message.includes('認証')) {
        setTimeout(() => {
          const base = document.querySelector('base');
          const basePath = base ? (base.getAttribute('href') || '/') : '/';
          const signinPath = basePath === '/' ? '/signin.html' : basePath.replace(/\/$/, '') + '/signin.html';
          window.location.href = signinPath;
        }, 2000);
      }
    }
  }

  // クライアント情報を表示
  function renderClient(client) {
    // 会社名を表示
    const companyName = client.company_name || '会社名未設定';
    document.getElementById('client-name').textContent = companyName;

    // 担当者名を表示（ない場合は「ご担当者様」）
    const personName = client.name || 'ご担当者様';
    document.getElementById('person-name').textContent = `オーナー：${personName}`;
  }

  // ページ読み込み時にクライアント情報を取得
  document.addEventListener('DOMContentLoaded', () => {
    loadCurrentClient();
  });
</script>

    </main>
    <footer class="site-footer">
  <div class="container text-center muted small" style="padding: 16px 0;">
    <p>&copy; 2025 ミセサポ</p>
  </div>
</footer>


    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="/js/firebase-config.js"></script>
    <script src="/js/role_config.js"></script>
    <script src="/js/users.js"></script>
    <script src="/js/auth.js"></script>
    <script src="/js/navigation.js"></script>
    <script src="/modal_manager.js"></script>
    <script src="/app.js"></script>
    <script>
      // ログイン画面では通常ヘッダーを表示
      (function() {
        const path = window.location.pathname || '';
        const isSigninPage = path.includes('/signin.html') || path.includes('/signin');
        
        // ログイン画面では通常ヘッダーを表示、デフォルトヘッダーを非表示
        if (isSigninPage) {
          const defaultHeaderWrapper = document.getElementById('default-header-wrapper');
          const normalHeaderWrapper = document.getElementById('normal-header-wrapper');
          if (defaultHeaderWrapper) {
            defaultHeaderWrapper.style.display = 'none';
          }
          if (normalHeaderWrapper) {
            normalHeaderWrapper.style.display = 'block';
            // ログイン画面では通常ヘッダーを常に表示
            const normalHeader = normalHeaderWrapper.querySelector('.normal-header');
            if (normalHeader) {
              normalHeader.classList.add('visible');
            }
          }
        }
      })();
    </script>
  </body>
  </html>


