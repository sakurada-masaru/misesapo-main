<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <base href="/" />
    <title>パートナー企業一覧 | ミセサポ</title>
    <link rel="icon" type="image/png" href="/images/logo_144x144.png" />
<link rel="shortcut icon" href="/images/logo_144x144.png" />
<link rel="apple-touch-icon" href="/images/logo_144x144.png" />
<link rel="stylesheet" href="/styles.css" />
<link rel="stylesheet" href="/css/header.css" />
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<!-- 
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet" />
-->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
<style>
  body { font-family: 'Noto Sans JP', 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Hiragino Kaku Gothic ProN', Meiryo, sans-serif; }
  /* Brand theme variables (default + variants) */
  body { --primary: #FF679C; --primary-600: #E35687; }
  body.theme-pink { --primary: #FF679C; --primary-600: #E35687; }
  body.theme-blue { --primary: #2563eb; --primary-600: #1d4ed8; }
  body.theme-emerald { --primary: #10b981; --primary-600: #059669; }
  /* Note: :root also defines the same brand color; inline vars ensure early paint */
  </style>

    <link rel="stylesheet" href="/css/admin-sidebar.css" />
    <!-- DataUtils スクリプト（schedulesページで使用） -->
    <script src="/js/data_utils.js"></script>
    <style>
      /* 顧客ページでヘッダーを非表示 */
      body[class*="admin-stores"] #default-header-wrapper,
      body[class*="admin-stores"] #normal-header-wrapper,
      body[class*="admin-stores"] header.site-header,
      body[class*="admin-stores"] .nav-right,
      body[class*="admin-stores"] nav[aria-label="User"],
      body[class*="admin-stores"] nav.nav-right {
        display: none !important;
        visibility: hidden !important;
        opacity: 0 !important;
        height: 0 !important;
        width: 0 !important;
        overflow: hidden !important;
      }
    </style>
    <script>
      // 顧客ページでnav-right要素を完全に削除
      (function() {
        function removeNavRight() {
          // document.bodyが存在しない場合はスキップ
          if (!document.body) return;
          
          // 顧客ページかどうかを確認
          const isCustomersPage = document.body.classList && document.body.classList.contains('admin-stores-v2') ||
                                  document.querySelector('main.admin-stores-v2') ||
                                  window.location.pathname.includes('/admin/customers');
          
          if (!isCustomersPage) return;
          
          // nav-right要素をすべて削除
          const navRightElements = document.querySelectorAll('nav.nav-right, nav[aria-label="User"]');
          navRightElements.forEach(el => {
            el.remove();
          });
          
          // 親要素ごと削除する場合も考慮
          const headerElements = document.querySelectorAll('header.site-header, #default-header-wrapper');
          headerElements.forEach(header => {
            if (!header) return; // nullチェック
            const navRight = header.querySelector('nav.nav-right, nav[aria-label="User"]');
            if (navRight) {
              navRight.remove();
            }
          });
        }
        
        // 即座に実行
        removeNavRight();
        
        // DOMContentLoaded時に実行
        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', removeNavRight);
        } else {
          removeNavRight();
        }
        
        // 動的に追加される可能性があるため、複数回実行
        setTimeout(removeNavRight, 50);
        setTimeout(removeNavRight, 100);
        setTimeout(removeNavRight, 200);
        setTimeout(removeNavRight, 500);
        setTimeout(removeNavRight, 1000);
        
        // MutationObserverで動的に追加される要素も監視
        const observer = new MutationObserver(function(mutations) {
          removeNavRight();
        });
        
        // body要素の変更を監視
        if (document.body) {
          observer.observe(document.body, {
            childList: true,
            subtree: true
          });
        } else {
          document.addEventListener('DOMContentLoaded', function() {
            observer.observe(document.body, {
              childList: true,
              subtree: true
            });
          });
        }
      })();
    </script>
  </head>
  <body class="theme-pink page-admin-partners">
    <a class="skip-link" href="#main">メインコンテンツへスキップ</a>
    




<style>
  #default-header-wrapper,
  #normal-header-wrapper {
    display: none !important;
  }
</style>

<main id="main" class="admin-partners-v2">
  <!-- モバイルメニューボタン -->
<button class="mobile-menu-button" id="mobile-menu-button" aria-label="メニューを開く">
  <i class="fas fa-bars"></i>
</button>

<!-- サイドバーオーバーレイ -->
<div class="sidebar-overlay" id="sidebar-overlay"></div>

<!-- サイドバー -->
<aside class="sidebar" id="admin-sidebar">
  <div class="sidebar-header">
    <a href="/admin/dashboard" class="logo-link">
      <img src="/images/logo_144x144.png" alt="ミセサポ" class="logo-img" />
      <span class="logo-text">ミセサポ</span>
    </a>
  </div>

  <!-- ロール表示 -->
  <div class="sidebar-role">
    <span class="role-badge" id="sidebar-role-badge">管理者</span>
  </div>

  <nav class="sidebar-nav">
    <!-- マイページ（目立たせる） -->
    <a href="/staff/mypage" class="nav-item nav-item-mypage" data-page="mypage" id="sidebar-mypage-link">
      <i class="fas fa-user-circle"></i>
      <span class="nav-label">マイページ</span>
    </a>
    <div class="nav-divider"></div>
    <!-- 管理メニュー -->
    <a href="/admin/dashboard" class="nav-item" data-page="dashboard">
      <i class="fas fa-history"></i>
      <span class="nav-label">アクティビティ</span>
    </a>
    <a href="/admin/schedules/" class="nav-item" data-page="schedules">
      <i class="fas fa-calendar-alt"></i>
      <span class="nav-label">スケジュール</span>
    </a>
    <a href="/admin/customers/" class="nav-item" data-page="customers">
      <i class="fas fa-store"></i>
      <span class="nav-label">顧客管理</span>
    </a>
    <a href="/admin/reports/" class="nav-item" data-page="reports">
      <i class="fas fa-file-alt"></i>
      <span class="nav-label">レポート</span>
    </a>
    <a href="/admin/estimates/" class="nav-item" data-page="estimates">
      <i class="fas fa-file-invoice-dollar"></i>
      <span class="nav-label">見積もり</span>
    </a>
    <a href="/admin/orders" class="nav-item" data-page="orders">
      <i class="fas fa-shopping-cart"></i>
      <span class="nav-label">発注管理</span>
    </a>
    <a href="/admin/partners" class="nav-item" data-page="partners">
      <i class="fas fa-handshake"></i>
      <span class="nav-label">パートナー企業</span>
    </a>
    <a href="/admin/users/" class="nav-item" data-page="users">
      <i class="fas fa-users"></i>
      <span class="nav-label">ユーザー管理</span>
    </a>
    <a href="/admin/attendance/errors" class="nav-item" data-page="attendance-errors">
      <i class="fas fa-exclamation-triangle"></i>
      <span class="nav-label">勤怠管理</span>
    </a>
    <a href="/admin/services/" class="nav-item" data-page="services">
      <i class="fas fa-cog"></i>
      <span class="nav-label">サービス管理</span>
    </a>
    <a href="/admin/analytics/" class="nav-item" data-page="analytics">
      <i class="fas fa-chart-bar"></i>
      <span class="nav-label">分析</span>
    </a>
    <a href="/admin/images/" class="nav-item" data-page="images">
      <i class="fas fa-images"></i>
      <span class="nav-label">メディア</span>
    </a>
    <a href="/admin/zaiko" class="nav-item" data-page="zaiko">
      <i class="fas fa-boxes"></i>
      <span class="nav-label">在庫管理</span>
    </a>
    <a href="/admin/announcements" class="nav-item" data-page="announcements">
      <i class="fas fa-bullhorn"></i>
      <span class="nav-label">業務連絡</span>
    </a>
    <div class="nav-divider"></div>
    <a href="/wiki" class="nav-item" data-page="wiki">
      <i class="fas fa-book-open"></i>
      <span class="nav-label">WIKI</span>
    </a>
    <a href="/admin/sitemap" class="nav-item" data-page="sitemap">
      <i class="fas fa-sitemap"></i>
      <span class="nav-label">サイトマップ</span>
    </a>
    <button class="nav-item nav-item-button" onclick="staffLogout()">
      <i class="fas fa-sign-out-alt"></i>
      <span class="nav-label">ログアウト</span>
    </button>
  </nav>

  <!-- トグルボタン -->
  <button class="sidebar-toggle" id="sidebar-toggle" aria-label="サイドバーを開閉">
    <i class="fas fa-chevron-left"></i>
  </button>
</aside>

<script>
  // 従業員用ログアウト関数（グローバル）
  function staffLogout() {
    // Cognitoからログアウト
    if (window.CognitoAuth && typeof window.CognitoAuth.logout === 'function') {
      window.CognitoAuth.logout();
    }
    // ローカルストレージをクリア
    localStorage.removeItem('cognito_user');
    localStorage.removeItem('misesapo_auth');
    localStorage.removeItem('cognito_id_token');
    localStorage.removeItem('cognito_access_token');
    localStorage.removeItem('cognito_refresh_token');
    // 従業員ログイン画面にリダイレクト
    window.location.href = '/staff/signin.html';
  }
</script>


  <!-- メインコンテンツ -->
  <div class="main-content">
    <!-- トップバー -->
    <header class="topbar">
      <div class="topbar-left">
        <h1>パートナー企業一覧</h1>
      </div>
      <div class="topbar-right">
        <a href="/admin/partners/new" class="btn btn-primary">
          <i class="fas fa-plus"></i> 新規パートナー企業登録
        </a>
      </div>
    </header>

    <div class="content-wrapper">
      <!-- フィルター -->
      <div class="filter-section">
        <div class="filter-row">
          <div class="filter-group">
            <label>検索</label>
            <div class="search-box">
              <i class="fas fa-search"></i>
              <input type="text" placeholder="企業名、担当者名で検索..." class="search-input" id="partner-search" />
            </div>
          </div>
          <div class="filter-group">
            <label>カテゴリ</label>
            <select class="filter-select" id="category-filter">
              <option value="">すべてのカテゴリ</option>
              <option value="cleaning">清掃業</option>
              <option value="equipment">設備管理</option>
              <option value="supply">資材供給</option>
              <option value="other">その他</option>
            </select>
          </div>
          <div class="filter-group">
            <label>ステータス</label>
            <select class="filter-select" id="status-filter">
              <option value="">すべてのステータス</option>
              <option value="active">有効</option>
              <option value="inactive">無効</option>
            </select>
          </div>
        </div>
      </div>

      <!-- テーブル -->
      <div class="table-container">
        <table class="partners-table">
          <thead>
            <tr>
              <th>ID</th>
              <th>企業名</th>
              <th>担当者名</th>
              <th>メールアドレス</th>
              <th>電話番号</th>
              <th>カテゴリ</th>
              <th>ステータス</th>
              <th>登録日</th>
              <th>操作</th>
            </tr>
          </thead>
          <tbody id="partners-tbody">
            <!-- Partners will be rendered by JavaScript -->
          </tbody>
        </table>
      </div>
    </div>
  </div>
</main>

<style>
  :root {
    --sidebar-width: 240px;
    --sidebar-width-collapsed: 64px;
    --topbar-height: 64px;
      --primary: #3b82f6;
  }

  .admin-partners-v2 {
    display: flex;
    min-height: 100vh;
    background: #f9fafb;
  }

  .logo-link {
    display: flex;
    align-items: center;
    gap: 12px;
    text-decoration: none;
    color: inherit;
  }
  .logo-img {
    width: 32px;
    height: 32px;
    object-fit: contain;
    flex-shrink: 0;
  }
  .logo-text {
    font-size: 1.25rem;
    font-weight: 700;
    color: #111827;
    white-space: nowrap;
    transition: opacity 0.3s ease;
  }
        padding: 6px 16px;
    border-bottom: 1px solid #e5e7eb;
    transition: opacity 0.3s ease;
  }
        padding: 3px 10px;
    background: #e0e7ff;
    color: #3730a3;
    border-radius: 4px;
    font-size: 0.875rem;
    font-weight: 500;
    white-space: nowrap;
  }
        gap: 1px;
    overflow-y: auto;
  }
        padding: 8px 10px;
    color: #6b7280;
    text-decoration: none;
    border-radius: 8px;
    transition: all 0.2s;
    white-space: nowrap;
  }

        width: 18px;
    text-align: center;
    flex-shrink: 0;
  }
  .nav-label {
    transition: opacity 0.3s ease;
    white-space: nowrap;
      font-size: 0.8125rem;
  }

  .sidebar.collapsed 
  .nav-divider {
    height: 1px;
    background: #e5e7eb;
    margin: 8px 12px;
  }

  /* メインコンテンツ */
  .main-content {
      margin-left: var(--sidebar-width);
      padding: 24px;
      background: #f9fafb;
    
      transition: margin-left 0.3s ease;}
  .sidebar.collapsed ~ .main-content {
      margin-left: var(--sidebar-width);
      padding: 24px;
      background: #f9fafb;
    
      transition: margin-left 0.3s ease;}

  /* トップバー */
  .topbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 24px;
  }
  .topbar-left h1 {
    font-size: 1.75rem;
    font-weight: 700;
    color: #111827;
    margin: 0;
  }
  .topbar-right {
    display: flex;
    align-items: center;
    gap: 16px;
  }

  .content-wrapper {
    /* コンテンツラッパー */
  }

  /* フィルター */
  .filter-section {
    background: #fff;
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 24px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.05);
  }
  .filter-row {
    display: flex;
    gap: 16px;
    flex-wrap: wrap;
    align-items: flex-end;
  }
  .filter-group {
    display: flex;
    flex-direction: column;
    gap: 6px;
  }
  .filter-group label {
    font-size: 0.75rem;
    font-weight: 600;
    color: #6b7280;
  }
  .filter-select {
    padding: 8px 12px;
    border: 1px solid #e5e7eb;
    border-radius: 6px;
    font-size: 0.9rem;
    background: #fff;
    min-width: 150px;
    cursor: pointer;
  }
  .filter-select:focus {
    outline: none;
    border-color: var(--primary);
  }
  .search-box {
    position: relative;
    display: flex;
    align-items: center;
    min-width: 300px;
  }
  .search-box i {
    position: absolute;
    left: 12px;
    color: #6b7280;
  }
  .search-input {
    width: 100%;
    padding: 8px 12px 8px 40px;
    border: 1px solid #e5e7eb;
    border-radius: 6px;
    font-size: 0.9rem;
  }
  .search-input:focus {
    outline: none;
    border-color: var(--primary);
  }

  /* テーブル */
  .table-container {
    background: #fff;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    overflow-x: auto;
  }
  .partners-table {
    width: 100%;
    border-collapse: collapse;
  }
  .partners-table thead {
    background: #f9fafb;
    border-bottom: 2px solid #e5e7eb;
  }
  .partners-table th {
    padding: 12px 16px;
    text-align: left;
    font-size: 0.875rem;
    font-weight: 600;
    color: #374151;
    white-space: nowrap;
  }
  .partners-table td {
    padding: 12px 16px;
    border-bottom: 1px solid #f3f4f6;
    font-size: 0.875rem;
    color: #111827;
  }
  .partners-table tbody tr:hover {
    background: #f9fafb;
  }
  .category-badge {
    display: inline-block;
    padding: 4px 10px;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: 600;
    background: #e0e7ff;
    color: #3730a3;
  }
  .status-badge {
    display: inline-block;
    padding: 4px 10px;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: 600;
  }
  .status-badge.status-active {
    background: #d1fae5;
    color: #065f46;
  }
  .status-badge.status-inactive {
    background: #fee2e2;
    color: #991b1b;
  }
  .btn-icon {
    padding: 6px 8px;
    border: 1px solid #e5e7eb;
    border-radius: 4px;
    background: #fff;
    color: #6b7280;
    cursor: pointer;
    transition: all 0.2s;
    margin-right: 4px;
  }
  .btn-icon:hover {
    border-color: var(--primary);
    color: var(--primary);
  }
  .btn-icon i {
    font-size: 0.875rem;
  }

  /* ボタン */
  .btn {
    padding: 10px 20px;
    border-radius: 8px;
    font-size: 0.9rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    border: none;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    text-decoration: none;
  }
  .btn-primary {
    background: var(--primary);
    color: #fff;
  }
  .btn-primary:hover {
    opacity: 0.9;
  }

  /* レスポンシブ */
  @media (max-width: 768px) {
    
    .main-content {
      margin-left: var(--sidebar-width);
      padding: 24px;
      background: #f9fafb;
    
      transition: margin-left 0.3s ease;}
    .filter-row {
      flex-direction: column;
    }
    .filter-group {
      width: 100%;
    }
    .search-box {
      min-width: 100%;
    }
    .table-container {
      overflow-x: auto;
    }
  }
</style>

<script type="application/json" id="partners-data">
  {"partners": [{"id": "partner_001", "company_name": "株式会社グリエコ", "contact_person": "藤⽥ 信春（長谷川海）", "location": "東京都中央区日本橋1-13-1 日鉄日本橋ビル3階", "business_content": "グリストラップの石鹸化、高圧洗浄", "email": "", "phone": "", "url": "", "category": "other", "status": "active", "registered_at": "2025-01-01"}, {"id": "partner_002", "company_name": "ヒロセクオリティーズ株式会社", "contact_person": "廣瀬社長", "location": "東京都荒川区東日暮里5丁目40番9号202", "business_content": "床清掃、店舗、ビルメンテ", "email": "", "phone": "", "url": "", "category": "cleaning", "status": "active", "registered_at": "2025-01-01"}, {"id": "partner_003", "company_name": "株式会社セントラルテクノ（アイドマ）", "contact_person": "宇山社長", "location": "", "business_content": "ビルメンテの元請から仕事受けている", "email": "", "phone": "", "url": "", "category": "cleaning", "status": "active", "registered_at": "2025-01-01"}, {"id": "partner_004", "company_name": "LiveCo（これマネ）", "contact_person": "佐々翔太郎社長(倉成好太)", "location": "", "business_content": "外食人材", "email": "", "phone": "", "url": "", "category": "other", "status": "active", "registered_at": "2025-01-01"}, {"id": "partner_005", "company_name": "株式会社FELICE(これマネ)", "contact_person": "幸谷社長", "location": "", "business_content": "飲食店の運営管理", "email": "", "phone": "", "url": "", "category": "other", "status": "active", "registered_at": "2025-01-01"}, {"id": "partner_006", "company_name": "グルメ大学", "contact_person": "飯竹社長", "location": "", "business_content": "飲食店のSNS動画編集、マーケティング", "email": "", "phone": "", "url": "", "category": "other", "status": "active", "registered_at": "2025-01-01"}, {"id": "partner_007", "company_name": "Bee（OasisJapan）", "contact_person": "齋藤宗一郎", "location": "", "business_content": "インフルエンサーマッチング。大塚PICROSS紹介できる", "email": "", "phone": "", "url": "", "category": "other", "status": "active", "registered_at": "2025-01-01"}, {"id": "partner_008", "company_name": "バイオキューテック株式会社", "contact_person": "稲村サチコ", "location": "", "business_content": "ビールの清掃商材を月一で販売している 販売バック：1000円 清掃バック：1000円", "email": "", "phone": "", "url": "", "category": "cleaning", "status": "active", "registered_at": "2025-01-01"}, {"id": "partner_009", "company_name": "コンサレッジ株式会社", "contact_person": "太田 耕一郎", "location": "", "business_content": "創業融資の飲食店の開業の時にパッケージで作成したい。", "email": "", "phone": "", "url": "", "category": "other", "status": "active", "registered_at": "2025-01-01"}, {"id": "partner_010", "company_name": "ヒトイル株式会社", "contact_person": "河口正己", "location": "", "business_content": "WAGYU YAKINIKU beef by KOH 広尾株式会社ライブフュージョンホールディングスあたり繋ぐ 年間サポートする立ち会い不要https://ken-suke.jp/service/parking/元々web会社で短期駐車場手配から始めたyoutubeで動画でまとめる（ベース喋り）", "email": "", "phone": "", "url": "https://ken-suke.jp/service/parking/元々web会社で短期駐車場手配から始めたyoutubeで動画でまとめる（ベース喋り）", "category": "other", "status": "active", "registered_at": "2025-01-01"}, {"id": "partner_011", "company_name": "FLARO", "contact_person": "阿部修平", "location": "", "business_content": "多店舗飲食店を点数評価する。清掃の点数も入れてあげると、汚いところに清掃にお伺いする。", "email": "", "phone": "", "url": "", "category": "cleaning", "status": "active", "registered_at": "2025-01-01"}, {"id": "partner_012", "company_name": "おそうじクルー", "contact_person": "岩松慎弥", "location": "", "business_content": "飲食店清掃、在室清掃、無室清掃", "email": "", "phone": "", "url": "", "category": "cleaning", "status": "active", "registered_at": "2025-01-01"}, {"id": "partner_013", "company_name": "株式会社Mulbelea", "contact_person": "桑原政之", "location": "", "business_content": "内装工事（パートナー会社に外注してる）", "email": "", "phone": "", "url": "", "category": "other", "status": "active", "registered_at": "2025-01-01"}, {"id": "partner_014", "company_name": "ミセツク", "contact_person": "牧野歩", "location": "", "business_content": "コールセンターに掃除がついてるサービス 加盟店からいくらかもらってミセサポがコールセンターやる 自分で清掃やっているから、自分が調べないから情報が入らない", "email": "", "phone": "", "url": "", "category": "cleaning", "status": "active", "registered_at": "2025-01-01"}, {"id": "partner_015", "company_name": "株式会社球掃", "contact_person": "柴田明", "location": "", "business_content": "清掃顧問", "email": "", "phone": "", "url": "", "category": "cleaning", "status": "active", "registered_at": "2025-01-01"}, {"id": "partner_016", "company_name": "東和興業㈱", "contact_person": "高橋正史", "location": "", "business_content": "配管、高圧洗浄、水道管 30,000~60,000円", "email": "", "phone": "", "url": "", "category": "equipment", "status": "active", "registered_at": "2025-01-01"}, {"id": "partner_017", "company_name": "セイイング", "contact_person": "佐藤正行", "location": "", "business_content": "調査20,000円　ブレーカー交換3~5万メッセンジャーで連絡", "email": "", "phone": "", "url": "", "category": "equipment", "status": "active", "registered_at": "2025-01-01"}, {"id": "partner_018", "company_name": "不二電興社", "contact_person": "入江", "location": "", "business_content": "", "email": "", "phone": "", "url": "", "category": "other", "status": "active", "registered_at": "2025-01-01"}, {"id": "partner_019", "company_name": "管清工業", "contact_person": "営業：増田", "location": "", "business_content": "排水、つまり解消、排水補修", "email": "", "phone": "", "url": "", "category": "other", "status": "active", "registered_at": "2025-01-01"}, {"id": "partner_020", "company_name": "株式会社塗元", "contact_person": "水野浩明", "location": "", "business_content": "不動産、建築、リフォーム、塗装 BNIでは塗装をメイン、北陸メイン 東京もできなくはない。", "email": "", "phone": "", "url": "", "category": "other", "status": "active", "registered_at": "2025-01-01"}, {"id": "partner_021", "company_name": "株式会社林善", "contact_person": "井村 祥久", "location": "", "business_content": "配管、グリストラップ、屎尿処理、産廃処理", "email": "", "phone": "", "url": "", "category": "equipment", "status": "active", "registered_at": "2025-01-01"}, {"id": "partner_022", "company_name": "有限会社京浜クリーンメンテナンス", "contact_person": "初見大介", "location": "", "business_content": "店舗清掃、ビル清掃全般、２代目で30年以上清掃業界で色々試している。神奈川の清掃会社", "email": "", "phone": "", "url": "", "category": "cleaning", "status": "active", "registered_at": "2025-01-01"}, {"id": "partner_023", "company_name": "sakseed", "contact_person": "川田真世", "location": "", "business_content": "総合駆除、内装、外装、店舗清掃全般", "email": "", "phone": "", "url": "", "category": "cleaning", "status": "active", "registered_at": "2025-01-01"}, {"id": "partner_024", "company_name": "有限会社東都美装", "contact_person": "大島一重", "location": "", "business_content": "ハウスクリーニング、店舗清掃、体に優しい薬品販売60歳で還暦だからそろそろ引退したい。お掃除業界を変えたい。和の森という会（循環型クリーニング）、ハウスクリーニングの創世記からやっている人BNIの林さんも紹介いただく03-5741-1933", "email": "", "phone": "03-5741-1933", "url": "", "category": "cleaning", "status": "active", "registered_at": "2025-01-01"}, {"id": "partner_025", "company_name": "株式会社球掃", "contact_person": "柴田明", "location": "", "business_content": "清掃全般について強い090-9103-4525", "email": "", "phone": "090-9103-4525", "url": "", "category": "cleaning", "status": "active", "registered_at": "2025-01-01"}, {"id": "partner_026", "company_name": "株式会社球掃", "contact_person": "清水寿一", "location": "", "business_content": "清掃全般について強い090-9842-2971", "email": "", "phone": "090-9842-2971", "url": "", "category": "cleaning", "status": "active", "registered_at": "2025-01-01"}, {"id": "partner_027", "company_name": "株式会社快援隊", "contact_person": "林一雄", "location": "", "business_content": "清掃全般について強い0800-919-9199", "email": "", "phone": "0800-919-9199", "url": "", "category": "cleaning", "status": "active", "registered_at": "2025-01-01"}, {"id": "partner_028", "company_name": "三陽美装", "contact_person": "林眞基", "location": "", "business_content": "大阪ハウスクリーニング、商業施設、年少規模高め090-8122-6754", "email": "", "phone": "090-8122-6754", "url": "", "category": "cleaning", "status": "active", "registered_at": "2025-01-01"}, {"id": "partner_029", "company_name": "株式会社ONEHEART", "contact_person": "中谷社長", "location": "", "business_content": "関西の会社,専務が東京に在住、関東の人脈も関西に引けを取らずという感じ。建築がメイン、補助金などもやる、施工ができる工務店、建築会社があれば、現場が回る。建築士が必要なのは基礎からになる。", "email": "", "phone": "", "url": "", "category": "other", "status": "active", "registered_at": "2025-01-01"}, {"id": "partner_030", "company_name": "管清工業株式会社", "contact_person": "排水事業部 営業課 増田 雄太", "location": "", "business_content": "家庭のトイレ詰まり・排水管トラブル対応、貯水槽の清掃、防臭・防虫対策、排水施設の調査・清掃・補修などの排水関連メンテナンスサービス070-4110-6407", "email": "", "phone": "070-4110-6407", "url": "", "category": "cleaning", "status": "active", "registered_at": "2025-01-01"}, {"id": "partner_031", "company_name": "ハンディマン", "contact_person": "塚本大輔", "location": "", "business_content": "クロス貼り 便利屋", "email": "", "phone": "", "url": "", "category": "other", "status": "active", "registered_at": "2025-01-01"}, {"id": "partner_032", "company_name": "株式会社ネセールプラン", "contact_person": "小林一馬", "location": "", "business_content": "床張りnecessaireplan@yahoo.co.jp", "email": "", "phone": "", "url": "", "category": "other", "status": "active", "registered_at": "2025-01-01"}], "total": 32}
</script>

<script>
  // パートナー企業データの読み込みと表示
  (function() {
    const partnersDataEl = document.getElementById('partners-data');
    const tbody = document.getElementById('partners-tbody');
    const searchInput = document.getElementById('partner-search');
    const categoryFilter = document.getElementById('category-filter');
    const statusFilter = document.getElementById('status-filter');
    
    if (!partnersDataEl || !tbody) return;
    
    const partnersData = JSON.parse(partnersDataEl.textContent);
    const partners = partnersData.partners || [];
    
    // カテゴリ名のマッピング
    const categoryMap = {
      'cleaning': '清掃業',
      'equipment': '設備管理',
      'supply': '資材供給',
      'other': 'その他'
    };
    
    // パートナー企業をレンダリング
    function renderPartners(partnersToRender) {
      tbody.innerHTML = partnersToRender.map((partner, index) => {
        const categoryName = categoryMap[partner.category] || 'その他';
        const statusName = partner.status === 'active' ? '有効' : '無効';
        const statusClass = partner.status === 'active' ? 'status-active' : 'status-inactive';
        
        return `
          <tr data-id="${partner.id}" data-category="${partner.category}" data-status="${partner.status}">
            <td>${index + 1}</td>
            <td>${partner.company_name || ''}</td>
            <td>${partner.contact_person || ''}</td>
            <td>${partner.email || '-'}</td>
            <td>${partner.phone || '-'}</td>
            <td><span class="category-badge">${categoryName}</span></td>
            <td><span class="status-badge ${statusClass}">${statusName}</span></td>
            <td>${partner.registered_at || ''}</td>
            <td>
              <button class="btn-icon" title="編集" onclick="editPartner('${partner.id}')">
                <i class="fas fa-edit"></i>
              </button>
              <button class="btn-icon" title="削除" onclick="deletePartner('${partner.id}')">
                <i class="fas fa-trash"></i>
              </button>
            </td>
          </tr>
        `;
      }).join('');
    }
    
    // 初期表示
    renderPartners(partners);
    
    // 検索・フィルター機能
    function applyFilters() {
      const searchValue = searchInput ? searchInput.value.toLowerCase().trim() : '';
      const categoryValue = categoryFilter ? categoryFilter.value : '';
      const statusValue = statusFilter ? statusFilter.value : '';
      
      const filtered = partners.filter(partner => {
        // 検索フィルター
        if (searchValue) {
          const searchText = (
            (partner.company_name || '') +
            (partner.contact_person || '') +
            (partner.email || '') +
            (partner.phone || '')
          ).toLowerCase();
          if (!searchText.includes(searchValue)) {
            return false;
          }
        }
        
        // カテゴリフィルター
        if (categoryValue && partner.category !== categoryValue) {
          return false;
        }
        
        // ステータスフィルター
        if (statusValue && partner.status !== statusValue) {
          return false;
        }
        
        return true;
      });
      
      renderPartners(filtered);
    }
    
    if (searchInput) {
      searchInput.addEventListener('input', applyFilters);
    }
    if (categoryFilter) {
      categoryFilter.addEventListener('change', applyFilters);
    }
    if (statusFilter) {
      statusFilter.addEventListener('change', applyFilters);
    }
    
    // 編集・削除関数（将来の実装用）
    window.editPartner = function(id) {
      console.log('Edit partner:', id);
      // TODO: 編集モーダルを開く
    };
    
    window.deletePartner = function(id) {
      if (confirm('このパートナー企業を削除しますか？')) {
        console.log('Delete partner:', id);
        // TODO: 削除APIを呼び出す
      }
    };
    
  })();
</script>

    <footer class="site-footer">
  <div class="container text-center muted small" style="padding: 16px 0;">
    <p>&copy; 2025 ミセサポ</p>
  </div>
</footer>


    <!-- AWS SDK and Cognito -->
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.1000.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/amazon-cognito-identity-js@6.3.0/dist/amazon-cognito-identity.min.js"></script>
    <script src="/js/cognito_config.js"></script>
    <script src="/js/cognito_auth.js"></script>
    <!-- Firebase SDK - 削除済み（Cognitoに移行） -->
    <script src="/js/role_config.js"></script>
    <script src="/js/users.js"></script>
    <script src="/js/auth.js"></script>
    <script src="/js/navigation.js"></script>
    <script src="/modal_manager.js"></script>
    <script src="/app.js"></script>
    <script src="/js/admin-sidebar.js"></script>
    <!-- Page-specific scripts (injected by page content) -->
    <script>
      // 管理画面では共通ヘッダーを持たないため追加スクリプトは不要
    </script>
  </body>
</html>

