<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <base href="/" />
    <title></title>
    
    <link rel="icon" type="image/png" href="/images/logo_144x144.png" />
<link rel="shortcut icon" href="/images/logo_144x144.png" />
<link rel="apple-touch-icon" href="/images/logo_144x144.png" />
<link rel="stylesheet" href="/styles.css" />
<link rel="stylesheet" href="/css/header.css" />
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<!-- 
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet" />
-->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
<style>
  body { font-family: 'Noto Sans JP', 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Hiragino Kaku Gothic ProN', Meiryo, sans-serif; }
  /* Brand theme variables (default + variants) */
  body { --primary: #FF679C; --primary-600: #E35687; }
  body.theme-pink { --primary: #FF679C; --primary-600: #E35687; }
  body.theme-blue { --primary: #2563eb; --primary-600: #1d4ed8; }
  body.theme-emerald { --primary: #10b981; --primary-600: #059669; }
  /* Note: :root also defines the same brand color; inline vars ensure early paint */
  </style>

    <style>
      /* Staff signin page: hide all headers */
      body.page-staff-signin #default-header-wrapper,
      body.page-staff-signin #normal-header-wrapper {
        display: none !important;
      }
      
      /* Staff pages: hide global header and footer */
      body[class*="page-staff-"] #default-header-wrapper,
      body[class*="page-staff-"] #normal-header-wrapper,
      body[class*="page-staff-"] footer {
        display: none !important;
      }
      
      /* Staff pages: ensure full height layout */
      body[class*="page-staff-"] {
        margin: 0;
        padding: 0;
      }
      
      body[class*="page-staff-"] #main {
        margin: 0;
        padding: 0;
      }
      
      /* Admin pages: hide global header while keeping auth buttons */
      body[class*="page-admin-"] #default-header-wrapper {
        height: 0;
        overflow: visible;
      }
      body[class*="page-admin-"] #default-header-wrapper .site-header {
        background: transparent;
        box-shadow: none;
        padding: 0;
        min-height: 0;
      }
      body[class*="page-admin-"] #default-header-wrapper .inner {
        justify-content: flex-end;
        padding: 0;
      }
      body[class*="page-admin-"] #default-header-wrapper .nav-left,
      body[class*="page-admin-"] #default-header-wrapper .hamburger-btn,
      body[class*="page-admin-"] #default-header-wrapper .mobile-nav,
      body[class*="page-admin-"] #default-header-wrapper .spacer,
      body[class*="page-admin-"] #default-header-wrapper .role-badge {
        display: none !important;
      }
      body[class*="page-admin-"] #default-header-wrapper .nav-right {
        position: fixed;
        top: 16px;
        right: 24px;
        display: inline-flex;
        align-items: center;
        gap: 12px;
        background: #fff;
        border-radius: 999px;
        padding: 6px 18px;
        box-shadow: 0 12px 30px rgba(15,23,42,0.18);
        z-index: 300;
      }
      body[class*="page-admin-"] #default-header-wrapper .nav-right .nav-link {
        font-weight: 600;
      }
      body[class*="page-admin-"] #default-header-wrapper .nav-right .icon-btn {
        width: 36px;
        height: 36px;
        border-radius: 999px;
        border: 1px solid #e5e7eb;
      }
      
      /* Admin store chart page: completely hide header */
      body[class*="admin-store-chart"] #default-header-wrapper,
      body[class*="admin-store-chart"] #normal-header-wrapper {
        display: none !important;
      }
      
      /* Sales pages: hide global header and footer */
      body[class*="sales-"] #default-header-wrapper,
      body[class*="sales-"] #normal-header-wrapper,
      body[class*="sales-"] footer {
        display: none !important;
      }
      
      /* Sales pages: ensure full height layout */
      body[class*="sales-"] {
        margin: 0;
        padding: 0;
      }
      
      body[class*="sales-"] #main {
        margin: 0;
        padding: 0;
      }
    </style>
  </head>
  <body class="theme-pink ">
    <div id="default-header-wrapper">
    <a class="skip-link" href="#main">メインコンテンツへスキップ</a>
<header id="header-guest" class="site-header" data-role="guest">
  <div class="inner wide">
    <div class="nav-left">
      <a class="brand brand-logo" href="/" aria-label="ミセサポ ホーム">
        <img src="/images/logo_144x144.png" alt="ミセサポ" />
      </a>
      <nav id="nav-guest" class="nav-left hide-sm" aria-label="Primary">
        <!-- ナビゲーション項目はJavaScriptで動的に生成されます -->
      </nav>
    </div>
    <div class="spacer"></div>
    <nav class="nav-right hide-sm" aria-label="User">
      <span class="role-badge" style="padding: 4px 12px; background: #e5e7eb; color: #6b7280; border-radius: 4px; font-size: 0.875rem; font-weight: 500;">ゲスト</span>
      <a class="nav-link" href="/signin">ログイン</a>
      <a class="nav-link primary" href="/signup">新規登録</a>
      <button class="icon-btn" aria-label="通知">
        <i class="fas fa-bell"></i>
      </button>
      <button class="icon-btn" aria-label="ログアウト" onclick="window.Auth && window.Auth.logout()" style="display: none;">
        <i class="fas fa-sign-out-alt"></i>
      </button>
    </nav>
    <button class="hamburger-btn show-sm" aria-label="メニュー" aria-expanded="false" id="hamburger-btn">
      <span></span>
      <span></span>
      <span></span>
    </button>
  </div>
  <!-- スマホ版ナビゲーションメニュー -->
  <nav class="mobile-nav show-sm" id="mobile-nav" aria-label="モバイルナビゲーション">
    <div class="mobile-nav-content">
      <nav class="mobile-nav-primary" id="mobile-nav-primary" aria-label="Primary">
        <!-- ナビゲーション項目はJavaScriptで動的に生成されます -->
      </nav>
      <nav class="mobile-nav-user" aria-label="User">
        <span class="role-badge" style="padding: 4px 12px; background: #e5e7eb; color: #6b7280; border-radius: 4px; font-size: 0.875rem; font-weight: 500;">ゲスト</span>
        <a class="mobile-nav-link" href="/signin">ログイン</a>
        <a class="mobile-nav-link primary" href="/signup">新規登録</a>
      </nav>
    </div>
  </nav>
</header>

    </div>
    <!-- 通常ヘッダー（ログイン画面用） -->
    <div id="normal-header-wrapper" style="display: none;">
    <!-- 通常ヘッダー -->
<header class="normal-header">
    <div class="normal-header-inner">
        <div class="normal-header-logo">
            <a href="/">
                <img id="normal-header-logo-img" src="/images-material/logo_144x144.png" alt="ロゴ" onerror="this.style.display='none'">
            </a>
                </div>
        <nav class="normal-header-nav">
            <a href="/">TOP</a>
            <a href="/service">対応可能サービス</a>
            <a href="/lp#voice">お客様の声</a>
            <a href="/customers-support-desk">カスタマーズサポート</a>
            <a href="/announcements">お知らせ</a>
            <a href="/privacy-policy">規約＆ポリシー</a>
        </nav>
        <div class="normal-header-actions">
            <a href="/signin" class="normal-header-login">ログイン</a>
        </div>
            </div>
</header>


    </div>
    <main id="main">
      



<link rel="stylesheet" href="/css/admin-store-chart.css" />
<script src="/js/data_utils.js"></script>

<main id="main" class="container admin-store-chart">
  <div class="page-header">
    <a href="/admin/customers/" class="back-btn">
      <i class="fas fa-chevron-left"></i>
    </a>
    <h1 class="page-title">清掃カルテ（完全版）</h1>
    <div class="header-actions">
      <button type="button" class="btn btn-secondary btn-sm" id="upgrade-chart-btn" style="display: none;">
        <i class="fas fa-arrow-up"></i> 完全版に変換
      </button>
      <button type="button" class="btn btn-primary btn-sm" id="save-chart-btn">
        <i class="fas fa-save"></i> 保存
      </button>
    </div>
  </div>
  
  <!-- カルテ履歴セレクター（複数カルテがある場合） -->
  <div class="chart-history-selector" id="chart-history-selector" style="display: none;">
    <label for="chart-select">カルテ履歴:</label>
    <select id="chart-select">
      <option value="">アクティブなカルテを選択</option>
    </select>
  </div>

  <!-- 基本情報セクション -->
  <section class="chart-section chart-section-no-header" id="basic-info-section">
    <div class="basic-info-container">
      <!-- タイトルセクション（左上） -->
      <div class="basic-info-title">
        <h2>基本情報</h2>
      </div>
      
      <!-- ヘッダー情報（右上） -->
      <div class="basic-info-header">
        <div class="header-id-row">
          <span class="header-id-label">顧客ID</span>
          <span class="header-id-value" id="header-client-id">-</span>
        </div>
        <div class="header-id-row">
          <span class="header-id-label">ブランドID</span>
          <span class="header-id-value" id="header-brand-id">-</span>
        </div>
        <div class="header-id-row">
          <span class="header-id-label">店舗ID</span>
          <span class="header-id-value" id="header-store-id">-</span>
        </div>
        <div class="header-id-row">
          <span class="header-id-label">カルテID</span>
          <span class="header-id-value" id="header-chart-id">-</span>
        </div>
      </div>
      
      <!-- メインコンテンツ -->
      <div class="basic-info-content">
        <!-- 行1: ブランド名、店舗名、担当者 -->
        <div class="info-content-row">
          <div class="info-field">
            <span class="info-label">ブランド名</span>
            <span class="info-value" id="brand-name">-</span>
          </div>
          <div class="info-field">
            <span class="info-label">店舗名</span>
            <span class="info-value" id="store-name">-</span>
          </div>
          <div class="info-field">
            <span class="info-label">担当者</span>
            <span class="info-value" id="contact-person">-</span>
          </div>
        </div>
        
        <!-- 行2: 住所、電話、メール -->
        <div class="info-content-row">
          <div class="info-field">
            <span class="info-label">住所</span>
            <span class="info-value" id="store-address">-</span>
          </div>
          <div class="info-field">
            <span class="info-label">電話</span>
            <span class="info-value" id="store-phone">-</span>
          </div>
          <div class="info-field">
            <span class="info-label">メール</span>
            <span class="info-value" id="store-email">-</span>
          </div>
        </div>
        
        <!-- 行3: プラン -->
        <div class="info-content-row">
          <div class="info-field info-field-plan">
            <span class="info-label">プラン</span>
            <div class="plan-options">
              <span class="plan-label">定期:</span>
              <label class="plan-option">
                <input type="radio" name="plan-frequency" value="monthly" id="plan-monthly">
                <span>毎月</span>
              </label>
              <label class="plan-option">
                <input type="radio" name="plan-frequency" value="bimonthly" id="plan-bimonthly">
                <span>隔月</span>
              </label>
              <label class="plan-option">
                <input type="radio" name="plan-frequency" value="quarterly" id="plan-quarterly">
                <span>3ヶ月</span>
              </label>
              <label class="plan-option">
                <input type="radio" name="plan-frequency" value="semiannual" id="plan-semiannual" checked>
                <span>6ヶ月</span>
              </label>
              <label class="plan-option">
                <input type="radio" name="plan-frequency" value="yearly" id="plan-yearly">
                <span>年1</span>
              </label>
              <span class="plan-separator">/</span>
              <label class="plan-option">
                <input type="radio" name="plan-frequency" value="spot" id="plan-spot">
                <span>スポット</span>
              </label>
            </div>
          </div>
        </div>
        
        <!-- 行4: セキュリティボックス -->
        <div class="info-content-row">
          <div class="info-field">
            <span class="info-label">セキュリティボックス</span>
            <div class="security-box-input">
              <span class="security-box-prefix">-No.</span>
              <input type="text" id="security-box-number" class="security-box-number-input" placeholder="？？？？" maxlength="10">
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- 設備セクション -->
  <section class="chart-section" id="equipment-section">
    <div class="section-header">
      <h2 class="section-title">
        <i class="fas fa-tools"></i>
        設備
      </h2>
      <button type="button" class="section-toggle" aria-label="セクションを開閉">
        <i class="fas fa-chevron-down"></i>
      </button>
    </div>
    <div class="section-content">
      <div class="equipment-categories">
        <!-- 厨房設備 -->
        <div class="equipment-category">
          <h3 class="category-title">厨房設備</h3>
          <div class="checkbox-group">
            <label class="checkbox-item">
              <input type="checkbox" name="equipment" value="グリストラップ">
              <span class="checkbox-label">グリストラップ</span>
            </label>
            <label class="checkbox-item">
              <input type="checkbox" name="equipment" value="換気扇">
              <span class="checkbox-label">換気扇</span>
            </label>
            <label class="checkbox-item">
              <input type="checkbox" name="equipment" value="厨房機器">
              <span class="checkbox-label">厨房機器</span>
            </label>
            <label class="checkbox-item">
              <input type="checkbox" name="equipment" value="シンク">
              <span class="checkbox-label">シンク</span>
            </label>
            <label class="checkbox-item">
              <input type="checkbox" name="equipment" value="U字溝">
              <span class="checkbox-label">U字溝・グレーチング</span>
            </label>
          </div>
        </div>

        <!-- 空調設備 -->
        <div class="equipment-category">
          <h3 class="category-title">空調設備</h3>
          <div class="checkbox-group">
            <label class="checkbox-item">
              <input type="checkbox" name="equipment" value="エアコン">
              <span class="checkbox-label">エアコン</span>
            </label>
            <label class="checkbox-item">
              <input type="checkbox" name="equipment" value="空調ダクト">
              <span class="checkbox-label">空調ダクト</span>
            </label>
          </div>
        </div>

        <!-- 床・壁 -->
        <div class="equipment-category">
          <h3 class="category-title">床・壁</h3>
          <div class="checkbox-group">
            <label class="checkbox-item">
              <input type="checkbox" name="equipment" value="床">
              <span class="checkbox-label">床</span>
            </label>
            <label class="checkbox-item">
              <input type="checkbox" name="equipment" value="壁">
              <span class="checkbox-label">壁</span>
            </label>
            <label class="checkbox-item">
              <input type="checkbox" name="equipment" value="天井">
              <span class="checkbox-label">天井</span>
            </label>
          </div>
        </div>

        <!-- その他 -->
        <div class="equipment-category">
          <h3 class="category-title">その他</h3>
          <div class="checkbox-group">
            <label class="checkbox-item">
              <input type="checkbox" name="equipment" value="トイレ">
              <span class="checkbox-label">トイレ</span>
            </label>
            <label class="checkbox-item">
              <input type="checkbox" name="equipment" value="洗面所">
              <span class="checkbox-label">洗面所</span>
            </label>
            <label class="checkbox-item">
              <input type="checkbox" name="equipment" value="窓">
              <span class="checkbox-label">窓</span>
            </label>
            <label class="checkbox-item">
              <input type="checkbox" name="equipment" value="カーペット">
              <span class="checkbox-label">カーペット</span>
            </label>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- サービス内容セクション -->
  <section class="chart-section" id="services-section">
    <div class="section-header">
      <h2 class="section-title">
        <i class="fas fa-list-check"></i>
        サービス内容
      </h2>
      <button type="button" class="section-toggle" aria-label="セクションを開閉">
        <i class="fas fa-chevron-down"></i>
      </button>
    </div>
    <div class="section-content">
      <div class="services-list" id="services-list">
        <div class="loading">読み込み中...</div>
      </div>
    </div>
  </section>

  <!-- 消耗品セクション（完全版で表示） -->
  <section class="chart-section" id="consumables-section">
    <div class="section-header">
      <h2 class="section-title">
        <i class="fas fa-box"></i>
        使用消耗品
      </h2>
      <button type="button" class="section-toggle" aria-label="セクションを開閉">
        <i class="fas fa-chevron-down"></i>
      </button>
    </div>
    <div class="section-content">
      <div class="consumables-list" id="consumables-list">
        <div class="empty-state">消耗品が登録されていません</div>
      </div>
      <button type="button" class="btn btn-outline btn-sm" id="add-consumable-btn">
        <i class="fas fa-plus"></i> 消耗品を追加
      </button>
    </div>
  </section>

  <!-- 清掃担当者履歴セクション（完全版で表示） -->
  <section class="chart-section" id="staff-history-section">
    <div class="section-header">
      <h2 class="section-title">
        <i class="fas fa-users"></i>
        清掃担当者履歴
      </h2>
      <button type="button" class="section-toggle" aria-label="セクションを開閉">
        <i class="fas fa-chevron-down"></i>
      </button>
    </div>
    <div class="section-content">
      <div class="staff-history-list" id="staff-history-list">
        <div class="empty-state">担当者履歴がありません</div>
      </div>
      <button type="button" class="btn btn-outline btn-sm" id="add-staff-btn">
        <i class="fas fa-plus"></i> 担当者を追加
      </button>
    </div>
  </section>

  <!-- メモセクション -->
  <section class="chart-section" id="notes-section">
    <div class="section-header">
      <h2 class="section-title">
        <i class="fas fa-sticky-note"></i>
        メモ・特記事項
      </h2>
      <button type="button" class="section-toggle" aria-label="セクションを開閉">
        <i class="fas fa-chevron-down"></i>
      </button>
    </div>
    <div class="section-content">
      <textarea id="chart-notes" rows="6" placeholder="特記事項や注意点を入力してください"></textarea>
    </div>
  </section>
</main>

<!-- 消耗品追加モーダル -->
<dialog id="consumable-modal" class="chart-modal">
  <div class="modal-content">
    <div class="modal-header">
      <h3>消耗品を追加</h3>
      <button type="button" class="modal-close" onclick="document.getElementById('consumable-modal').close()">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="modal-body">
      <div class="form-group">
        <label for="consumable-name">消耗品名 <span class="required">*</span></label>
        <input type="text" id="consumable-name" placeholder="例: 洗剤A" required>
      </div>
      <div class="form-group">
        <label for="consumable-quantity">数量</label>
        <input type="text" id="consumable-quantity" placeholder="例: 500ml">
      </div>
      <div class="form-group">
        <label for="consumable-notes">備考</label>
        <textarea id="consumable-notes" rows="3" placeholder="使用場所や注意点など"></textarea>
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-secondary" onclick="document.getElementById('consumable-modal').close()">キャンセル</button>
      <button type="button" class="btn btn-primary" id="save-consumable-btn">追加</button>
    </div>
  </div>
</dialog>

<!-- 担当者追加モーダル -->
<dialog id="staff-modal" class="chart-modal">
  <div class="modal-content">
    <div class="modal-header">
      <h3>担当者を追加</h3>
      <button type="button" class="modal-close" onclick="document.getElementById('staff-modal').close()">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="modal-body">
      <div class="form-group">
        <label for="staff-select">担当者 <span class="required">*</span></label>
        <select id="staff-select" required>
          <option value="">選択してください</option>
        </select>
      </div>
      <div class="form-group">
        <label for="staff-start-date">担当開始日</label>
        <input type="date" id="staff-start-date">
      </div>
      <div class="form-group">
        <label for="staff-end-date">担当終了日</label>
        <input type="date" id="staff-end-date">
        <small class="form-hint">現在担当中の場合は空欄にしてください</small>
      </div>
      <div class="form-group">
        <label for="staff-notes">備考</label>
        <textarea id="staff-notes" rows="3" placeholder="特記事項があれば入力"></textarea>
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-secondary" onclick="document.getElementById('staff-modal').close()">キャンセル</button>
      <button type="button" class="btn btn-primary" id="save-staff-btn">追加</button>
    </div>
  </div>
</dialog>

<script src="/js/admin-store-chart.js"></script>


    </main>
    <footer class="site-footer">
  <div class="container text-center muted small" style="padding: 16px 0;">
    <p>&copy; 2025 ミセサポ</p>
  </div>
</footer>


    <!-- Firebase SDK - 削除済み（Cognitoに移行） -->
    <script src="/js/role_config.js"></script>
    <script src="/js/users.js"></script>
    <script src="/js/auth.js"></script>
    <script src="/js/navigation.js"></script>
    <script src="/modal_manager.js"></script>
    <script src="/app.js"></script>
    <script>
      // ログイン画面では通常ヘッダーを表示
      (function() {
        const path = window.location.pathname || '';
        const isSigninPage = path.includes('/signin.html') || path.includes('/signin');
        
        // ログイン画面では通常ヘッダーを表示、デフォルトヘッダーを非表示
        if (isSigninPage) {
          const defaultHeaderWrapper = document.getElementById('default-header-wrapper');
          const normalHeaderWrapper = document.getElementById('normal-header-wrapper');
          if (defaultHeaderWrapper) {
            defaultHeaderWrapper.style.display = 'none';
          }
          if (normalHeaderWrapper) {
            normalHeaderWrapper.style.display = 'block';
            // ログイン画面では通常ヘッダーを常に表示
            const normalHeader = normalHeaderWrapper.querySelector('.normal-header');
            if (normalHeader) {
              normalHeader.classList.add('visible');
            }
          }
        }
      })();
    </script>
  </body>
  </html>


