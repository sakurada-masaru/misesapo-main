<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base id="base-tag" href="/misesapo/" />
    <title>MISESAPO æ¸…æƒåŸºæº–ãƒãƒ‹ãƒ¥ã‚¢ãƒ«</title>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-storage-compat.js"></script>
    <script src="/js/firebase-config.js"></script>
    <script src="/js/role_config.js"></script>
    <script src="/js/users.js"></script>
    <script src="/js/auth.js"></script>
    <script src="/js/cleaning-manual-firebase.js"></script>
    <!--GoogleFonts(Noto Sans JP)-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@100..900&display=swap" rel="stylesheet">
    <!--GoogleFonts(Noto Sans JP) end-->
    <link rel="stylesheet" href="https://unpkg.com/ress@4.0.0/dist/ress.min.css">
    <link rel="stylesheet" href="/css/swiper-bundle.min.css">
    <link rel="stylesheet" href="/css/style.css">
    <script src="/js/swiper-bundle.min.js"></script>
    <!-- ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ã¿èª­ã¿è¾¼ã¿ï¼ˆscript.jsã¯pagetopè¦ç´ ãŒå¿…è¦ãªãŸã‚èª­ã¿è¾¼ã¾ãªã„ï¼‰ -->
    <script>
        // ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ã¿å®Ÿè£…
        document.addEventListener('DOMContentLoaded', function() {
            const btn = document.querySelector('.btn');
            const g_nav = document.querySelector('#g-nav');
            const html = document.querySelector('html');
            const body = document.querySelector('body');
            const g_nav_links = document.querySelectorAll('#g-nav ul li a');

            if (btn && g_nav) {
                btn.addEventListener('click', () => {
                    btn.classList.toggle('active');
                    g_nav.classList.toggle('active');
                    html.classList.toggle('active');
                    body.classList.toggle('active');
                });
                g_nav_links.forEach((g_nav_link) => {
                    g_nav_link.addEventListener('click', () => {
                        btn.classList.remove('active');
                        g_nav.classList.remove('active');
                        html.classList.remove('active');
                        body.classList.remove('active');
                    });
                });
            }
        });
    </script>
    <style>
        /* ãƒ™ãƒ¼ã‚¹ã‚¹ã‚¿ã‚¤ãƒ« */
        body {
            font-family: 'Noto Sans JP', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f7f6;
            color: #333;
        }
        /* æ¨™æº–ãƒ˜ãƒƒãƒ€ãƒ¼ã®èª¿æ•´ï¼ˆæ¨™æº–CSSã®position: fixedã‚’ç¶­æŒï¼‰ */
        /* ã‚«ãƒ†ã‚´ãƒªã‚¿ãƒ– */
        .category-tabs {
            position: fixed;
            top: 6.4rem; /* æ¨™æº–ãƒ˜ãƒƒãƒ€ãƒ¼ã®é«˜ã•ï¼ˆ6.4remï¼‰ã«åˆã‚ã›ã¦èª¿æ•´ */
            left: 0;
            width: 100%;
            background-color: white;
            display: flex;
            justify-content: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            z-index: 999;
            padding: 10px 0;
            flex-wrap: wrap;
        }
        .category-tab {
            background-color: #f0f0f0;
            color: #333;
            border: none;
            padding: 8px 15px;
            margin: 0 5px;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
            font-size: 0.85em;
            transition: all 0.3s;
        }
        .category-tab:hover {
            background-color: #ffe6f5;
        }
        .category-tab.active {
            background-color: #ff008c;
            color: white;
        }
        /* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒªã‚¢ */
        #content {
            padding: calc(6.4rem + 60px) 0 80px 0; /* ãƒ˜ãƒƒãƒ€ãƒ¼ï¼ˆ6.4remï¼‰+ ã‚¿ãƒ–ï¼ˆç´„60pxï¼‰+ ãƒ•ãƒƒã‚¿ãƒ¼ï¼ˆ80pxï¼‰ã®é«˜ã•åˆ†ã‚’ç¢ºä¿ */
        }
        /* å„ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ãƒšãƒ¼ã‚¸ */
        .manual-page {
            display: none;
            padding: 20px;
            max-width: 600px;
            margin: 0 auto;
            background-color: white;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.05);
            min-height: calc(100vh - 200px);
        }
        .manual-page.active {
            display: block;
        }
        /* é …ç›®ã‚¿ã‚¤ãƒˆãƒ« */
        .page-title {
            color: #ff008c; /* ãƒ‘ãƒ¼ã‚½ãƒŠãƒ«ã‚«ãƒ©ãƒ¼ */
            border-bottom: 3px solid #ff008c; /* ãƒ‘ãƒ¼ã‚½ãƒŠãƒ«ã‚«ãƒ©ãƒ¼ */
            padding-bottom: 5px;
            margin-top: 0;
            font-size: 1.6em;
            font-weight: 700;
            margin-bottom: 20px;
        }
        .section-title {
            font-size: 1.2em;
            font-weight: 600;
            margin-top: 25px;
            margin-bottom: 10px;
            padding: 5px 10px;
            background-color: #ffe6f5; /* ãƒ‘ãƒ¼ã‚½ãƒŠãƒ«ã‚«ãƒ©ãƒ¼ã®è–„ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ */
            border-left: 5px solid #ff008c; /* ãƒ‘ãƒ¼ã‚½ãƒŠãƒ«ã‚«ãƒ©ãƒ¼ */
        }
        
        /* è‰¯ã„ä¾‹ãƒ»æ‚ªã„ä¾‹ */
        .example-box {
            padding: 10px 15px;
            margin-bottom: 15px;
            border-radius: 6px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        }
        .bad-example {
            background-color: #fbe5e6; /* èµ¤ç³» */
            border: 1px solid #d9534f;
        }
        .good-example {
            background-color: #e6f7e9; /* ç·‘ç³» */
            border: 1px solid #5cb85c;
        }
        .example-box strong {
            display: block;
            margin-bottom: 5px;
            font-size: 1.1em;
        }
        /* ç”»åƒè¡¨ç¤º */
        .example-image {
            width: 100%;
            max-width: 500px;
            height: auto;
            margin: 10px 0;
            border-radius: 6px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            display: block;
            pointer-events: none; /* ç”»åƒã®ã‚¯ãƒªãƒƒã‚¯ã‚’ç„¡åŠ¹åŒ– */
            user-select: none; /* ç”»åƒã®é¸æŠã‚’ç„¡åŠ¹åŒ– */
        }
        .example-image-container {
            text-align: center;
            margin: 10px 0;
        }
        /* Q&Aã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
        .qa-section {
            margin-top: 30px;
            border-top: 2px dashed #ccc;
            padding-top: 15px;
        }
        .qa-section p {
            margin: 8px 0;
            line-height: 1.4;
        }
        .qa-question {
            font-weight: bold;
            color: #ff008c; /* ãƒ‘ãƒ¼ã‚½ãƒŠãƒ«ã‚«ãƒ©ãƒ¼ */
        }
        .qa-answer {
            padding-left: 10px;
            border-left: 3px solid #ff008c; /* ãƒ‘ãƒ¼ã‚½ãƒŠãƒ«ã‚«ãƒ©ãƒ¼ */
        }
        /* ãƒ•ãƒƒã‚¿ãƒ¼ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ */
        footer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: #333;
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 20px;
            box-sizing: border-box;
            box-shadow: 0 -2px 4px rgba(0, 0, 0, 0.1);
            z-index: 1000;
        }
        .nav-button {
            background-color: #ff008c; /* ãƒ‘ãƒ¼ã‚½ãƒŠãƒ«ã‚«ãƒ©ãƒ¼ */
            color: white; /* ç™½æ–‡å­—ã«å¤‰æ›´ */
            border: none;
            padding: 8px 15px;
            text-decoration: none;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
            font-size: 0.9em;
            flex-grow: 1;
            margin: 0 5px;
            text-align: center;
        }
        .nav-button:disabled {
            background-color: #999;
            color: #eee;
            cursor: not-allowed;
        }
        .index-button {
            background-color: #ff008c; /* ãƒ‘ãƒ¼ã‚½ãƒŠãƒ«ã‚«ãƒ©ãƒ¼ */
            color: white;
        }
        /* ç›®æ¬¡ãƒšãƒ¼ã‚¸ */
        .index-page {
            padding: 20px;
            max-width: 600px;
            margin: 0 auto;
            background-color: white;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.05);
            min-height: calc(100vh - 200px);
        }
        .index-page h2 {
            font-size: 1.4em;
            color: #ff008c; /* ãƒ‘ãƒ¼ã‚½ãƒŠãƒ«ã‚«ãƒ©ãƒ¼ */
            border-bottom: 2px solid #ccc;
            padding-bottom: 10px;
            margin-top: 20px;
        }
        .index-page ol {
            list-style: none;
            padding: 0;
        }
        .index-page li {
            margin-bottom: 10px;
        }
        .index-page li a {
            display: block;
            background-color: #f0f0f0;
            padding: 10px 15px;
            text-decoration: none;
            color: #333;
            border-radius: 5px;
            transition: background-color 0.2s;
        }
        .index-page li a:hover {
            background-color: #e0e0e0;
        }
        .category-separator {
            font-weight: bold;
            color: #ff008c; /* ãƒ‘ãƒ¼ã‚½ãƒŠãƒ«ã‚«ãƒ©ãƒ¼ */
            padding: 10px 0 5px;
            font-size: 1.1em;
            border-bottom: 1px solid #ccc;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <header>
        <div class="header-flex wrapper">
            <h1 class="header-logo">
                <a href="staff/dashboard.html"><img id="header-logo-img" src="" alt="ãƒŸã‚»ã‚µãƒ"></a>
            </h1>
            <button class="btn"><span></span><span></span><span></span></button>
            <nav id="g-nav">
                <div id="g-nav-list">
                    <ul>
                        <li><a href="staff/dashboard.html">ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</a></li>
                        <li><a href="staff/assignments.html">ä½œæ¥­ä¸€è¦§</a></li>
                        <li><a href="staff/reports/new.html">ãƒ¬ãƒãƒ¼ãƒˆä½œæˆ</a></li>
                        <li><a href="staff/schedule.html">ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«</a></li>
                        <li><a href="staff/training.html">ç ”ä¿®å‹•ç”»</a></li>
                        <li><a href="cleaning-manual.html">æ¸…æƒåŸºæº–ãƒãƒ‹ãƒ¥ã‚¢ãƒ«</a></li>
                        <li><a href="cleaning-manual-admin.html" style="color: #ff008c; font-weight: bold;">ğŸ“ ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ç·¨é›†</a></li>
                        <li><a href="signin.html" class="login-button">ãƒ­ã‚°ã‚¤ãƒ³</a></li>
                    </ul>
                </div>
            </nav>
        </div>
    </header>
    
    <div style="background: #fff3f8; padding: 10px 20px; margin: 10px 0; border-left: 4px solid #ff008c; border-radius: 4px;">
        <a href="cleaning-manual-admin.html" style="color: #ff008c; font-weight: bold; text-decoration: none;">
            <i class="fas fa-edit"></i> ç®¡ç†ç”»é¢ã§ç·¨é›†ã™ã‚‹
        </a>
    </div>
    
    <div class="category-tabs">
        <button class="category-tab active" onclick="filterByCategory('all', event)">ã™ã¹ã¦</button>
        <button class="category-tab" onclick="filterByCategory('å¨æˆ¿è¨­å‚™', event)">å¨æˆ¿è¨­å‚™ (12)</button>
        <button class="category-tab" onclick="filterByCategory('ç©ºèª¿è¨­å‚™', event)">ç©ºèª¿è¨­å‚™ (2)</button>
        <button class="category-tab" onclick="filterByCategory('ãƒ•ãƒ­ã‚¢', event)">ãƒ•ãƒ­ã‚¢ (8)</button>
        <button class="category-tab" onclick="filterByCategory('ãã®ä»–', event)">ãã®ä»– (12)</button>
    </div>

    <div id="content">
        <div id="page-0-all" class="manual-page active" data-category="all">
            <div class="index-page">
                <h2>å…¨ã‚«ãƒ†ã‚´ãƒªé …ç›®ï¼ˆ34ä»¶ï¼‰</h2>
                <ol id="index-list-all"></ol>
            </div>
        </div>
        <div id="page-0-kitchen" class="manual-page" data-category="å¨æˆ¿è¨­å‚™">
            <div class="index-page">
                <h2>å¨æˆ¿è¨­å‚™ã‚«ãƒ†ã‚´ãƒªï¼ˆ12ä»¶ï¼‰</h2>
                <ol id="index-list-kitchen"></ol>
            </div>
        </div>
        <div id="page-0-aircon" class="manual-page" data-category="ç©ºèª¿è¨­å‚™">
            <div class="index-page">
                <h2>ç©ºèª¿è¨­å‚™ã‚«ãƒ†ã‚´ãƒªï¼ˆ2ä»¶ï¼‰</h2>
                <ol id="index-list-aircon"></ol>
            </div>
        </div>
        <div id="page-0-floor" class="manual-page" data-category="ãƒ•ãƒ­ã‚¢">
            <div class="index-page">
                <h2>ãƒ•ãƒ­ã‚¢ã‚«ãƒ†ã‚´ãƒªï¼ˆ8ä»¶ï¼‰</h2>
                <ol id="index-list-floor"></ol>
            </div>
        </div>
        <div id="page-0-other" class="manual-page" data-category="ãã®ä»–">
            <div class="index-page">
                <h2>ãã®ä»–ã‚«ãƒ†ã‚´ãƒªï¼ˆ12ä»¶ï¼‰</h2>
                <ol id="index-list-other"></ol>
            </div>
        </div>
    </div>
    
    <footer>
        <button class="nav-button" id="prev-button" onclick="navigate(-1)" disabled>â—€ å‰ã¸</button>
        <button class="nav-button index-button" onclick="showIndex()">ç›®æ¬¡</button>
        <button class="nav-button" id="next-button" onclick="navigate(1)">æ¬¡ã¸ â–¶</button>
    </footer>

    <script>
        // ãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹ã‚’å–å¾—ï¼ˆGitHub Pageså¯¾å¿œï¼‰
        function getBasePath() {
            // ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒã§ã¯baseã‚¿ã‚°ã‚’ç„¡è¦–
            const isLocalDev = window.location.hostname === 'localhost' || 
                              window.location.hostname === '127.0.0.1' ||
                              window.location.hostname === '';
            
            if (isLocalDev) {
                console.log('[CleaningManual] Local development environment detected, using root path');
                return '/';
            }
            
            // GitHub Pagesãªã©ã®æœ¬ç•ªç’°å¢ƒã§ã¯baseã‚¿ã‚°ã‚’ä½¿ç”¨
            const base = document.querySelector('base');
            if (base && base.href) {
                try {
                    const url = new URL(base.href);
                    const pathname = url.pathname;
                    console.log('[CleaningManual] Using base tag path:', pathname);
                    return pathname;
                } catch (e) {
                    const href = base.getAttribute('href') || '/';
                    console.log('[CleaningManual] Using base tag href:', href);
                    return href;
                }
            }
            
            // baseã‚¿ã‚°ãŒãªã„å ´åˆã¯ã€ç¾åœ¨ã®ãƒ‘ã‚¹ã‹ã‚‰æ¨æ¸¬
            const path = window.location.pathname;
            if (path.includes('/misesapo/')) {
                console.log('[CleaningManual] Detected /misesapo/ in path, using /misesapo/');
                return '/misesapo/';
            }
            
            console.log('[CleaningManual] No base tag found, using root path');
            return '/';
        }
        
        // ãƒ‘ã‚¹ã‚’è§£æ±ºï¼ˆãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹ä»˜ãï¼‰
        function resolvePath(path) {
            if (!path || path.startsWith('http://') || path.startsWith('https://') || path.startsWith('//')) {
                return path;
            }
            
            // ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒã§ã¯baseã‚¿ã‚°ã‚’ç„¡è¦–
            const isLocalDev = window.location.hostname === 'localhost' || 
                              window.location.hostname === '127.0.0.1' ||
                              window.location.hostname === '';
            
            if (isLocalDev) {
                // ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒã§ã¯çµ¶å¯¾ãƒ‘ã‚¹ã‚’ãã®ã¾ã¾è¿”ã™
                if (path.startsWith('/')) {
                    console.log('[CleaningManual] resolvePath (local):', path);
                    return path;
                }
                // ç›¸å¯¾ãƒ‘ã‚¹ã®å ´åˆã¯/ã‚’ä»˜ã‘ã‚‹
                const resolved = '/' + path;
                console.log('[CleaningManual] resolvePath (local, relative):', resolved);
                return resolved;
            }
            
            // GitHub Pagesãªã©ã®æœ¬ç•ªç’°å¢ƒã§ã¯baseã‚¿ã‚°ã‚’ä½¿ç”¨
            const basePath = getBasePath();
            console.log('[CleaningManual] resolvePath:', { path, basePath });
            
            if (path.startsWith('/')) {
                // çµ¶å¯¾ãƒ‘ã‚¹ã®å ´åˆ
                const resolved = basePath === '/' ? path : basePath.slice(0, -1) + path;
                console.log('[CleaningManual] resolved absolute path:', resolved);
                return resolved;
            }
            // ç›¸å¯¾ãƒ‘ã‚¹ã®å ´åˆ
            const resolved = basePath === '/' ? '/' + path : basePath + path;
            console.log('[CleaningManual] resolved relative path:', resolved);
            return resolved;
        }
        
        // ãƒ‡ãƒ¼ã‚¿ã‚’JSONãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰èª­ã¿è¾¼ã‚€ï¼ˆGitHub Pageså¯¾å¿œï¼‰
        let kitchenData = [];
        let airconData = [];
        let floorData = [];
        let otherData = [];
        let manualData = [];
        
        // ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿é–¢æ•°
        async function loadManualData() {
            try {
                // FirebaseãŒåˆ©ç”¨å¯èƒ½ãªå ´åˆã¯Firestoreã‹ã‚‰èª­ã¿è¾¼ã‚€
                if (window.CleaningManualFirebase && window.FirebaseFirestore) {
                    try {
                        const data = await window.CleaningManualFirebase.loadDataFromFirestore();
                        console.log('[CleaningManual] Firestore data loaded:', data);
                        
                        kitchenData = data.kitchen || [];
                        airconData = data.aircon || [];
                        floorData = data.floor || [];
                        otherData = data.other || [];
                        manualData = [...kitchenData, ...airconData, ...floorData, ...otherData];
                        
                        console.log('[CleaningManual] Data counts:', {
                            kitchen: kitchenData.length,
                            aircon: airconData.length,
                            floor: floorData.length,
                            other: otherData.length,
                            total: manualData.length
                        });
                        
                        // ãƒ‡ãƒ¼ã‚¿ãŒç©ºã®å ´åˆã¯ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
                        if (manualData.length === 0) {
                            console.warn('[CleaningManual] Firestore data is empty, trying fallback...');
                            throw new Error('Firestore data is empty');
                        }
                        
                        initializeManual();
                        return;
                    } catch (error) {
                        console.error('[CleaningManual] Firestore load error:', error);
                        // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’è©¦è¡Œ
                    }
                }
                
                // ã¾ãšAPIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’è©¦ã™ï¼ˆé–‹ç™ºç’°å¢ƒï¼‰
                let response = null;
                let apiUrl = resolvePath('/api/cleaning-manual');
                console.log('[CleaningManual] Trying API endpoint:', apiUrl);
                
                try {
                    response = await fetch(apiUrl);
                    console.log('[CleaningManual] API response:', {
                        ok: response.ok,
                        status: response.status,
                        statusText: response.statusText,
                        url: response.url
                    });
                } catch (e) {
                    console.log('[CleaningManual] API fetch error:', e.message);
                }
                
                if (!response || !response.ok) {
                    // APIãŒåˆ©ç”¨ã§ããªã„å ´åˆï¼ˆGitHub Pagesãªã©ï¼‰ã€é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€
                    const jsonUrl = resolvePath('/data/cleaning-manual.json');
                    console.log('[CleaningManual] Trying JSON file:', jsonUrl);
                    try {
                        response = await fetch(jsonUrl);
                        console.log('[CleaningManual] JSON response:', {
                            ok: response.ok,
                            status: response.status,
                            statusText: response.statusText,
                            url: response.url
                        });
                    } catch (e) {
                        console.error('[CleaningManual] JSON fetch error:', e.message);
                        throw new Error(`JSONãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ: ${e.message}`);
                    }
                }
                
                if (response && response.ok) {
                    const data = await response.json();
                    console.log('[CleaningManual] JSON data loaded:', data);
                    
                    kitchenData = data.kitchen || [];
                    airconData = data.aircon || [];
                    floorData = data.floor || [];
                    otherData = data.other || [];
                    manualData = [...kitchenData, ...airconData, ...floorData, ...otherData];
                    
                    console.log('[CleaningManual] Data counts:', {
                        kitchen: kitchenData.length,
                        aircon: airconData.length,
                        floor: floorData.length,
                        other: otherData.length,
                        total: manualData.length
                    });
                    
                    // ãƒ‡ãƒ¼ã‚¿ãŒç©ºã®å ´åˆã¯ã‚¨ãƒ©ãƒ¼
                    if (manualData.length === 0) {
                        throw new Error('JSONãƒ•ã‚¡ã‚¤ãƒ«ã«ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“');
                    }
                    
                    // ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿å¾Œã«åˆæœŸåŒ–
                    initializeManual();
                } else {
                    const status = response ? response.status : 'no response';
                    const statusText = response ? response.statusText : 'no response';
                    const url = response ? response.url : 'unknown';
                    console.error('[CleaningManual] ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ:', {
                        status,
                        statusText,
                        url
                    });
                    throw new Error(`ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ (Status: ${status}, URL: ${url})`);
                }
            } catch (error) {
                console.error('[CleaningManual] ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', error);
                console.error('[CleaningManual] Error details:', {
                    message: error.message,
                    stack: error.stack,
                    name: error.name
                });
                
                // ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
                const contentDiv = document.getElementById('content');
                if (contentDiv) {
                    const errorMessage = error.message || 'ä¸æ˜ãªã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ';
                    contentDiv.innerHTML = `
                        <div style="text-align: center; padding: 40px; max-width: 600px; margin: 0 auto;">
                            <h2 style="color: #ff008c;">ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼</h2>
                            <p style="margin: 20px 0; color: #666;">${errorMessage}</p>
                            <div style="background: #f8f9fa; padding: 20px; border-radius: 5px; margin: 20px 0; text-align: left;">
                                <h3 style="font-size: 16px; margin-top: 0;">å¯¾å‡¦æ–¹æ³•:</h3>
                                <ol style="margin: 0; padding-left: 20px;">
                                    <li style="margin: 10px 0;">
                                        <a href="cleaning-manual-admin.html" style="color: #ff008c; text-decoration: underline; font-weight: bold;">
                                            ç®¡ç†ç”»é¢ã§åˆæœŸãƒ‡ãƒ¼ã‚¿ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ãã ã•ã„
                                        </a>
                                    </li>
                                    <li style="margin: 10px 0;">ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ï¼ˆF12ï¼‰ã§ã‚¨ãƒ©ãƒ¼ã®è©³ç´°ã‚’ç¢ºèªã—ã¦ãã ã•ã„</li>
                                    <li style="margin: 10px 0;">FirebaseãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã—ã¦ãã ã•ã„</li>
                                </ol>
                            </div>
                            <p style="margin-top: 20px; font-size: 14px; color: #999;">
                                ã‚¨ãƒ©ãƒ¼è©³ç´°: ${errorMessage}
                            </p>
                        </div>
                    `;
                }
            }
        }
        
        // åˆæœŸåŒ–é–¢æ•°ï¼ˆãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿å¾Œã«å‘¼ã°ã‚Œã‚‹ï¼‰
        function initializeManual() {
            // æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰ã‚’ã“ã“ã«ç§»å‹•
            let currentPage = 'page-0-all';
            let currentCategory = 'all';
            const totalPages = manualData.length;
            const contentDiv = document.getElementById('content');
            const prevButton = document.getElementById('prev-button');
            const nextButton = document.getElementById('next-button');

            // ã‚«ãƒ†ã‚´ãƒªã”ã¨ã®ãƒªã‚¹ãƒˆãƒšãƒ¼ã‚¸IDãƒãƒƒãƒ”ãƒ³ã‚°
            const categoryListPageMap = {
                'all': 'page-0-all',
                'å¨æˆ¿è¨­å‚™': 'page-0-kitchen',
                'ç©ºèª¿è¨­å‚™': 'page-0-aircon',
                'ãƒ•ãƒ­ã‚¢': 'page-0-floor',
                'ãã®ä»–': 'page-0-other'
            };
            
            // ã‚«ãƒ†ã‚´ãƒªåã‚’ã‚­ãƒ¼ã«å¤‰æ›
            function getCategoryKey(categoryName) {
                const categoryMap = {
                    'å¨æˆ¿è¨­å‚™': 'kitchen',
                    'ç©ºèª¿è¨­å‚™': 'aircon',
                    'ãƒ•ãƒ­ã‚¢': 'floor',
                    'ãã®ä»–': 'other'
                };
                return categoryMap[categoryName] || 'other';
            }

            // ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ãƒšãƒ¼ã‚¸ã‚’ç”Ÿæˆã—DOMã«è¿½åŠ 
            function createManualPages() {
                const fragment = document.createDocumentFragment();
                const indexListAll = document.getElementById('index-list-all');
                const indexListKitchen = document.getElementById('index-list-kitchen');
                const indexListAircon = document.getElementById('index-list-aircon');
                const indexListFloor = document.getElementById('index-list-floor');
                const indexListOther = document.getElementById('index-list-other');
                
                let lastCategory = '';
                
                manualData.forEach((data, index) => {
                    const pageIndex = index + 1; // ãƒšãƒ¼ã‚¸ç•ªå·ã¯1ã‹ã‚‰é–‹å§‹

                    // ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®HTMLã‚’ç”Ÿæˆ
                    const pageHtml = `
                        <div id="page-${pageIndex}" class="manual-page" data-category="${data.category}">
                            <h2 class="page-title">ã€${data.category}ã€‘${data.title}</h2>
                            <div class="section-title">ã€MISESAPOã®ç†å¿µã€‘ãƒªã‚¹ã‚¯å¯¾ç­–</div>
                            <p><strong>${data.category}ã‚«ãƒ†ã‚´ãƒª</strong>ï¼š${data.risk}</p>
                            
                            <div class="section-title bad-example-title">âŒ ãƒ€ãƒ¡ãªä¾‹ï¼ˆãƒªã‚¹ã‚¯è¡Œç‚ºï¼šæ¸›ç‚¹å¯¾è±¡ï¼‰</div>
                            <div class="example-box bad-example">
                                <strong>ãƒªã‚¹ã‚¯ã‚’æ®‹ã™è¡Œç‚º</strong>
                                ${data.bad}
                                ${data.badImage ? `<div class="example-image-container"><img src="${data.badImage.startsWith('http://') || data.badImage.startsWith('https://') ? data.badImage : resolvePath('/' + data.badImage)}" alt="ãƒ€ãƒ¡ãªä¾‹" class="example-image" onclick="return false;" /></div>` : ''}
                            </div>
                            
                            <div class="section-title good-example-title">âœ… æ¨¡ç¯„ä¾‹ï¼ˆãƒªã‚¹ã‚¯å¯¾ç­–è¡Œç‚ºï¼šMISESAPOåŸºæº–ï¼‰</div>
                            <div class="example-box good-example">
                                <strong>ãƒªã‚¹ã‚¯ã‚’æ’é™¤ã—ä¾¡å€¤ã‚’æä¾›ã™ã‚‹è¡Œç‚º</strong>
                                ${data.good}
                                ${data.goodImage ? `<div class="example-image-container"><img src="${data.goodImage.startsWith('http://') || data.goodImage.startsWith('https://') ? data.goodImage : resolvePath('/' + data.goodImage)}" alt="æ¨¡ç¯„ä¾‹" class="example-image" onclick="return false;" /></div>` : ''}
                            </div>

                            <div class="qa-section">
                                <div class="section-title">ç ”ä¿®ãƒ»å–¶æ¥­ç”¨ Q&A</div>
                                <p><span class="qa-question">${data.qa1q}</span></p>
                                <p class="qa-answer">${data.qa1a}</p>
                                <p><span class="qa-question">${data.qa2q}</span></p>
                                <p class="qa-answer">${data.qa2a}</p>
                            </div>
                            <div class="edit-button-container" data-category-key="${getCategoryKey(data.category)}" data-index="${index}" style="display: none; margin-top: 30px; text-align: center; padding: 20px; border-top: 2px solid #eee;">
                                <button onclick="openEditModalInline('${getCategoryKey(data.category)}', ${index})" class="edit-button" style="background: #ff008c; color: white; border: none; padding: 12px 24px; border-radius: 5px; font-size: 16px; cursor: pointer; font-weight: bold;">
                                    <i class="fas fa-edit"></i> ç·¨é›†
                                </button>
                            </div>
                        </div>
                    `;

                    const pageDiv = document.createElement('div');
                    pageDiv.innerHTML = pageHtml.trim();
                    fragment.appendChild(pageDiv.firstChild);

                    // å…¨ã‚«ãƒ†ã‚´ãƒªã®ç›®æ¬¡ãƒªã‚¹ãƒˆã‚’ç”Ÿæˆ
                    if (data.category !== lastCategory) {
                        const separator = document.createElement('li');
                        separator.className = 'category-separator';
                        separator.textContent = `--- ${data.category} ---`;
                        indexListAll.appendChild(separator);
                        lastCategory = data.category;
                    }
                    const listItemAll = document.createElement('li');
                    const linkAll = document.createElement('a');
                    linkAll.href = '#';
                    linkAll.textContent = data.title;
                    linkAll.addEventListener('click', (e) => {
                        e.preventDefault();
                        showPage(`page-${pageIndex}`);
                    });
                    listItemAll.appendChild(linkAll);
                    indexListAll.appendChild(listItemAll);

                    // ã‚«ãƒ†ã‚´ãƒªåˆ¥ã®ç›®æ¬¡ãƒªã‚¹ãƒˆã‚’ç”Ÿæˆ
                    let targetList = null;
                    if (data.category === 'å¨æˆ¿è¨­å‚™') {
                        targetList = indexListKitchen;
                    } else if (data.category === 'ç©ºèª¿è¨­å‚™') {
                        targetList = indexListAircon;
                    } else if (data.category === 'ãƒ•ãƒ­ã‚¢') {
                        targetList = indexListFloor;
                    } else if (data.category === 'ãã®ä»–') {
                        targetList = indexListOther;
                    }

                    if (targetList) {
                        const listItem = document.createElement('li');
                        const link = document.createElement('a');
                        link.href = '#';
                        link.textContent = data.title;
                        link.addEventListener('click', (e) => {
                            e.preventDefault();
                            showPage(`page-${pageIndex}`);
                        });
                        listItem.appendChild(link);
                        targetList.appendChild(listItem);
                    }
                });

                contentDiv.appendChild(fragment);
            }

            // ã‚«ãƒ†ã‚´ãƒªã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
            function filterByCategory(category, event) {
                if (event) {
                    event.preventDefault();
                }
                currentCategory = category;
                
                // ã‚¿ãƒ–ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ã‚’æ›´æ–°
                document.querySelectorAll('.category-tab').forEach(tab => {
                    tab.classList.remove('active');
                });
                if (event && event.target) {
                event.target.classList.add('active');
                } else {
                    // eventãŒãªã„å ´åˆã¯ã€ãƒ†ã‚­ã‚¹ãƒˆã§æ¤œç´¢
                    document.querySelectorAll('.category-tab').forEach(tab => {
                        if ((category === 'all' && tab.textContent.includes('ã™ã¹ã¦')) ||
                            (category === 'å¨æˆ¿è¨­å‚™' && tab.textContent.includes('å¨æˆ¿è¨­å‚™')) ||
                            (category === 'ç©ºèª¿è¨­å‚™' && tab.textContent.includes('ç©ºèª¿è¨­å‚™')) ||
                            (category === 'ãƒ•ãƒ­ã‚¢' && tab.textContent.includes('ãƒ•ãƒ­ã‚¢')) ||
                            (category === 'ãã®ä»–' && tab.textContent.includes('ãã®ä»–'))) {
                            tab.classList.add('active');
                        }
                    });
                }
                
                // è©²å½“ã‚«ãƒ†ã‚´ãƒªã®ãƒªã‚¹ãƒˆãƒšãƒ¼ã‚¸ã‚’è¡¨ç¤º
                const listPageId = categoryListPageMap[category];
                if (listPageId) {
                    showPage(listPageId);
                }
            }

            // ãƒšãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹é–¢æ•°
            function showPage(pageId) {
                const pages = document.querySelectorAll('.manual-page');
                pages.forEach((page) => {
                    page.classList.remove('active');
                });
                
                currentPage = pageId;
                const targetPage = document.getElementById(pageId);
                if (targetPage) {
                    targetPage.classList.add('active');
                    // ã‚«ãƒ†ã‚´ãƒªã‚’æ›´æ–°ï¼ˆãƒªã‚¹ãƒˆãƒšãƒ¼ã‚¸ã®å ´åˆï¼‰
                    const pageCategory = targetPage.getAttribute('data-category');
                    if (pageCategory) {
                        currentCategory = pageCategory;
                        // ã‚¿ãƒ–ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ã‚’æ›´æ–°
                        document.querySelectorAll('.category-tab').forEach(tab => {
                            tab.classList.remove('active');
                            if ((pageCategory === 'all' && tab.textContent.includes('ã™ã¹ã¦')) ||
                                (pageCategory === 'å¨æˆ¿è¨­å‚™' && tab.textContent.includes('å¨æˆ¿è¨­å‚™')) ||
                                (pageCategory === 'ç©ºèª¿è¨­å‚™' && tab.textContent.includes('ç©ºèª¿è¨­å‚™')) ||
                                (pageCategory === 'ãƒ•ãƒ­ã‚¢' && tab.textContent.includes('ãƒ•ãƒ­ã‚¢')) ||
                                (pageCategory === 'ãã®ä»–' && tab.textContent.includes('ãã®ä»–'))) {
                                tab.classList.add('active');
                            }
                        });
                    } else {
                        // è©³ç´°ãƒšãƒ¼ã‚¸ã®å ´åˆã€ã‚«ãƒ†ã‚´ãƒªã‚’å–å¾—
                        const pageNum = parseInt(pageId.replace('page-', ''));
                        const pageData = manualData[pageNum - 1];
                        if (pageData) {
                            currentCategory = pageData.category;
                            // ã‚¿ãƒ–ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ã‚’æ›´æ–°
                            document.querySelectorAll('.category-tab').forEach(tab => {
                                tab.classList.remove('active');
                                if ((pageData.category === 'å¨æˆ¿è¨­å‚™' && tab.textContent.includes('å¨æˆ¿è¨­å‚™')) ||
                                    (pageData.category === 'ç©ºèª¿è¨­å‚™' && tab.textContent.includes('ç©ºèª¿è¨­å‚™')) ||
                                    (pageData.category === 'ãƒ•ãƒ­ã‚¢' && tab.textContent.includes('ãƒ•ãƒ­ã‚¢')) ||
                                    (pageData.category === 'ãã®ä»–' && tab.textContent.includes('ãã®ä»–'))) {
                                    tab.classList.add('active');
                                }
                            });
                        }
                    }
                }
                
                updateNavigation();
                // ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒˆãƒ«ã‚’æ›´æ–°
                const pageNum = parseInt(pageId.replace('page-', ''));
                if (!pageId.startsWith('page-0-') && manualData[pageNum - 1]) {
                    document.title = `${manualData[pageNum - 1].title} - MISESAPO æ¸…æƒåŸºæº–ãƒãƒ‹ãƒ¥ã‚¢ãƒ«`;
                } else {
                    document.title = "MISESAPO æ¸…æƒåŸºæº–ãƒãƒ‹ãƒ¥ã‚¢ãƒ«";
                }
                window.scrollTo(0, 0); // ãƒšãƒ¼ã‚¸åˆ‡ã‚Šæ›¿ãˆæ™‚ã«æœ€ä¸Šéƒ¨ã¸ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
            }

            // ç›®æ¬¡ãƒšãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹é–¢æ•°
            function showIndex() {
                const listPageId = categoryListPageMap[currentCategory];
                if (listPageId) {
                    showPage(listPageId);
                }
            }

            // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ã®çŠ¶æ…‹ã‚’æ›´æ–°
            function updateNavigation() {
                // ãƒªã‚¹ãƒˆãƒšãƒ¼ã‚¸ã®å ´åˆã¯å‰å¾Œãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–
                if (currentPage.startsWith('page-0-')) {
                    prevButton.disabled = true;
                    nextButton.disabled = true;
                    return;
                }
                
                // è©³ç´°ãƒšãƒ¼ã‚¸ã®å ´åˆã€åŒã˜ã‚«ãƒ†ã‚´ãƒªå†…ã®ãƒšãƒ¼ã‚¸ã‚’å–å¾—
                const currentPageNum = parseInt(currentPage.replace('page-', ''));
                const currentPageData = manualData[currentPageNum - 1];
                if (!currentPageData) {
                    prevButton.disabled = true;
                    nextButton.disabled = true;
                    return;
                }
                
                const category = currentPageData.category;
                const categoryPages = manualData
                    .map((data, index) => ({ data, index: index + 1 }))
                    .filter(item => item.data.category === category);
                
                const currentIndex = categoryPages.findIndex(item => item.index === currentPageNum);
                
                prevButton.disabled = currentIndex <= 0;
                nextButton.disabled = currentIndex >= categoryPages.length - 1;
            }

            // å‰å¾Œã¸ç§»å‹•ã™ã‚‹é–¢æ•°
            function navigate(direction) {
                // ãƒªã‚¹ãƒˆãƒšãƒ¼ã‚¸ã®å ´åˆã¯ä½•ã‚‚ã—ãªã„
                if (currentPage.startsWith('page-0-')) {
                    return;
                }
                
                const currentPageNum = parseInt(currentPage.replace('page-', ''));
                const currentPageData = manualData[currentPageNum - 1];
                if (!currentPageData) {
                    return;
                }
                
                const category = currentPageData.category;
                const categoryPages = manualData
                    .map((data, index) => ({ data, index: index + 1 }))
                    .filter(item => item.data.category === category);
                
                const currentIndex = categoryPages.findIndex(item => item.index === currentPageNum);
                const newIndex = currentIndex + direction;
                
                if (newIndex >= 0 && newIndex < categoryPages.length) {
                    showPage(`page-${categoryPages[newIndex].index}`);
                }
            }
            
            // ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚³ãƒ¼ãƒ—ã«å…¬é–‹
            window.filterByCategory = filterByCategory;
            window.showPage = showPage;
            window.showIndex = showIndex;
            window.navigate = navigate;
            window.updateNavigation = updateNavigation;
            window.manualData = manualData;
            window.currentPage = currentPage;
            window.currentCategory = currentCategory;
            window.prevButton = prevButton;
            window.nextButton = nextButton;

            // åˆæœŸåŒ–
            createManualPages();
            showIndex();
            
            // èªè¨¼ãƒã‚§ãƒƒã‚¯ã—ã¦ç·¨é›†ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º
            checkAuthAndShowEditButtons();
        }
        
        // èªè¨¼ãƒã‚§ãƒƒã‚¯ã—ã¦ç·¨é›†ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º
        async function checkAuthAndShowEditButtons() {
            if (!window.CleaningManualFirebase || !window.FirebaseAuth) {
                return;
            }
            
            try {
                const authResult = await window.CleaningManualFirebase.checkAuth();
                if (authResult.authenticated) {
                    // èªè¨¼æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿ç·¨é›†ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º
                    document.querySelectorAll('.edit-button-container').forEach(container => {
                        container.style.display = 'block';
                    });
                }
            } catch (error) {
                console.error('Auth check error:', error);
            }
        }
        
        // ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‹ã
        async function openEditModalInline(categoryKey, index) {
            // èªè¨¼ãƒã‚§ãƒƒã‚¯
            if (!window.CleaningManualFirebase || !window.FirebaseAuth) {
                alert('FirebaseãŒåˆ©ç”¨ã§ãã¾ã›ã‚“ã€‚ç®¡ç†ç”»é¢ã‹ã‚‰ç·¨é›†ã—ã¦ãã ã•ã„ã€‚');
                return;
            }
            
            const authResult = await window.CleaningManualFirebase.checkAuth();
            if (!authResult.authenticated) {
                alert('ç·¨é›†ã™ã‚‹ã«ã¯ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™ã€‚');
                window.location.href = 'signin.html';
                return;
            }
            
            // ã‚«ãƒ†ã‚´ãƒªåã‚’å–å¾—
            const categoryMap = {
                'kitchen': 'å¨æˆ¿è¨­å‚™',
                'aircon': 'ç©ºèª¿è¨­å‚™',
                'floor': 'ãƒ•ãƒ­ã‚¢',
                'other': 'ãã®ä»–'
            };
            const categoryName = categoryMap[categoryKey] || 'ãã®ä»–';
            
            // ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
            const categoryData = {
                'kitchen': kitchenData,
                'aircon': airconData,
                'floor': floorData,
                'other': otherData
            }[categoryKey] || [];
            
            const item = categoryData[index];
            if (!item) {
                alert('é …ç›®ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚');
                return;
            }
            
            // ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‹ãï¼ˆç®¡ç†ç”»é¢ã¨åŒã˜æ©Ÿèƒ½ã‚’ä½¿ç”¨ï¼‰
            // ä¸€æ™‚çš„ã«ç®¡ç†ç”»é¢ã®ç·¨é›†æ©Ÿèƒ½ã‚’å‘¼ã³å‡ºã™ã‹ã€åŒã˜ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’å®Ÿè£…
            window.location.href = `cleaning-manual-admin.html?category=${categoryKey}&index=${index}`;
        }
        
        // baseã‚¿ã‚°ã‚’ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒã§ç„¡åŠ¹åŒ–
        function setupBaseTag() {
            const isLocalDev = window.location.hostname === 'localhost' || 
                              window.location.hostname === '127.0.0.1' ||
                              window.location.hostname === '';
            
            if (isLocalDev) {
                const baseTag = document.getElementById('base-tag');
                if (baseTag) {
                    baseTag.href = '/';
                    console.log('[CleaningManual] Base tag set to / for local development');
                }
            }
        }
        
        // ãƒ˜ãƒƒãƒ€ãƒ¼ãƒ­ã‚´ã®ãƒ‘ã‚¹ã‚’è¨­å®š
        function setHeaderLogoPath() {
            const logoImg = document.getElementById('header-logo-img');
            if (logoImg) {
                const logoPath = resolvePath('/images/header-logo.jpg');
                logoImg.src = logoPath;
                console.log('[CleaningManual] Header logo path set to:', logoPath);
            }
        }
        
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚€
        document.addEventListener('DOMContentLoaded', () => {
            setupBaseTag();
            setHeaderLogoPath();
            loadManualData();
        });
        
    </script>
</body>
</html>
