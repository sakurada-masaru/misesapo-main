@layout('layouts.base')
@json('data/meta/sales_clients_title.json', $title)
@json('data/meta/sales_clients_body_class.json', $body_class)

<link rel="stylesheet" href="/css/sales-clients.css" />
<link rel="stylesheet" href="/css/staff-mypage-inline.css" />
<script src="/js/data_utils.js"></script>

<main id="main" class="container sales-clients">
  <div class="client-tabs">
    <button class="client-tab active" data-client-tab="list">
      <i class="fas fa-list"></i>
      <span>顧客一覧（アーカイブ）</span>
    </button>
  </div>

  <!-- 顧客一覧タブ -->
  <div class="client-tab-content active" data-client-content="list">
    <!-- 顧客一覧ビュー -->
    <div class="client-list-view" id="client-list-view">
      <!-- 検索バー -->
      <div class="client-search-section">
        <div class="client-search-box">
          <i class="fas fa-search"></i>
          <input type="text" placeholder="店舗名・企業名で検索..." id="client-list-search" />
        </div>
      </div>

      <!-- 統計 -->
      <div class="client-stats-row">
        <div class="client-stat-chip">
          <span class="client-stat-num" id="client-total-count">0</span>
          <span class="client-stat-label">全件</span>
        </div>
        <div class="client-stat-chip active">
          <span class="client-stat-num" id="client-active-count">0</span>
          <span class="client-stat-label">稼働中</span>
        </div>
      </div>

      <!-- フィルタータブ -->
      <div class="client-filter-tabs">
        <button class="client-filter-tab active" data-client-filter="all">すべて</button>
        <button class="client-filter-tab" data-client-filter="稼働中">稼働中</button>
        <button class="client-filter-tab" data-client-filter="休止">休止</button>
        <button class="client-filter-tab" data-client-filter="契約終了">終了</button>
      </div>

      <!-- 顧客リスト -->
      <div class="client-list-container" id="client-list-container">
        <div class="loading">読み込み中...</div>
      </div>
    </div>

    <!-- 顧客詳細ビュー -->
    <div class="client-detail-view" id="client-detail-view" style="display: none;">
      <div class="client-detail-header">
        <button type="button" class="client-detail-back-btn" onclick="showClientList()">
          <i class="fas fa-chevron-left"></i>
        </button>
        <h2 class="client-detail-title">顧客詳細</h2>
        <button type="button" class="client-detail-edit-btn" id="client-detail-edit-btn" onclick="editClientDetail()">
          <i class="fas fa-edit"></i>
        </button>
      </div>
      <div class="client-detail-content" id="client-detail-content">
        <div class="loading">読み込み中...</div>
      </div>
    </div>
  </div>

  <!-- クイックアクションドック -->
  <nav class="quick-actions-dock" aria-label="クイックアクション">
    <a href="/sales/mypage" class="dock-item">
      <i class="fas fa-user-circle"></i>
      <span>マイページ</span>
    </a>
    <a href="/sales/dashboard" class="dock-item is-active">
      <i class="fas fa-user-plus"></i>
      <span>顧客</span>
    </a>
    <a href="/sales/schedules" class="dock-item">
      <i class="fas fa-calendar"></i>
      <span>スケジュール</span>
    </a>
    <a href="/sales/estimates" class="dock-item">
      <i class="fas fa-briefcase"></i>
      <span>案件</span>
    </a>
  </nav>
</main>

<script src="/js/sales-clients.js"></script>
