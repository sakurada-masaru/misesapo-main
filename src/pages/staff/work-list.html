@layout('layouts.base')
@json('data/meta/staff_work_list_title.json', $title)
@json('data/meta/staff_work_list_body_class.json', $body_class)
<link rel="stylesheet" href="/css/admin-sidebar.css">
<link rel="stylesheet" href="/css/staff-work-list.css">
<!-- AWS SDKの読み込み -->
<script src="https://sdk.amazonaws.com/js/aws-sdk-2.1000.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/amazon-cognito-identity-js@6.3.0/dist/amazon-cognito-identity.min.js"></script>
<script src="/js/cognito_config.js"></script>
<script src="/js/cognito_auth.js"></script>
<script src="/js/client_auth.js"></script>
<script src="/js/admin-sidebar.js"></script>
<script src="/js/staff-work-list.js"></script>

@include('partials.staff-sidebar')

<main id="main" class="staff-page main-content">
  <div id="loading" class="loading-state">
    <div class="loading-spinner"></div>
    <p>読み込み中...</p>
  </div>

  <div id="error-message" class="error-state" style="display: none;">
    <i class="fas fa-exclamation-circle"></i>
    <p id="error-text">エラーが発生しました</p>
    <button class="btn btn-primary" onclick="location.reload()">再読み込み</button>
  </div>

  <div id="page-content" class="work-list-page" style="display: none;">
    <!-- ヘッダー -->
    <div class="page-header">
      <h1 class="page-title">
        <i class="fas fa-tasks"></i>
        作業一覧
      </h1>
      <div class="month-selector">
        <button class="btn btn-icon" id="prev-month">
          <i class="fas fa-chevron-left"></i>
        </button>
        <span class="current-month" id="current-month">2025年12月</span>
        <button class="btn btn-icon" id="next-month">
          <i class="fas fa-chevron-right"></i>
        </button>
      </div>
    </div>

    <!-- サマリーカード -->
    <div class="summary-cards">
      <div class="summary-card">
        <div class="summary-icon">
          <i class="fas fa-briefcase"></i>
        </div>
        <div class="summary-content">
          <span class="summary-value" id="total-work-count">0</span>
          <span class="summary-label">作業件数</span>
        </div>
      </div>
      <div class="summary-card">
        <div class="summary-icon completed">
          <i class="fas fa-check-circle"></i>
        </div>
        <div class="summary-content">
          <span class="summary-value" id="completed-work-count">0</span>
          <span class="summary-label">完了件数</span>
        </div>
      </div>
      <div class="summary-card">
        <div class="summary-icon pending">
          <i class="fas fa-clock"></i>
        </div>
        <div class="summary-content">
          <span class="summary-value" id="pending-work-count">0</span>
          <span class="summary-label">未完了件数</span>
        </div>
      </div>
    </div>

    <!-- フィルター -->
    <div class="filter-section">
      <div class="filter-group">
        <label for="status-filter">ステータス:</label>
        <select id="status-filter" class="filter-select">
          <option value="all">すべて</option>
          <option value="completed">完了</option>
          <option value="pending">未完了</option>
        </select>
      </div>
      <div class="filter-group">
        <label for="client-filter">顧客:</label>
        <input type="text" id="client-filter" class="filter-input" placeholder="顧客名で検索">
      </div>
    </div>

    <!-- 作業一覧テーブル -->
    <div class="work-list-container">
      <table class="work-list-table">
        <thead>
          <tr>
            <th>日付</th>
            <th>顧客名</th>
            <th>案件名</th>
            <th>作業内容</th>
            <th>ステータス</th>
            <th>操作</th>
          </tr>
        </thead>
        <tbody id="work-list-body">
          <!-- 作業データがここに動的に追加されます -->
        </tbody>
      </table>
      <div id="empty-state" class="empty-state" style="display: none;">
        <i class="fas fa-inbox"></i>
        <p>作業データがありません</p>
      </div>
    </div>
  </div>
</main>

