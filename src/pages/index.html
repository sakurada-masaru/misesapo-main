@layout('layouts.base')
@json('data/meta/index_title.json', $title)
@json('data/meta/index_body_class.json', $body_class)

<!-- Splash Screen -->
<div id="splash-screen" class="splash-screen">
  <img src="/images/logo_144x144.png" alt="ミセサポ" class="splash-logo" />
</div>

<!-- Main Content (hidden during splash) -->
<div id="page-content" class="page-content-hidden">
<!-- Hero (full-bleed) -->
<section class="hero">
  <img class="hero-img"
       src="/images/header-main.png"
       srcset="/images/hero-1200x400.svg 1200w, /images/header-main.png 1600w"
       sizes="100vw"
       alt="ミセサポ ヒーロー" />
  <div class="hero-overlay" aria-hidden="true"></div>
  <button class="carousel-btn left" aria-label="前へ">
    <i class="fas fa-chevron-left"></i>
  </button>
  <button class="carousel-btn right" aria-label="次へ">
    <i class="fas fa-chevron-right"></i>
  </button>
</section>

<!-- Category Tabs just below Hero -->
<section class="container section-gap-lg">
  <div class="tabs-row">
    <div class="tabs">
      <button class="tab active" data-category="all">全て</button>
      <button class="tab" data-category="厨房設備">厨房設備</button>
      <button class="tab" data-category="空調設備">空調設備</button>
      <button class="tab" data-category="フロア">フロア</button>
      <button class="tab" data-category="その他">その他</button>
    </div>
  </div>
  </section>

<!-- Main Content -->
<!-- Cart and Categories -->
<section class="container section-gap-lg">
  <div class="cart-row">
    <a class="btn btn-primary cart-button" href="/cart.html">
      <i class="fas fa-shopping-cart"></i>
      <span>カートを見る</span>
      <span class="cart-badge">0</span>
    </a>
  </div>

  <p class="muted text-center small">
    ※料金は目安となります。店舗の広さや業態、建物の状況により金額が前後する場合がございます。<br />
    クリックすると詳細入力画面が表示されます。
  </p>

  <!-- Services Grid -->
  @json('data/service_items.json', $service_items)
  <div class="service-grid">
    <!-- Service Items (generated) -->
    @foreach $service_items
    <article class="card-service" data-id="{{ id }}" data-category="{{ category }}">
      <div class="thumb">
        <img src="{{ image }}" alt="{{ title }}" loading="lazy" decoding="async" />
      </div>
      <div class="content">
        <h3>{{ title }}</h3>
        <p class="price">{{ price }}</p>
      </div>
    </article>
    @endforeach
  </div>
</section>

@include('partials.service_item_modal')
@include('partials.details_modal')
@include('partials.cart_added_modal')
<script>
  window.SERVICE_ITEMS = @jsonvar $service_items;
  // body_class と title は JSON で供給
</script>
</div>
<!-- End of page-content -->
