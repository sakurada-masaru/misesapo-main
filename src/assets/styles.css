/* Base */
* { box-sizing: border-box; }
html, body { height: 100%; }
:root {
  --bg: #f8fafc;
  --text: #494949;
  --muted: #6b7280;
  --border: #e5e7eb;
  --surface: #ffffff;
  --primary: #FF679C; /* Misesapo primary */
  --primary-600: #E35687; /* hover/darker */
  --alert: #ff3030;
}
/* Optional theme override (pink, alias of brand) */
.theme-pink {
  --primary: #FF679C;
  --primary-600: #E35687;
}
body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans JP", "Hiragino Kaku Gothic ProN", Meiryo, sans-serif;
  color: var(--text);
  background: var(--bg);
  min-height: 100svh;
  display: flex;
  flex-direction: column;
}
a { color: #1f2937; text-decoration: none; }
a:hover { color: #111827; }
/* Make images fluid by default */
img { max-width: 100%; height: auto; }
/* Focus visibility for keyboard users */
:focus-visible { outline: 3px solid #bfdbfe; outline-offset: 2px; }
/* Skip link */
.skip-link { position: absolute; left: -9999px; top: auto; width: 1px; height: 1px; overflow: hidden; }
.skip-link:focus { left: 16px; top: 12px; width: auto; height: auto; padding: 8px 12px; background: #111827; color: #fff; border-radius: 6px; z-index: 100; }
/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  * { animation: none !important; transition: none !important; }
}
/* Header */
.site-header {
  position: sticky;
  top: 0;
  z-index: 10;
  background: var(--surface);
  border-bottom: 1px solid #FF679C;
  box-shadow: 0 1px 2px rgba(0,0,0,0.03);
}
.has-hero .site-header { position: static; }
@media (max-width: 767.98px) {
  .site-header { display: none; }
}
.site-header .inner {
  max-width: 1440px;
  margin: 0 auto;
  display: flex;
  align-items: center;
  padding: 12px 16px;
  gap: 16px;
}
.site-header .inner .nav-left { gap: 16px; }
.site-header .inner.wide { max-width: none; width: 100%; margin: 0; }
.nav-left, .nav-right { display: flex; align-items: center; gap: 12px; }
.nav-left { flex: 0 0 auto; }
.spacer { flex: 1 1 auto; }
.nav-link {
  padding: 8px 10px;
  border-radius: 99px;
}
.nav-link:hover { background: #f3f4f6; }
.nav-link.primary {
  background: var(--primary);
  color: #ffffff;
}
.nav-link.primary:hover { background: var(--primary-600); color: #fff; }
.nav-link.active,
.nav-link[aria-current="page"] {
  background: #eef2ff;
  color: var(--primary);
  font-weight: 700;
}

/* Layout */
main { width: 100%; max-width: var(--container-lg); margin: 24px auto; padding: 0 16px; flex: 1 0 auto; }

/* Registration scoped variables */
.registration {
  --reg-max: 720px; /* shared across corporation pages */
  --reg-pad: 16px;
  --kv-label: 288px;  /* requested label width */
  --kv-gap: 16px;
}
.registration main.container { max-width: var(--reg-max); padding: 0 var(--reg-pad); width: 100%; }
.registration .kv { grid-template-columns: var(--kv-label) 1fr; gap: 8px var(--kv-gap); }
.container { max-width: var(--container-lg); margin: 0 auto; padding: 0 16px; }
.bg-white { --bg: #ffffff; }
.reg-logo-block { margin: 40px 0 12px; }
.reg-logo { height: 48px; width: auto; }
.caption-strong { font-weight: 700; margin-top: 8px; }
.section-gap-sm { margin-top: 16px; }
.section-gap-lg { margin-top: 24px; }
.actions-gap { margin-top: 16px; }
.actions-y-md { margin: 20px 0; }
.footer-note { padding: 24px 0; color: var(--muted); }
.card {
  background: var(--surface);
  border: none;
  border-radius: 0;
  padding: 20px;
  box-shadow: 0 1px 2px rgba(0,0,0,0.04);
}
.muted { color: var(--muted); }
.small { font-size: 0.9rem; }
.text-center { text-align: center; }
.alert { color: var(--alert); }
.pill { display: inline-block; padding: 2px 8px; font-size: 12px; font-weight: 700; border-radius: 999px; }
.pill-required { background: #ef4444; color: #fff; border-radius: 5px; }
.field { position: relative; }
.field .toggle-visibility { position: absolute; top: 50%; right: 8px; transform: translateY(-50%); border: 0; background: transparent; color: #6b7280; height: 100%; display: inline-flex; align-items: center; cursor: pointer; }
.field .toggle-visibility:hover { color: #374151; }

/* Buttons */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  height: 40px;
  padding: 0 14px;
  border-radius: 8px;
  border: 1px solid var(--border);
  background: var(--surface);
  color: var(--text);
  cursor: pointer;
  box-shadow: 0 1px 2px rgba(0,0,0,0.04);
  font-size: 14px;
  text-align: center;
}
.btn:hover { background: #f3f4f6; }
.btn-primary {
  border-color: transparent;
  background: var(--primary);
  color: #fff;
}
.btn-primary:hover { background: var(--primary-600); }
.btn-ghost { border-color: transparent; background: transparent; }
.btn-outline-primary { background: #fff; color: var(--primary); border-color: var(--primary); }
.btn-outline-primary:hover { background: #fff5f8; }
.btn-ghost-outline { border: 1px solid var(--border); background: #fff; }
.icon-btn { border: none; background: transparent; height: 36px; width: 36px; border-radius: 8px; display: inline-flex; align-items: center; justify-content: center; color: #4b5563; }
.icon-btn:hover { background: #f3f4f6; color: #111827; }

/* Add store (registration) */
.add-store-wrap { margin-top: 8px; text-align: left; }
.btn-add-store { border: none; background: transparent; color: var(--primary); font-size: 16px; font-weight: 700; text-decoration: underline; padding: 0; cursor: pointer; text-align: left; display: inline; }
.add-store-note { margin-left: 8px; font-size: 12px; color: #111827; }

/* Forms */
.label { display: block; font-size: 14px; margin-bottom: 6px; color: var(--text); }
.input, .select, .textarea {
  width: 100%;
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 10px 12px;
  background: var(--surface);
  color: var(--text);
}
.input-locked {
  background: #f3f4f6;
  color: #374151;
}
.input-locked::placeholder { color: #1f2937; opacity: 1; }
.input-locked:disabled { cursor: not-allowed; }
.input:focus, .select:focus, .textarea:focus { outline: 2px solid #dbeafe; border-color: #bfdbfe; }
.form-row { display: grid; gap: 12px; margin-bottom: 16px; }

/* Forms - mobile ergonomics */
@media (max-width: 767.98px) {
  .label { font-size: var(--fs-14); margin-bottom: 8px; }
  .input, .select, .textarea { padding: 12px 14px; font-size: var(--fs-16); }
  .btn, .btn-primary, .btn-ghost, .btn-outline-primary { height: 44px; font-size: var(--fs-14); }
  .btn-sm { height: 36px; font-size: var(--fs-13); }
  .form-row { grid-template-columns: 1fr; gap: 14px; }
  .kv { grid-template-columns: 1fr; }
  .registration .kv { grid-template-columns: 1fr; }
  .registration { --kv-label: auto; }
}

/* Inline error styles (opt-in) */
.field-error { color: #dc2626; font-size: 12px; margin-top: 6px; }
.input.error, .select.error, .textarea.error { border-color: #fca5a5; outline: 2px solid #fee2e2; }

/* Notices */
.warn { color: #e11d48; font-weight: 700; margin: 12px 0; text-align: center; font-size: 12px; }

/* Confirm section spacing */
.confirm-section { margin-top: 16px; }

/* Tables */
.table { width: 100%; border-collapse: separate; border-spacing: 0; background: var(--surface); border: 1px solid var(--border); border-radius: 10px; overflow: hidden; }
.table th, .table td { padding: 12px 14px; border-bottom: 1px solid var(--border); text-align: left; }
.table thead th { background: #f9fafb; font-weight: 600; font-size: 14px; color: #374151; }
.table tbody tr:nth-child(odd) { background: #fcfcfd; }
.table tbody tr:hover { background: #f5f7fb; }
/* Responsive table wrapper */
.table-wrap { width: 100%; overflow-x: auto; -webkit-overflow-scrolling: touch; }
.table-wrap .table { min-width: 640px; }

/* Layout utilities */
.grid { display: grid; gap: 16px; }
.grid.cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
.grid.cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
.stack { display: grid; gap: 8px; }
/* Flex row helper and stack-on-sm utility */
.row { display: flex; gap: 16px; align-items: center; }
.row.start { align-items: flex-start; }
.row.between { justify-content: space-between; }
.row.center { justify-content: center; }
.row.end { justify-content: flex-end; }
.items-baseline { align-items: baseline; }
.stack-on-sm { flex-wrap: wrap; }
@media (max-width: 767.98px) {
  .stack-on-sm { flex-direction: column; align-items: stretch; }
}

/* Helpers */
.badge { display: inline-block; padding: 2px 8px; font-size: 12px; border-radius: 999px; background: #eef2ff; color: #3730a3; border: 1px solid #e0e7ff; }
.hidden { display: none !important; }

/* Header brand */
.brand { font-weight: 700; font-size: 20px; color: var(--primary); display: inline-flex; align-items: center; }
.brand img { display: block; height: 32px; width: auto; }

/* Mobile nav */
.nav-toggle { display: none; }
@media (max-width: 767.98px) {
  .nav-toggle { display: inline-flex; }
}

/* Off-canvas (left) */
.offcanvas-overlay { position: fixed; inset: 0; background: rgba(0,0,0,.35); opacity: 0; pointer-events: none; transition: opacity .25s ease; z-index: 58; }
.offcanvas-overlay.open { opacity: 1; pointer-events: auto; }
.offcanvas { position: fixed; inset: 0 auto 0 0; width: 85vw; max-width: 420px; background: #fff; box-shadow: 8px 0 24px rgba(0,0,0,.12); border-right: 4px solid #ffd9e6; transform: translateX(-100%); opacity: 0; transition: transform .25s ease, opacity .25s ease; z-index: 59; display: flex; flex-direction: column; padding: 24px 16px;
  /* notebook-like grid backdrop */
  background-image:
    repeating-linear-gradient(to bottom, rgba(0,0,0,0.05) 0, rgba(0,0,0,0.05) 1px, transparent 1px, transparent 24px),
    repeating-linear-gradient(to right, rgba(0,0,0,0.03) 0, rgba(0,0,0,0.03) 1px, transparent 1px, transparent 24px);
  background-size: 100% 100%, 100% 100%;
  background-color: #fff;
}
.offcanvas.open { transform: translateX(0); opacity: 1; }
.offcanvas-title { margin: 0 0 20px; font-size: 20px; font-weight: 700; color: #1f2937; text-align: center; padding-bottom: 16px; border-bottom: 2px solid #e5e7eb; }
.offcanvas-nav { display: flex; flex-direction: column; overflow-y: auto; overflow-x: hidden; flex: 1; -webkit-overflow-scrolling: touch; padding-right: 8px; }
.offcanvas-nav::-webkit-scrollbar { width: 6px; }
.offcanvas-nav::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 3px; }
.offcanvas-nav::-webkit-scrollbar-thumb { background: #c1c1c1; border-radius: 3px; }
.offcanvas-nav::-webkit-scrollbar-thumb:hover { background: #a8a8a8; }
/* Sitemap in offcanvas */
.offcanvas-sitemap-section { margin-bottom: 24px; }
.offcanvas-sitemap-section:last-child { margin-bottom: 0; }
.offcanvas-sitemap-section-title { font-size: 13px; font-weight: 600; color: #6b7280; margin: 0 0 12px; padding-bottom: 8px; border-bottom: 1px solid #e5e7eb; text-transform: uppercase; letter-spacing: 0.5px; }
.offcanvas-sitemap-list { list-style: none; margin: 0; padding: 0; display: flex; flex-direction: column; gap: 4px; }
.offcanvas-sitemap-list li { margin: 0; padding: 0; }
.offcanvas-sitemap-link { display: block; padding: 10px 12px; font-size: 14px; color: #374151; text-decoration: none; border-radius: 6px; transition: all 0.2s; line-height: 1.4; position: relative; }
.offcanvas-sitemap-link:hover { background: #f3f4f6; color: var(--primary); padding-left: 16px; }
.offcanvas-sitemap-link::before { content: ''; position: absolute; left: 0; top: 50%; transform: translateY(-50%); width: 0; height: 0; border-top: 4px solid transparent; border-bottom: 4px solid transparent; border-left: 6px solid var(--primary); opacity: 0; transition: opacity 0.2s; }
.offcanvas-sitemap-link:hover::before { opacity: 1; }
@media (prefers-reduced-motion: reduce) {
  .offcanvas, .offcanvas-overlay { transition: none; }
}

/* Splash Screen */
.splash-screen {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: #ffffff;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10000;
  opacity: 1;
  transition: opacity 0.5s ease-out;
}
.splash-screen.hidden {
  opacity: 0;
  pointer-events: none;
}
.splash-logo {
  width: 144px;
  height: 144px;
  animation: splash-fade-in 0.8s ease-out, splash-pulse 1.5s ease-in-out 0.8s infinite;
}
@keyframes splash-fade-in {
  from {
    opacity: 0;
    transform: scale(0.8);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
@keyframes splash-pulse {
  0%, 100% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.05);
    opacity: 0.9;
  }
}
.page-content-hidden {
  opacity: 0;
  visibility: hidden;
}
@media (min-width: 768px) {
  .splash-screen {
    display: none !important;
  }
}
@media (prefers-reduced-motion: reduce) {
  .splash-logo {
    animation: none;
  }
  .splash-screen {
    transition: none;
  }
}

/* Edge swipe hint (mobile) */
.edge-swipe-hint { position: fixed; left: 4px; top: 50%; transform: translateY(-50%); width: 0; height: 0; border-top: 8px solid transparent; border-bottom: 8px solid transparent; border-left: 12px solid #FF679C; opacity: .6; pointer-events: none; z-index: 30; display: none; }
@media (max-width: 767.98px) { .edge-swipe-hint { display: block; } }

/* Active nav per page (no template params needed) */
.page-orders .site-header a[href="/index.html"] { color: var(--primary); font-weight: 700; background: transparent; }

/* Hero section */
.hero { position: relative; width: 100vw; margin-left: calc(50% - 50vw); margin-right: calc(50% - 50vw); margin-top: 0; margin-bottom: 0; padding: 0; text-align: center; color: #fff; overflow: hidden; }
.hero-img { position: static; display: block; width: 100%; max-width: 1600px; height: auto; margin: 0 auto; object-fit: contain; object-position: center; }
@media (max-width: 767.98px) {
  .hero-img { max-width: 100%; }
}
@media (min-width: 1280px) {
  /* PCではフルHDまで許容（元画像よりは拡大しない） */
  .hero-img { max-width: 1920px; }
}

/* Signup page tweaks */
.signup-head { padding: 32px 0 8px; }
.signup-head h1 { font-size: 22px; font-weight: 800; color:#1f2937; }
.signup-sub { color: var(--muted); margin-top: 6px; }
.signup-options { padding: 16px 0 24px; }

/* Mypage */
.page-mypage main { max-width: 1200px; }
.breadcrumb { font-size: 12px; color: var(--muted); margin: 12px 0; display: flex; align-items: center; gap: 6px; }
.breadcrumb a { color: var(--muted); }
.breadcrumb a:hover { color: #374151; text-decoration: underline; }
.breadcrumb .sep { color: #9ca3af; }
.mypage { }
.page-title { font-size: 22px; font-weight: 800; color:#1f2937; margin: 8px 0 16px; }
.page-actions { text-align: center; margin-top: 32px; }
.btn-lg { height: 44px; padding: 0 24px; font-size: 14px; }
.mypage-grid { display: flex; gap: 24px; margin-top: 24px; align-items: flex-start; }
.mypage-main { flex: 2 1 640px; }
.mypage-side { flex: 1 1 320px; }
@media (max-width: 992px) { .mypage-grid { flex-direction: column; } }

/* Submission prompt */
.submission-card { background: #fff5f8; border: 1px solid #ffd9e6; border-radius: 8px; padding: 24px; }
.submission-head { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
.submission-title { font-weight: 700; display: inline-flex; align-items: center; gap: 8px; }
.submission-title .fa-circle-info { color: var(--primary); }
.btn-sm { height: 32px; padding: 0 12px; font-size: 12px; }
.submission-note-strong { font-weight: 700; color: var(--primary); }
.submission-note { font-size: 12px; color: #555; line-height: 1.6; }
.submission-list { font-size: 12px; color: #555; margin: 8px 0 0; padding-left: 20px; }

/* Message list */
.message-item { border-bottom: 1px solid var(--border); padding: 16px 0; }
.message-item:last-child { border-bottom: none; padding-bottom: 0; }
.message-tag { background: var(--primary); color: #fff; font-size: 10px; padding: 2px 6px; border-radius: 4px; font-weight: 700; margin-right: 8px; }
.message-date { font-size: 12px; color: #888; margin-right: 16px; }
.message-text { font-size: 13px; }

/* Link list */
.link-list .shop-name { text-align: center; font-size: 12px; color: #888; padding-bottom: 16px; margin-bottom: 16px; border-bottom: 1px solid var(--border); }
.link-item { display: flex; justify-content: space-between; align-items: center; padding: 16px 0; font-weight: 500; }
.link-item .fa-chevron-right { color: #9ca3af; }

/* Info page specific */
.info-table { border-collapse: collapse; width: 100%; }
.info-table tr { border-bottom: 1px solid #f5f5f5; }
.info-table th, .info-table td { padding: 16px 8px; text-align: left; vertical-align: top; }
.info-table th { font-weight: 500; color: #555; width: 140px; white-space: nowrap; position: relative; padding-left: 18px; }
.info-table th::before { content: ''; position: absolute; left: 0; top: 50%; transform: translateY(-50%); width: 4px; height: 18px; background: var(--primary); border-radius: 2px; }
.edit-link-wrap { text-align: right; margin-top: 12px; }
.edit-link { color: var(--primary); font-size: 13px; font-weight: 600; }

.simple-card-link { display: flex; justify-content: space-between; align-items: center; }
.simple-card-link-text { font-size: 16px; font-weight: 700; color:#1f2937; }
.simple-card-link-anchor { color: var(--primary); font-size: 13px; font-weight: 600; }

.store-list .card { margin-bottom: 16px; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 16px; }
.store-info h3 { font-size: 16px; margin: 0 0 8px; }
.store-info p { font-size: 13px; color: #555; line-height: 1.6; margin: 0; }
.store-info p span { margin-right: 16px; }
.store-link { color: var(--primary); font-size: 13px; font-weight: 600; white-space: nowrap; }
.add-store-link { display: inline-flex; align-items: center; gap: 8px; color: var(--primary); font-size: 16px; font-weight: 600; margin-top: 8px; }

/* Inquiry page */
.contact-section { max-width: 100%; }
.contact-info { background: #f7f7f7; border-radius: 8px; padding: 24px; margin-bottom: 24px; text-align: center; font-size: 13px; color: #555; line-height: 1.7; }
.contact-phone { display: inline-flex; align-items: center; gap: 8px; font-size: 18px; font-weight: 700; color: #1f2937; margin-top: 8px; }
.contact-form .form-group { margin-bottom: 16px; }
.contact-form .form-note { font-size: 12px; color: #6b7280; margin-top: 6px; }
.btn-block { width: 100%; max-width: 320px; }

/* Info list */
.info-item { display: flex; justify-content: space-between; align-items: center; padding: 16px 0; border-bottom: 1px solid var(--border); }
.info-item:last-child { border-bottom: none; }
.info-item-label { display: inline-flex; align-items: center; gap: 8px; }
.info-item-label .fa-circle-info { color: var(--primary); }
.info-item-value { font-size: 12px; color: var(--primary); font-weight: 700; }

/* Radio group */
.radio-group { display: flex; flex-wrap: wrap; gap: 24px; }
.radio-label { display: inline-flex; align-items: center; gap: 8px; cursor: pointer; }
.radio-label input[type="radio"] { display: none; }
.radio-custom { width: 18px; height: 18px; border: 2px solid #ccc; border-radius: 999px; display: inline-flex; align-items: center; justify-content: center; }
.radio-custom::after { content: ''; width: 10px; height: 10px; background: var(--primary); border-radius: 999px; transform: scale(0); transition: transform .2s; }
.radio-label input:checked + .radio-custom { border-color: var(--primary); }
.radio-label input:checked + .radio-custom::after { transform: scale(1); }

/* Calendar */
.calendar-head { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
.calendar-title { font-size: 18px; font-weight: 700; }
.calendar-nav { color: #888; }
.calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); text-align: center; }
.calendar-cell { padding: 8px 0; font-size: 12px; }
.calendar-day-name { color: #888; font-weight: 700; }
.calendar-date { position: relative; }
.calendar-date.disabled { color: #cbd5e1; }
.calendar-date.has-event::after { content: ''; position: absolute; bottom: 4px; left: 50%; transform: translateX(-50%); width: 6px; height: 6px; border-radius: 50%; }
.calendar-date.event-visit::after { background: var(--primary); }
.calendar-date.event-end::after { background: #aaa; }
.calendar-legend { margin-top: 16px; display: flex; justify-content: end; font-size: 12px; color: #555; gap: 16px; }
.legend-item { display: inline-flex; align-items: center; gap: 6px; }
.legend-dot { width: 8px; height: 8px; border-radius: 999px; display: inline-block; }
.legend-dot.visit { background: var(--primary); }
.legend-dot.end { background: #aaa; }

/* Empty state */
.empty-state { background: #f7f7f7; border: 1px solid var(--border); color: #9ca3af; text-align: center; padding: 40px 20px; border-radius: 8px; }

/* Carousel buttons */
.carousel-btn { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(255,255,255,0.85); border: 1px solid var(--border); height: 36px; width: 36px; border-radius: 999px; display: inline-flex; align-items: center; justify-content: center; color: #4b5563; box-shadow: 0 2px 8px rgba(0,0,0,0.12); }
.carousel-btn:hover { background: #ffffff; }
.carousel-btn.left { left: 12px; }
.carousel-btn.right { right: 12px; }

/* Cart row */
.cart-row { display: flex; justify-content: end; margin-bottom: 24px; }
@media (max-width: 767.98px) { .cart-row { display: none; } }
.cart-button { padding: 0 16px; height: 40px; border-radius: 20px; }
.cart-badge { background: #fff; color: var(--primary); border-radius: 999px; width: 22px; height: 22px; display: inline-flex; align-items: center; justify-content: center; font-size: 12px; font-weight: 700; box-shadow: inset 0 0 0 1px rgba(0,0,0,0.06); }

/* Tabs */
.tabs-row { display: flex; justify-content: center; margin-bottom: 16px; }
.tabs { display: inline-flex; gap: 8px; background: transparent; padding: 0; border-radius: 8px; }
.tab { padding: 8px 12px; border-radius: 6px; background: #ffffff; border: 1px solid var(--border); color: #374151; font-weight: 600; cursor: pointer; }
.tab:hover { background: #fff5f8; border-color: #ffd9e6; }
.tab.active { background: var(--primary); color: #ffffff; border-color: var(--primary); }

/* Services grid */
.service-grid { display: grid; gap: 16px; grid-template-columns: repeat(2, 211px); justify-content: center; }
/* Smartphone */
@media (max-width: 767.98px) {
  .service-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 12px; justify-content: center; justify-items: center; }
  .card-service { width: 100%; max-width: 180px; }
}
@media (min-width: 640px) { .service-grid { grid-template-columns: repeat(3, 211px); } }
@media (min-width: 768px) { .service-grid { grid-template-columns: repeat(4, 211px); } }
@media (min-width: 1024px) { .service-grid { grid-template-columns: repeat(5, 211px); } }

/* Service card */
.card-service { background: #fff; border: 1px solid var(--border); border-radius: 10px; overflow: hidden; box-shadow: 0 1px 2px rgba(0,0,0,0.06); cursor: pointer; transition: box-shadow .2s ease, transform .2s ease; width: 211px; }
.card-service:hover { box-shadow: 0 8px 22px rgba(0,0,0,0.12); transform: translateY(-1px); }
.card-service .thumb { width: 100%; aspect-ratio: 211 / 98; overflow: hidden; background: #f3f4f6; }
.card-service .thumb img { width: 100%; height: 100%; object-fit: cover; display: block; }
.card-service .content { padding: 12px; text-align: center; }
.card-service h3 { margin: 0; font-size: 12px; font-weight: 600; color: #1f2937; }
.card-service .price { margin: 6px 0; color: var(--primary); font-weight: 700; }

/* Footer */
.site-footer { background: #ffffff; border-top: 1px solid var(--border); margin-top: 24px; }

/* -------- Utilities -------- */
.wrap { max-width: 640px; margin: 0 auto; }
.mt-8 { margin-top: 8px; }
.mt-12 { margin-top: 12px; }
.mt-16 { margin-top: 16px; }
.mb-16 { margin-bottom: 16px; }
.my-16 { margin-top: 16px; margin-bottom: 16px; }
.hr { height: 1px; background: var(--border); margin: 16px 0; }
/* Simple utilities for inline style reduction */
.max-720 { max-width: 720px; }
.mx-auto { margin-left: auto; margin-right: auto; }
.mt-12 { margin-top: 12px; }
.mt-8 { margin-top: 8px; }
.mt-16 { margin-top: 16px; }
.mt-24 { margin-top: 24px; }
.mt-40 { margin-top: 40px; }
.mb-8 { margin-bottom: 8px; }
.mb-16 { margin-bottom: 16px; }
.mb-12 { margin-bottom: 12px; }
.my-24 { margin-top: 24px; margin-bottom: 24px; }
.p-16 { padding: 16px; }
.p-24 { padding: 24px; }
.px-16 { padding-left: 16px; padding-right: 16px; }
.px-32 { padding-left: 32px; padding-right: 32px; }
.py-24 { padding-top: 24px; padding-bottom: 24px; }
.text-13 { font-size: 13px; }
.text-14 { font-size: 14px; }
.text-20 { font-size: 20px; }
.text-24 { font-size: 24px; }
.fw-700 { font-weight: 700; }
.fw-800 { font-weight: 800; }
.text-gray-900 { color: #1f2937; }
.h-48 { height: 48px; width: auto; }
.m-0 { margin: 0; }
.mt-0 { margin-top: 0; }
.justify-center { justify-items: center; }
.justify-end { justify-items: end; }
/* Spacing utilities extended */
.gap-8 { gap: 8px; }
.gap-12 { gap: 12px; }
.gap-16 { gap: 16px; }
.gap-24 { gap: 24px; }
.p-16 { padding: 16px; }
.p-24 { padding: 24px; }
.px-16 { padding-left: 16px; padding-right: 16px; }
.py-16 { padding-top: 16px; padding-bottom: 16px; }

/* Headings & texts */
.lead { font-size: 22px; font-weight: 800; color:#111827; letter-spacing: .02em; }
.sub  { font-size: 12px; color:#6b7280; }
.msg  { font-size: 14px; color:#374151; line-height: 1.9; }
.note { font-size: 12px; color:#6b7280; }

/* Steps indicator (registration) */
.steps { display: flex; gap: 48px; justify-content: center; align-items: center; margin: 16px 0 8px; }
.step { display: grid; justify-items: center; gap: 8px; font-size: 12px; color: #6b7280; }
.step .dot { width: 28px; height: 28px; border-radius: 999px; background: #ffe1ee; color: var(--primary); font-weight: 800; display: grid; place-items: center; }
.step.active .dot { background: var(--primary); color:#fff; }
.section-title { font-weight: 800; color: #1f2937; font-size: 16px; }

/* Forms (registration pages) */
.postal { display: inline-grid; grid-template-columns: 80px 16px 96px; align-items: center; gap: 6px; }
.store-block { border-bottom: 1px solid var(--border); padding-bottom: 16px; margin-bottom: 16px; display: grid; gap: 16px; }
.radios { display: flex; gap: 16px; align-items: center; flex-wrap: wrap; }

/* Confirmation (corporation3) */
.kv { display: grid; grid-template-columns: 288px 1fr; gap: 8px 16px; align-items: start; }
.box { border: 1px solid var(--border); border-radius: 8px; padding: 16px; background: #fff; }

/* Complete page (shared) */
.complete-container { max-width: 640px; margin: 0 auto; }
.complete-brand { margin: 36px 0 8px; }
.complete-title { font-size: 22px; font-weight: 800; color:#111827; margin-top: 8px; letter-spacing: .02em; }
.complete-illustration { display: block; margin: 8px auto 0; max-width: 100%; height: auto; }
.complete-head { margin: 18px 0 12px; }
.complete-head-spacious { margin-top: 100px; margin-bottom: 40px; }
.complete-message { font-size: 14px; color:#374151; line-height: 1.9; margin-top: 16px; text-align: center; position: relative; left: 50%; transform: translateX(-50%); width: 140%; }
.complete-support { margin: 14px 0 6px; }
.callout { background: #f9fafb; border: none; border-radius: 8px; padding: 10px 12px; color:#374151; font-size: 12px; }
.complete-primary-actions { margin-top: 16px; text-align: center; }
.complete-secondary-actions { display: flex; gap: 12px; justify-content: center; flex-wrap: wrap; margin-top: 16px; }
.btn-w-240 { width: 240px; }
.footer-note { padding: 24px 0; color:#6b7280; }
.callout { background: #f9fafb; border: none; border-left: none; border-radius: 8px; padding: 10px 12px; color:#374151; font-size: 12px; }

/* Modal */
.modal { position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 50; display: none; align-items: center; justify-content: center; padding: 10vh 16px; }
.modal.open { display: flex; }
.modal-dialog { background: #fff; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.25); width: 100%; max-width: 640px; max-height: 80vh; overflow: hidden; position: relative; display: flex; flex-direction: column; }
.modal-hero { position: relative; }
.modal-hero-img { width: 100%; height: 160px; object-fit: cover; display: block; }
@media (min-width: 768px) { .modal-hero-img { height: 180px; } }
.modal-close { position: absolute; top: 12px; right: 12px; border: none; background: rgba(0,0,0,0.3); color: #fff; border-radius: 999px; width: 32px; height: 32px; display: inline-flex; align-items: center; justify-content: center; cursor: pointer; }
.modal-close:hover { background: rgba(0,0,0,0.5); }
.modal-close.close-pink { background: var(--primary); color: #fff; }
.modal-close.close-pink:hover { background: var(--primary-600); }
.modal-body { padding: 24px; flex: 1 1 auto; overflow: auto; }
@media (min-width: 768px) { .modal-body { padding: 32px; } }
/* .modal-scroll is obsolete; body scrolls */
.modal-title { font-size: 20px; font-weight: 700; color: #1f2937; margin: 0; }
.divider { border: 0; border-top: 1px solid var(--border); margin: 16px 0 24px; }
.section-title { font-weight: 600; color: #374151; margin: 12px 0 12px; font-size: 14px; }
.stack.sm { display: grid; gap: 8px; }
.stack.lg { display: grid; gap: 24px; }
.choice-row { display: flex; align-items: center; gap: 12px; cursor: pointer; }
.radio { width: 18px; height: 18px; accent-color: var(--primary); }
.choice-card { display: flex; align-items: center; gap: 12px; padding: 12px; border: 1px solid var(--border); border-radius: 10px; cursor: pointer; transition: border-color .2s ease, background .2s ease; }
.choice-card:hover { border-color: var(--primary); background: #fff5f8; }
.thumb-211 { width: 211px; height: 98px; object-fit: cover; border-radius: 8px; display: block; }
.actions { display: grid; gap: 12px; margin-top: 24px; justify-items: center; }
.btn-full { width: 100%; }
.btn-fixed { width: 208px; }
.btn-round { border-radius: 999px; }
.modal-headline { display: flex; align-items: center; justify-content: space-between; gap: 12px; }
.price-line { display: inline-flex; align-items: baseline; gap: 6px; }
.price-strong { color: var(--primary); font-weight: 800; font-size: 24px; }
.grid-2-4 { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 16px; }
@media (min-width: 768px) { .grid-2-4 { grid-template-columns: repeat(4, minmax(0, 1fr)); } }
.item-card .item-name { margin: 8px 0 4px; font-weight: 600; font-size: 13px; text-align: center; }
.avatar-round { width: 96px; height: 96px; border-radius: 999px; object-fit: cover; display: block; margin: 0 auto; }
.qty { display: inline-flex; align-items: center; gap: 4px; font-size: 13px; }
.btn-qty { height: 28px; padding: 0 10px; }
.qty-val { display: inline-block; min-width: 24px; text-align: center; padding: 4px 6px; border: 1px solid var(--border); border-radius: 6px; background: #fff; }
.unit { margin-left: 6px; }
.cart-grid { display: grid; grid-template-columns: 1fr; }
@media (min-width: 768px) { .cart-grid { grid-template-columns: 1fr 1fr; } }

/* Cart added subtotal dots */
.subtotal-dots { display: inline-flex; gap: 6px; vertical-align: middle; margin-left: 6px; }
.subtotal-dots .dot { width: 10px; height: 10px; border-radius: 999px; background: #e5e7eb; display: inline-block; }

/* Cart Added Modal specific (tree-scoped) */
#cart-added-modal .modal-dialog { max-width: 640px; }
#cart-added-modal .cart-added-title { display: flex; align-items: center; gap: 8px; margin: 0; padding: 24px 32px; }
#cart-added-modal .cart-added-title .fa-check-circle { color: var(--primary); }
#cart-added-modal .cart-grid { padding: 0 32px 24px; align-items: start; }
#cart-added-modal .cart-grid > div:first-child { padding-left: 32px; }
#cart-added-modal .cart-grid .row { display: flex; flex-direction: column; align-items: flex-start; gap: 8px; text-align: left; }
#cart-added-modal .cart-grid .row #cart-added-item-title { text-align: left; }
#cart-added-modal .cart-grid .row #cart-added-item-details { text-align: left; }
#cart-added-modal .actions { justify-items: start; }
#cart-added-modal #cart-added-item-image { width: 80px; height: 80px; margin: 0; }
#cart-added-modal #cart-added-item-title { margin: 0; font-weight: 700; font-size: 16px; }
#cart-added-modal #cart-added-item-details { margin-top: 4px; }
#cart-added-modal .cart-grid > div:last-child > h3 { margin: 0; font-weight: 600; color: #374151; }
#cart-added-modal .cart-grid > div:last-child > p { margin: 6px 0 0; font-weight: 700; font-size: 26px; color: #1f2937; }
#cart-added-modal .cart-grid > div:last-child .actions { margin-top: 20px; }
#continue-shopping-btn { border-color: var(--primary); color: var(--primary); }

/* Details Modal specific (tree-scoped) */
#details-modal .section-title { font-size: 16px; }
#details-modal .modal-body .section-title + .textarea { margin-top: 12px; }
#details-modal .actions .small { color: var(--primary); font-weight: 600; }

/* Tokens extension and breakpoints */
:root {
  /* Spacing scale */
  --space-0: 0;
  --space-1: 4px;
  --space-2: 8px;
  --space-3: 12px;
  --space-4: 16px;
  --space-5: 20px;
  --space-6: 24px;
  --space-8: 32px;
  --space-10: 40px;
  /* Radius */
  --radius-sm: 6px;
  --radius-md: 8px;
  --radius-lg: 12px;
  --radius-round: 999px;
  /* Typography scale */
  --fs-12: 12px;
  --fs-13: 13px;
  --fs-14: 14px;
  --fs-16: 16px;
  --fs-18: 18px;
  --fs-20: 20px;
  --fs-22: 22px;
  /* Container widths */
  --container-sm: 640px;
  --container-md: 768px;
  --container-lg: 1440px;
  --container-xl: 1280px;
  /* Breakpoints */
  --bp-xs: 480px;
  --bp-sm: 640px;
  --bp-md: 768px;
  --bp-lg: 1024px;
  --bp-xl: 1280px;
}

/* Responsive containers */
@media (max-width: 1023.98px) {
  main, .container { max-width: var(--container-md); }
}
@media (max-width: 767.98px) {
  main, .container { max-width: var(--container-sm); padding-left: 10px; padding-right: 10px; }
}

/* Visibility utilities */
.hide-sm { display: initial; }
.show-sm { display: none; }
@media (max-width: 767.98px) {
  .hide-sm { display: none !important; }
  .show-sm { display: initial !important; }
}

/* Password Protection Modal */
.password-protection-modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 9999;
  display: none;
  align-items: center;
  justify-content: center;
  background: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(4px);
}

.password-protection-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.6);
}

.password-protection-dialog {
  position: relative;
  z-index: 10000;
  width: 90%;
  max-width: 400px;
  background: var(--surface);
  border-radius: 16px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
  overflow: hidden;
}

.password-protection-content {
  padding: 32px 24px;
  text-align: center;
}

.password-protection-logo {
  width: 80px;
  height: 80px;
  margin: 0 auto 16px;
  display: block;
}

.password-protection-title {
  font-size: 24px;
  font-weight: 700;
  color: var(--text);
  margin: 0 0 12px;
}

.password-protection-message {
  font-size: 14px;
  color: var(--muted);
  margin: 0 0 24px;
  line-height: 1.6;
}

.password-protection-form {
  margin-top: 24px;
}

.password-protection-field {
  position: relative;
  margin-bottom: 16px;
}

.password-protection-input {
  width: 100%;
  padding: 12px 48px 12px 16px;
  font-size: 16px;
  border: 2px solid var(--border);
  border-radius: 8px;
  background: var(--surface);
  color: var(--text);
  transition: border-color 0.2s;
}

.password-protection-input:focus {
  outline: none;
  border-color: var(--primary);
}

.password-protection-toggle {
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  color: var(--muted);
  cursor: pointer;
  padding: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: color 0.2s;
}

.password-protection-toggle:hover {
  color: var(--text);
}

.password-protection-error {
  color: var(--alert);
  font-size: 14px;
  margin-bottom: 16px;
  text-align: left;
  padding: 8px 12px;
  background: #fee;
  border-radius: 6px;
  border: 1px solid #fcc;
}

.password-protection-submit {
  width: 100%;
  margin-top: 8px;
}

@media (max-width: 767.98px) {
  .password-protection-dialog {
    width: 95%;
    margin: 16px;
  }
  
  .password-protection-content {
    padding: 24px 20px;
  }
  
  .password-protection-title {
    font-size: 20px;
  }
}
