# èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã®åˆ†é›¢å®Œäº†

## âœ… å®Ÿè£…å®Œäº†

### èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã®åˆ†é›¢
- **ãŠå®¢æ§˜ï¼ˆCustomerï¼‰**: Firebase Authentication
- **å¾“æ¥­å“¡ï¼ˆWorkerï¼‰**: AWS Cognito

## ğŸ“‹ å®Ÿè£…å†…å®¹

### 1. AWS Cognito User Pool
- **User Pool ID**: `ap-northeast-1_EDKElIGoC`
- **Client ID**: `25abe85ibm5hn6rrsokd5jssb5`
- **èªè¨¼æ–¹æ³•**: ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ + ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰
- **ã‚«ã‚¹ã‚¿ãƒ å±æ€§**: `name`, `role`, `department`

### 2. å¾“æ¥­å“¡ç”¨ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸
- **ãƒšãƒ¼ã‚¸**: `/staff/signin.html`
- **èªè¨¼**: AWS Cognito
- **ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ**: ãƒ­ãƒ¼ãƒ«ã«å¿œã˜ã¦é©åˆ‡ãªãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã¸

### 3. ç®¡ç†ç”»é¢ã§ã®å¾“æ¥­å“¡ç™»éŒ²
- **ãƒšãƒ¼ã‚¸**: `/admin/users/index.html`
- **å‡¦ç†**:
  1. AWS Cognitoã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆ
  2. DynamoDBã®`workers`ãƒ†ãƒ¼ãƒ–ãƒ«ã«ä¿å­˜
  3. Cognito Subã‚’ç´ä»˜ã‘

### 4. ãƒ‡ãƒ¼ã‚¿æ§‹é€ 

#### DynamoDB `workers`ãƒ†ãƒ¼ãƒ–ãƒ«
```json
{
  "id": "W1764552147000",
  "cognito_sub": "abc123...",  // Cognito User Subï¼ˆå¾“æ¥­å“¡ç”¨ï¼‰
  "firebase_uid": "def456...",  // Firebase UIDï¼ˆãŠå®¢æ§˜ç”¨ã€å¾Œæ–¹äº’æ›æ€§ã®ãŸã‚æ®‹ã™ï¼‰
  "email": "worker@example.com",
  "name": "å¾“æ¥­å“¡å",
  "role": "staff",
  "department": "æ¸…æƒå“¡",
  "status": "active"
}
```

## ğŸ”„ ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ãƒ­ãƒ¼

### ãŠå®¢æ§˜ï¼ˆCustomerï¼‰
```
1. /signin.html ã§ãƒ­ã‚°ã‚¤ãƒ³
2. Firebase Authenticationã§èªè¨¼
3. role: 'customer' ã§å›ºå®š
4. /customers/dashboard.html ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆï¼ˆå°†æ¥çš„ã«å®Ÿè£…ï¼‰
```

### å¾“æ¥­å“¡ï¼ˆWorkerï¼‰
```
1. /staff/signin.html ã§ãƒ­ã‚°ã‚¤ãƒ³
2. AWS Cognitoã§èªè¨¼
3. DynamoDBã‹ã‚‰ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å–å¾—ï¼ˆCognito Subã§æ¤œç´¢ï¼‰
4. ãƒ­ãƒ¼ãƒ«ã«å¿œã˜ã¦ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ:
   - staff â†’ /staff/dashboard.html
   - sales â†’ /sales/dashboard.html
   - admin/developer/master â†’ /admin/dashboard.html
```

## ğŸ“Š ç™»éŒ²ãƒ•ãƒ­ãƒ¼

### ãŠå®¢æ§˜ï¼ˆCustomerï¼‰
```
1. /signup.html ã§æ–°è¦ç™»éŒ²
2. Firebase Authenticationã«ç™»éŒ²
3. clientsãƒ†ãƒ¼ãƒ–ãƒ«ã«ä¿å­˜ï¼ˆå°†æ¥çš„ã«å®Ÿè£…ï¼‰
4. role: 'customer' ã§å›ºå®š
```

### å¾“æ¥­å“¡ï¼ˆWorkerï¼‰
```
1. ç®¡ç†è€…ãŒ /admin/users/index.html ã§å¾“æ¥­å“¡ã‚’ç™»éŒ²
2. AWS Cognito User Poolã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆ
3. DynamoDBã®workersãƒ†ãƒ¼ãƒ–ãƒ«ã«ä¿å­˜
4. Cognito Subã‚’ç´ä»˜ã‘
5. åˆæœŸãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å¾“æ¥­å“¡ã«é€šçŸ¥
```

## ğŸ¯ ãƒ¡ãƒªãƒƒãƒˆ

1. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®å‘ä¸Š**: å¾“æ¥­å“¡ã¨ãŠå®¢æ§˜ã®èªè¨¼ã‚’å®Œå…¨ã«åˆ†é›¢
2. **ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã®æ˜ç¢ºåŒ–**: å¾“æ¥­å“¡ã¯`workers`ãƒ†ãƒ¼ãƒ–ãƒ«ã€ãŠå®¢æ§˜ã¯`clients`ãƒ†ãƒ¼ãƒ–ãƒ«
3. **é‹ç”¨ã®ç°¡ç´ åŒ–**: å¾“æ¥­å“¡ã®ç®¡ç†ã‚’AWSã§ä¸€å…ƒåŒ–
4. **ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£**: AWS Cognitoã¯å¾“æ¥­å“¡æ•°ã®å¢—åŠ ã«å¯¾å¿œå¯èƒ½

## ğŸ“ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. **ãŠå®¢æ§˜ç”¨ã®clientsãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆ**
   - æ–°è¦ç™»éŒ²æ™‚ã«`clients`ãƒ†ãƒ¼ãƒ–ãƒ«ã«ä¿å­˜
   - Firebase UIDã‚’ç´ä»˜ã‘

2. **ãƒ­ã‚°ã‚¤ãƒ³å¾Œã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆå‡¦ç†ã®æ”¹å–„**
   - ãŠå®¢æ§˜: `/customers/dashboard.html`ï¼ˆå°†æ¥çš„ã«å®Ÿè£…ï¼‰
   - å¾“æ¥­å“¡: ãƒ­ãƒ¼ãƒ«ã«å¿œã˜ãŸé©åˆ‡ãªãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰

3. **æ—¢å­˜ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç§»è¡Œ**
   - æ—¢å­˜ã®Firebaseãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’åˆ†é¡
   - å¾“æ¥­å“¡ã‚’Cognitoã«ç§»è¡Œ

