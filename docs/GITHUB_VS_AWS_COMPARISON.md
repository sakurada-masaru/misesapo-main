# GitHub Pages vs AWS ホスティング比較

## 現在の状況

### バックエンド
- ✅ **AWS Lambda + API Gateway**: レポートAPI
- ✅ **DynamoDB**: データベース
- ✅ **S3**: 画像ストレージ

### フロントエンド（選択肢）
- 🌐 **GitHub Pages**: 現在使用中
- ☁️ **AWS S3 + CloudFront**: AWSに統一する場合

---

## 詳細比較

### 1. コスト

| 項目 | GitHub Pages | AWS S3 + CloudFront |
|------|-------------|---------------------|
| **ホスティング** | 無料 | ほぼ無料（月額 $0.50-2程度） |
| **転送量** | 無料（制限あり） | 最初の1GB無料、その後 $0.085/GB |
| **リクエスト** | 無料 | 最初の10,000件無料 |
| **合計** | **完全無料** | **ほぼ無料**（小規模なら月額 $1以下） |

**結論**: どちらもほぼ無料。GitHub Pagesの方が完全無料。

---

### 2. パフォーマンス

| 項目 | GitHub Pages | AWS S3 + CloudFront |
|------|-------------|---------------------|
| **CDN** | ✅ GitHubのCDN | ✅ CloudFront（AWSのグローバルCDN） |
| **速度** | 速い | 非常に速い（エッジロケーション多数） |
| **キャッシュ** | 自動 | カスタマイズ可能 |

**結論**: どちらも高速。CloudFrontの方が若干速い可能性があるが、体感差はほぼなし。

---

### 3. 管理のしやすさ

| 項目 | GitHub Pages | AWS S3 + CloudFront |
|------|-------------|---------------------|
| **デプロイ** | ✅ 自動（Git pushで自動デプロイ） | ⚠️ 手動またはCI/CD設定が必要 |
| **設定** | ✅ 簡単（`.github/workflows/pages.yml`） | ⚠️ やや複雑（S3 + CloudFront + Route53） |
| **ログ** | ⚠️ 限定的 | ✅ CloudWatchで詳細ログ |
| **監視** | ⚠️ なし | ✅ CloudWatchで監視可能 |

**結論**: GitHub Pagesの方が圧倒的に簡単。AWSは設定が複雑。

---

### 4. 統合性（バックエンドとの連携）

| 項目 | GitHub Pages | AWS S3 + CloudFront |
|------|-------------|---------------------|
| **AWS API連携** | ✅ 問題なし（CORS設定済み） | ✅ 問題なし（同じAWS内） |
| **認証** | ✅ Firebase認証で問題なし | ✅ Firebase認証で問題なし |
| **統合管理** | ⚠️ GitHubとAWSが分離 | ✅ AWSコンソールで一元管理 |

**結論**: どちらも問題なし。AWSに統一すると管理が一元化される。

---

### 5. 機能・制限

| 項目 | GitHub Pages | AWS S3 + CloudFront |
|------|-------------|---------------------|
| **動的ルーティング** | ⚠️ クライアントサイドのみ | ⚠️ クライアントサイドのみ（Lambda@Edgeで可能） |
| **カスタムドメイン** | ✅ 対応 | ✅ 対応 |
| **HTTPS** | ✅ 自動 | ✅ 自動（CloudFront） |
| **リポジトリ** | ✅ 公開リポジトリで無料 | ✅ リポジトリ不要 |
| **制限** | 1GB容量、100GB/月転送 | ほぼ制限なし |

**結論**: どちらも基本的な機能は同じ。AWSの方が制限が緩い。

---

### 6. セキュリティ

| 項目 | GitHub Pages | AWS S3 + CloudFront |
|------|-------------|---------------------|
| **HTTPS** | ✅ 自動 | ✅ 自動 |
| **アクセス制御** | ⚠️ リポジトリの公開/非公開のみ | ✅ IAM、CloudFront署名URLなど |
| **DDoS対策** | ✅ GitHubが対応 | ✅ AWS Shield（有料） |

**結論**: どちらも安全。AWSの方が細かい制御が可能。

---

## 推奨: **GitHub Pagesを継続使用**

### 理由

1. **完全無料**
   - AWSもほぼ無料だが、GitHub Pagesは完全無料

2. **デプロイが簡単**
   - Git pushで自動デプロイ
   - 設定ファイル1つ（`.github/workflows/pages.yml`）のみ

3. **十分な機能**
   - バックエンドAPIとの連携も問題なし
   - 動的ルーティングはクライアントサイドで解決可能

4. **管理が楽**
   - AWSコンソールを開く必要がない
   - GitHubだけで完結

5. **バックエンドは既にAWS**
   - フロントエンドをAWSに移行しても、管理が複雑になるだけ
   - バックエンドとフロントエンドは分離されているので、別々のホスティングで問題なし

---

## AWSに移行すべき場合

以下の場合のみ、AWS S3 + CloudFrontへの移行を検討：

1. **大規模なトラフィック**
   - 月間100GB以上の転送量
   - GitHub Pagesの制限に達する場合

2. **AWSへの完全統一**
   - すべてのインフラをAWSで管理したい
   - コストを気にしない

3. **高度な機能が必要**
   - Lambda@Edgeでサーバーサイドルーティング
   - CloudFront署名URL
   - 詳細なログ・監視

---

## 結論

### **現状維持（GitHub Pages）を推奨**

**理由**:
- ✅ 完全無料
- ✅ デプロイが簡単
- ✅ 十分な機能
- ✅ 管理が楽
- ✅ バックエンドAPIとの連携も問題なし

**動的ルーティングの問題**:
- クライアントサイドルーティングで解決可能
- AWSに移行する必要はない

**移行する場合**:
- 大規模なトラフィックが発生した時
- AWSへの完全統一が必要になった時

---

## 次のステップ

1. **GitHub Pagesを継続使用**
2. **動的ルーティングをクライアントサイドで実装**
   - `/admin/reports/{id}/edit.html` → `/admin/reports/edit.html`
   - JavaScriptでURLからIDを取得
   - 既存の `getReportIdFromUrl()` などを活用

これで、追加コストなしで動的ルーティングの問題を解決できます！

