# Workers（従業員）ID定義

## ID形式

### 新規作成時のID形式

**フロントエンド**:
```javascript
data.id = 'W' + Date.now();  // 例: W1733026800000
```

**Lambda関数（バックエンド）**:
```python
body_json['id'] = 'W' + str(int(datetime.utcnow().timestamp() * 1000))  # 例: W1733026800000
```

### 既存データのID形式

既存のユーザーデータは以下の形式の可能性があります：
- 数値ID: `"2"`, `"3"`, `"4"` など
- プレフィックス付きID: `"W1733026800000"` など
- その他の形式: `"user_xxx"` など

## DynamoDBテーブル定義

- **テーブル名**: `workers`
- **パーティションキー**: `id` (String型)
- **ID形式**: 文字列（数値、プレフィックス付き、その他すべて文字列として扱う）

## フロントエンドでのID取得

```javascript
id: w.id || w.user_id || `user_${Date.now()}_${Math.random()}`
```

優先順位：
1. `w.id` - 主要なIDフィールド
2. `w.user_id` - 代替IDフィールド
3. フォールバック - 一時的なID生成

## 問題点

削除時にID "2" が見つからない原因：
- フロントエンドで表示されているIDと、DynamoDBに保存されているIDが一致していない可能性
- 数値IDが文字列として保存されているが、比較時に不一致が発生している可能性

## 解決策

1. **IDの正規化**: 削除時にIDを文字列として扱う
2. **IDの検証**: 削除前にIDの存在を確認
3. **ログ出力**: IDの形式を確認するためのデバッグログを追加

