# 出退勤記録の使い方

## 📱 スタッフ向け：出退勤を記録する方法

### 1. ログイン

1. **スタッフ窓口にアクセス**
   - URL: `/staff/signin.html`
   - または、メインページから「スタッフ窓口」をクリック

2. **ログイン情報を入力**
   - メールアドレス
   - パスワード

3. **ログイン後、自動的にマイページにリダイレクト**
   - URL: `/staff/mypage.html?id={従業員ID}`

### 2. 出退勤を記録する

#### 出勤を記録する

1. **マイページの「出退勤記録」セクションを確認**
   - 現在の状態が表示されます（未出勤/出勤中/退勤済み）

2. **「出勤する」ボタンをクリック**
   - 確認ダイアログが表示されます
   - 現在時刻が表示されます
   - 「出勤する」をクリックして確定

3. **出勤記録が保存されます**
   - 成功メッセージが表示されます
   - ステータスが「出勤中」に変わります
   - 出勤時刻が表示されます

#### 退勤を記録する

1. **出勤後、「退勤する」ボタンをクリック**
   - 確認ダイアログが表示されます
   - 現在時刻が表示されます
   - 「退勤する」をクリックして確定

2. **退勤記録が保存されます**
   - 成功メッセージが表示されます
   - ステータスが「退勤済み」に変わります
   - 出勤時刻と退勤時刻、実労働時間が表示されます

### 3. 休憩時間を記録する（オプション）

1. **出勤中に「休憩開始」ボタンをクリック**
   - 休憩開始時刻が記録されます

2. **「休憩終了」ボタンをクリック**
   - 休憩終了時刻が記録されます
   - 休憩時間が自動計算されます

### 4. その他の機能

#### 打刻修正を申請する

- 「打刻修正を申請」ボタンをクリック
- 修正したい日付、時刻、理由を入力
- 管理者が承認すると反映されます

#### 月間統計を確認する

- 「今月の出勤日数」と「今月の総労働時間」が表示されます
- カレンダーで過去の出退勤記録を確認できます

## 🔧 管理者向け：出退勤記録を確認・管理する方法

### 1. ユーザー詳細ページで確認

1. **ユーザー一覧ページにアクセス**
   - URL: `/admin/users/`

2. **確認したいユーザーをクリック**
   - ユーザー詳細ページが開きます

3. **「タイムカード」セクションを確認**
   - 月間の出退勤記録が一覧表示されます
   - 日付、曜日、出勤時刻、退勤時刻、休憩時間、実労働時間、残業時間、状態が表示されます

4. **月間サマリーを確認**
   - 出勤日数、総労働時間、残業時間、遅刻回数が表示されます

5. **月を移動**
   - 「前月」「次月」ボタンで月を切り替えられます

### 2. 所定労働時間を設定

1. **ユーザー詳細ページで「編集」ボタンをクリック**

2. **編集モーダルで以下を設定**
   - 所定開始時刻（例: 09:00）
   - 所定終了時刻（例: 18:00）
   - 所定労働時間（例: 8.0時間）

3. **「保存」をクリック**
   - 設定が保存されます
   - 遅刻・早退の判定に使用されます

### 3. 出退勤履歴を確認

1. **出退勤履歴ページにアクセス**
   - URL: `/admin/attendance/history.html`

2. **フィルタリング**
   - 従業員ID、日付範囲、年月でフィルタリングできます

3. **詳細を確認**
   - 各記録をクリックすると詳細が表示されます

## ⚠️ 注意事項

### 1日1回制限

- **出勤・退勤は1日1回まで**
- 既に出勤記録がある場合は、退勤のみ可能
- 既に退勤記録がある場合は、再出勤が可能（別記録として保存）

### 確認ダイアログ

- 出勤・退勤時には必ず確認ダイアログが表示されます
- 誤操作を防ぐため、必ず確認してから確定してください

### オフライン対応

- インターネット接続がない場合でも、ローカルストレージに保存されます
- 接続が復旧したら、自動的にAPIに同期されます

## 🐛 トラブルシューティング

### 出退勤ボタンが表示されない

- ページを再読み込みしてください
- ブラウザのキャッシュをクリアしてください

### 出退勤記録が保存されない

- インターネット接続を確認してください
- エラーメッセージを確認してください
- 管理者に連絡してください

### 時刻が正しく表示されない

- ブラウザのタイムゾーン設定を確認してください
- システムはUTC+9（日本時間）で動作します

