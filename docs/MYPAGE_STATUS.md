# マイページの現状確認

## ✅ 存在確認

### 1. お客様用マイページ: `/mypage.html`
- **状態**: ✅ 存在する
- **レイアウト**: `layouts.base`
- **認証**: `client_auth.js`（Firebase認証）

### 2. スタッフ用マイページ: `/staff/mypage.html`
- **状態**: ✅ 存在する
- **レイアウト**: `layouts.base`
- **認証**: `cognito_auth.js`（AWS Cognito認証）+ `client_auth.js`（フォールバック）

---

## 📋 機能確認

### お客様用マイページ (`/mypage.html`)

#### 表示内容
- **ヘッダー**:
  - 会社名（株式会社 Dart Ace）
  - オーナー名（山田 太郎）
  - ナビゲーション: オーナー情報、登録店舗情報、アカウント設定、発注履歴、レポート

#### セクション
1. **ミセサポからのメッセージ**
   - お知らせ表示

2. **資料提出**
   - 提出されていない資料の通知
   - 資料提出へのリンク

3. **店舗情報**
   - 店舗情報確認/変更
   - 提出資料の状態

4. **定期発注**
   - 発注サイクルの選択（毎月、2ヶ月、3ヶ月、6ヶ月、毎年）

5. **カレンダー**（サイドバー、PCのみ）
   - スケジュール表示

#### データ取得
- **現状**: 静的データ（ハードコード）
- **要確認**: DynamoDB `clients`テーブルからデータを取得する処理があるか

---

### スタッフ用マイページ (`/staff/mypage.html`)

#### 表示内容
- **ヘッダー**:
  - ユーザーアバター
  - ユーザー名、ロール、部署
  - ナビゲーション: アカウント設定、スケジュール、レポート

#### セクション
1. **出退勤記録**
   - 出退勤トグルボタン
   - 現在の出勤状況
   - 今月の出勤日数
   - 今月の総労働時間

2. **今週のスケジュール**
   - 週間スケジュール表示

3. **最近のレポート**
   - レポート一覧表示

4. **基本情報**（サイドバー）
   - ユーザーID
   - メールアドレス
   - 電話番号
   - 部署
   - 登録日

5. **今月のカレンダー**（サイドバー、PCのみ）
   - カレンダー表示

#### データ取得
- **実装済み**: DynamoDB `workers`テーブルからデータを取得
- **認証**: Cognito認証を優先、Firebase認証をフォールバック
- **API**: `/workers/{id}` エンドポイントを使用

---

## ⚠️ 確認が必要な項目

### お客様用マイページ (`/mypage.html`)
1. **データ取得処理の確認**
   - `clients`テーブルからデータを取得する処理があるか
   - Firebase認証後にユーザー情報を表示する処理があるか

2. **動的データ表示**
   - 現在は静的データ（ハードコード）が表示されている
   - 実際のユーザー情報を表示する処理が必要

3. **認証チェック**
   - ログインしていない場合のリダイレクト処理があるか

### スタッフ用マイページ (`/staff/mypage.html`)
1. **データ取得処理**
   - ✅ 実装済み（`loadCurrentUser`関数）
   - Cognito認証とFirebase認証の両方に対応

2. **出退勤記録**
   - ✅ 実装済み（localStorage使用）
   - 将来的にバックエンドAPIとの連携が必要

3. **スケジュール表示**
   - ✅ 実装済み（APIから取得）

4. **レポート表示**
   - ✅ 実装済み（APIから取得）

---

## 🔧 必要な修正

### お客様用マイページ (`/mypage.html`)
1. **データ取得処理の追加**
   - Firebase認証後に`clients`テーブルからユーザー情報を取得
   - 取得したデータを表示

2. **認証チェックの追加**
   - ログインしていない場合、`/signin.html`にリダイレクト

3. **動的データ表示**
   - 会社名、オーナー名などを動的に表示

### スタッフ用マイページ (`/staff/mypage.html`)
1. **出退勤記録のバックエンド連携**
   - 現在はlocalStorage使用
   - 将来的にAPIとの連携が必要

2. **カレンダー機能の実装**
   - 出退勤記録のカレンダー表示（現在は未実装）

---

## 📊 比較

| 項目 | お客様用 (`/mypage.html`) | スタッフ用 (`/staff/mypage.html`) |
|------|-------------------------|--------------------------------|
| **存在** | ✅ 存在 | ✅ 存在 |
| **認証** | Firebase | Cognito（優先）+ Firebase（フォールバック） |
| **データ取得** | ❌ 未実装（静的データ） | ✅ 実装済み（動的データ） |
| **出退勤記録** | ❌ なし | ✅ あり |
| **スケジュール** | ✅ あり（静的） | ✅ あり（動的） |
| **レポート** | ✅ あり（静的） | ✅ あり（動的） |
| **認証チェック** | ❓ 要確認 | ✅ 実装済み |

