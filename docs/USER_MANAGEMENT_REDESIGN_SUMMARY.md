# ユーザー管理ページ 作り直し まとめ

## 📋 現在の状況

### 実装済み
- ✅ 4セクション構造（フロントオフィス、ミドルオフィス、バックオフィス、運営本部）
- ✅ カード表示レイアウト
- ✅ 部署ごとのグループ化
- ✅ 部署内のユーザーを権限の大きい順（左から）に並べる
- ✅ 個別取得APIで最新データを取得
- ✅ 強整合性読み取りの実装

### 問題点
- ❌ ロールから部署を自動決定する処理が複雑になっている
- ❌ DB上の実際の部署データと表示が一致しない場合がある
- ❌ 組織図との整合性が取れていない

---

## 🏢 組織図（MindMeisterより）

### 経営層
- **代表取締役**: 正田和輝
- **スペシャルバイザー**:
  - 高木直人
  - 太田真也

### 経営本部の下

#### 1. フロントオフィス
- **営業事務**:
  - 増田優香
  - 沖智弘
  - 熊谷円
  - パンデ
- **営業部**:
  - **FS営業**:
    - 生井剛
    - 梅岡ユウジ
    - 平鋭未
    - 中澤裕
  - **IS営業**:
    - lullaby
    - 下田
    - 坂口

#### 2. ミドルオフィス
- **開発部**:
  - 山村明広
  - 竹内那海
  - 夏目倫之介
  - 外部スタッフ（森田未希）

#### 3. バックオフィス
- **人事部**:
  - 関口栄一
- **総務部**:
  - 櫻田傑（管理者ロール）
- **経理部**:
  - 岡本涼子
- **広報・SNS対策部**:
  - （メンバー未記載）

#### 4. 運営本部
- **清掃員**:
  - 梅岡ユウジ（ガブリエラ、ガブリエレ）
  - 遠藤虹輝（板橋隆二、大野幹太、平鋭未、佐々木一真、中島郁哉、中澤裕、吉井奎吾）
  - 松岡
  - レムエル

---

## 🎯 作り直しの方針

### 基本方針
1. **役職持ち（管理者ロール）と平社員（それ以外）を区別**
   - 管理者ロール（`admin`）: 総務部の櫻田傑
   - それ以外: 各部署の平社員

2. **業務内容と大まかな部署で分類**
   - 部署名は組織図に合わせる
   - ロールから部署を自動決定しない
   - DB上の実際の部署データを使用

3. **シンプルな実装**
   - 複雑なロール→部署のマッピングを削除
   - 部署名の正規化を最小限に

---

## 📊 現在のDB上のデータ

### ロール別・部署別のユーザー一覧

**admin**:
- 清掃: 遠藤虹輝 (W021)
- 開発: 櫻田傑 (9999, W999), 太田真也 (W014)

**developer**:
- 開発: 山村明広 (W018), 夏目倫之助 (W019), 竹内那海 (W020)

**human_resources**:
- 運営: 関口栄一 (W022)

**office**:
- 営業事務: 熊谷円 (W011), 増田優香 (W012)
- 経理: 岡本涼子 (W017) ← 更新済み

**operation**:
- 経営本部: 正田和輝 (W001)

**sales**:
- 営業: 平鋭未 (W008), 沖智弘 (W009), 生井剛 (W013)

**staff**:
- 営業: 梅岡アレサンドレユウジ (W002)
- 現場清掃: 中島郁哉 (W003), 板橋隆二 (W004), 吉井奎吾 (W005), 佐々木一真 (W006), 大野幹太 (W007), 北野康平 (W010)

---

## 🔧 作り直しで必要な作業

### 1. 部署名の正規化を簡素化
- 組織図に合わせた部署名に統一
- 不要な自動変換を削除

### 2. 部署とセクションのマッピングを明確化
- フロントオフィス: 営業事務、営業部
- ミドルオフィス: 開発部
- バックオフィス: 人事部、総務部、経理部、広報・SNS対策部
- 運営本部: 清掃員、スペシャルバイザー

### 3. 権限順の並び替え
- 部署内のユーザーを権限の大きい順（左から）に並べる
- 管理者ロール（`admin`）が最優先

### 4. 削除対象の部署
- 現場清掃 → 清掃員に統合
- 経営本部 → 運営本部に統合（または削除）
- 運営 → 運営本部に統合（または削除）

---

## 📝 次のステップ

1. 組織図に基づいて、DB上の部署データを整理
2. 部署名の正規化ロジックを簡素化
3. セクションと部署のマッピングを明確化
4. テストして動作確認

---

## 🔍 確認事項

- [ ] 組織図の部署名とDB上の部署名の対応関係
- [ ] 管理者ロール（`admin`）の配置（総務部の櫻田傑）
- [ ] 削除対象の部署のユーザーをどこに配置するか
- [ ] 権限順の並び替えが正しく動作するか

